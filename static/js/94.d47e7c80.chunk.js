(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{1268:function(e,a,t){"use strict";var n=t(33),r=t(50),s=t(200);const c="[DEMANDES DEVIS FOURNISSEUR APP] REQUEST DEMANDES",l="[DEMANDES DEVIS FOURNISSEUR APP] REMOVE DEMANDES",i="[DEMANDES DEVIS FOURNISSEUR APP] SET PARAMETRES DATA",d="[DEMANDES DEVIS FOURNISSEUR APP] GET DEMANDES",o="[DEMANDES DEVIS FOURNISSEUR APP] SET DEMANDES SEARCH TEXT";function m(e,a){var t=e.message?"=".concat(e.message):"";const n=r.a.get("/api/fournisseurs/".concat(a,"/demandes?page=").concat(e.page,"&del=false&message").concat(t,"&statut=1&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return e=>(e({type:c}),n.then(a=>e({type:d,payload:a.data})))}function u(e,a,t){let c={del:!0};return(i,d)=>{return r.a.put("/api/demande_devis/".concat(e.id),c).then(e=>Promise.all([i({type:l}),i(s.b("product-devis")),i(Object(n.B)({message:"Demande bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>i(m(a,t))))}}function p(e){return{type:i,parametres:e}}var E=t(39);const f="[DEMANDE DEVIS FOURNISSEUR APP] REQUEST DEMANDE",g="[DEMANDE DEVIS FOURNISSEUR APP] GET DEMANDE",D="[DEMANDE DEVIS FOURNISSEUR APP] SAVE ERROR";function h(e){const a=r.a.get("/api/demande_devis/".concat(e));return e=>(e({type:f}),a.then(a=>(e(s.b("product-devis")),e({type:g,payload:a.data}))).catch(a=>{e({type:D,payload:E.y.parseApiErrors(a)})}))}t.d(a,"d",function(){return c}),t.d(a,"g",function(){return i}),t.d(a,"b",function(){return d}),t.d(a,"f",function(){return o}),t.d(a,"i",function(){return m}),t.d(a,"j",function(){return u}),t.d(a,"k",function(){return p}),t.d(a,"c",function(){return f}),t.d(a,"a",function(){return g}),t.d(a,"e",function(){return D}),t.d(a,"h",function(){return h})},1351:function(e,a,t){"use strict";var n=t(43),r=t(1268),s=t(102);const c={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,message:"",filter:{id:"created",direction:"desc"}},demandesDialog:{props:{open:!1}}};var l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case r.d:return{...e,loading:!0};case r.b:return{...e,data:a.payload["hydra:member"],pageCount:s.a.hydraPageCount(a.payload),loading:!1};case r.f:return{...e,searchText:a.searchText};case r.g:return{...e,parametres:{page:a.parametres.page,message:a.parametres.message,filter:{id:a.parametres.filter.id,direction:a.parametres.filter.direction}}};default:return e}};const i={data:null,error:null,loading:!1};var d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case r.c:return{...e,loading:!0};case r.a:return{...e,data:a.payload,loading:!1};case r.e:return{...e,error:a.payload,loading:!1};default:return e}};const o=Object(n.d)({demandesDevis:l,demandeDevis:d});a.a=o},1580:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(39),c=t(136),l=t(1221),i=t(1140),d=t(1204),o=t(71),m=t(1268),u=t(7),p=t(59),E=t.n(p),f=t(102),g=t(365),D=t(10);var h=Object(o.g)(function(e){const a=Object(u.b)(),t=Object(u.c)(e=>{let{demandesDevisFrsApp:a}=e;return a.demandesDevis.data}),c=Object(u.c)(e=>{let{demandesDevisFrsApp:a}=e;return a.demandesDevis.loading}),o=Object(u.c)(e=>{let{demandesDevisFrsApp:a}=e;return a.demandesDevis.pageCount}),p=Object(u.c)(e=>{let{demandesDevisFrsApp:a}=e;return a.demandesDevis.parametres}),h=Object(u.c)(e=>{let{auth:a}=e;return a.user}),v=Object(u.c)(e=>{let{demandesDevisFrsApp:a}=e;return a.demandesDevis.searchText}),[S,b]=Object(n.useState)(null);return Object(n.useEffect)(()=>{t&&b(function(e,a){const t=Object.keys(e).map(a=>e[a]);return 0===a.length?t:f.a.filterArrayByString(t,a)}(t,v))},[t,v]),S?r.a.createElement("div",{className:"w-full flex flex-col"},r.a.createElement(s.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(g.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:(a,t,n)=>({className:"h-64 cursor-pointer",onClick:(a,n)=>{t&&e.history.push("/product_devis/"+t.original.id)}}),getTheadProps:(e,a,t)=>({className:"h-64"}),data:S,columns:[{Header:"",filterable:!1,Cell:e=>r.a.createElement("div",{className:"flex items-center"},e.original.isRead?r.a.createElement("p",{className:"text-green"},"Lu"):r.a.createElement("p",{className:"text-orange"},"No Lu"))},{Header:"Produit r\xe9f.",className:"font-bold",id:"reference",accessor:e=>e.produit?e.produit.reference:""},{Header:"Quantit\xe9",id:"quantity",accessor:e=>e.quantity?e.quantity:""},{Header:"Nom Contact",id:"contact",accessor:e=>e.contact?e.contact:""},{Header:"Soci\xe9t\xe9",id:"societe",accessor:e=>e.societe?e.societe:""},{Header:"T\xe9l\xe9phone",id:"phone",accessor:e=>e.phone?e.phone:""},{Header:"Email",id:"email",accessor:e=>e.email?e.email:""},{Header:"Adresse",id:"adresse",accessor:e=>e.adresse?e.adresse:""},{Header:"Message",accessor:"message",filterable:!1,Cell:e=>D.a.truncate(e.original.message,{length:36,separator:" "})},{Header:"Date de cr\xe9ation",accessor:"created",filterable:!1,Cell:e=>E()(e.original.created).format("DD/MM/YYYY HH:mm")},{Header:"",Cell:e=>r.a.createElement("div",{className:"flex items-center"},1!==e.original.statut?r.a.createElement(l.a,{title:"Supprimer"},r.a.createElement(i.a,{className:"text-red text-20",onClick:t=>{t.stopPropagation(),a(m.j(e.original,p,h.id))}},r.a.createElement(d.a,null,"delete"))):r.a.createElement(l.a,{title:"Interdit!"},r.a.createElement(i.a,{className:"text-20 cursor-not-allowed disable",onClick:e=>{e.stopPropagation()}},r.a.createElement(d.a,null,"delete"))),r.a.createElement(l.a,{title:"D\xe9tails"},r.a.createElement(i.a,{className:"text-teal text-20"},r.a.createElement(d.a,null,"remove_red_eye"))))}],manual:!0,defaultSortDesc:!0,pages:o,page:p.page-1,defaultPageSize:10,loading:c,showPageSizeOptions:!1,onPageChange:e=>{p.page=e+1,a(m.k(p))},onSortedChange:(e,t,n)=>{p.page=1,p.filter.id=e[0].id,p.filter.direction=e[0].desc?"desc":"asc",a(m.k(p))},noDataText:"Aucune demande trouv\xe9e",loadingText:"Chargement...",ofText:"sur"}))):null}),v=t(89),S=t(135),b=t(1139),N=t(1205);var A=function(e){const a=Object(u.b)(),t=Object(u.c)(e=>{let{fuse:a}=e;return a.settings.mainTheme}),n=Object(u.c)(e=>{let{demandesDevisFrsApp:a}=e;return a.demandesDevis.parametres});return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(s.d,{animation:"transition.expandIn",delay:300},r.a.createElement(d.a,{className:"text-32 mr-0 sm:mr-12"},"inbox")),r.a.createElement(s.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(v.a,{className:"hidden sm:flex",variant:"h6"},"Gestion des demandes de devis"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},r.a.createElement(N.a,{theme:t},r.a.createElement(s.d,{animation:"transition.slideDownIn",delay:300},r.a.createElement(S.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},r.a.createElement(d.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(b.a,{placeholder:"Rechercher dans les messages",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:n.message,inputProps:{"aria-label":"Rechercher"},onChange:e=>{n.page=1,n.message=e.target.value,a(m.k(n))}}))))))},x=t(1351),y=t(364);a.default=Object(c.a)("demandesDevisFrsApp",x.a)(function(){const e=Object(u.b)(),a=Object(u.c)(e=>{let{demandesDevisFrsApp:a}=e;return a.demandesDevis.parametres}),t=Object(u.c)(e=>{let{auth:a}=e;return a.user});return Object(n.useEffect)(()=>{t&&e(m.i(a,t.id))},[e,a,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.Helmet,null,r.a.createElement("title",null,"Demandes de devis | Les Achats Industriels"),r.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),r.a.createElement("meta",{name:"googlebot",content:"noindex"})),r.a.createElement(s.o,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(A,null),content:r.a.createElement(h,null),innerScroll:!0}))})}}]);