(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1242:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};t.default=r},1267:function(e,t,a){"use strict";var r=a(50),n=a(33);const o="[SECTEURS APP ADMIN] REQUEST SECTEURS",s="[SECTEURS APP ADMIN] GET SECTEURS",i="[SECTEURS APP ADMIN] SET SECTEURS SEARCH TEXT";function c(e){return{type:i,searchText:e.target.value}}function l(){const e=r.a.get("/api/secteurs?pagination=false&props[]=name&props[]=id&props[]=del&props[]=image");return t=>(t({type:o}),e.then(e=>t({type:s,payload:e.data})))}function u(e){let t={del:!0,name:e.name+"_deleted-"+e.id};return a=>{return a({type:o}),r.a.put("/api/secteurs/".concat(e.id),t).then(e=>Promise.all([a(Object(n.B)({message:"secteur bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>a(l()))).catch(e=>{e.response.data&&e.response.data["hydra:description"]&&a(Object(n.B)({message:e.response.data["hydra:description"],anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))}).then(()=>a(l()))}}var d=a(102),m=a(10);const p="[SECTEUR APP APP] REQUEST SECTEUR",f="[SECTEUR APP APP] GET SECTEUR",E="[SECTEUR APP APP] SAVE ERROR",g="[SECTEUR APP APP] UPDATE SECTEUR",h="[SECTEUR APP APP] REQUEST SAVE_SECTEUR",P="[SECTEUR APP APP] UPLOAD REQUEST",S="[SECTEUR APP APP] UPLOAD ERROR",b="[SECTEUR APP APP] UPLOAD ATTACHEMENT",y="[SECTEUR APP APP] CLEAN_UP";function v(){return e=>e({type:y})}function A(e){const t=r.a.get("/api/secteurs/".concat(e,"&props[]=name&props[]=id&props[]=image&props[]=del"));return e=>(e({type:p}),t.then(t=>{e({type:f,payload:t.data})}))}function w(e,t){return e.image&&(e.image=e.image["@id"]),(a,o)=>{const s=r.a.put(e["@id"],e);return a({type:h}),s.then(e=>Promise.all([a({type:g,payload:e.data}),a(Object(n.B)({message:"Bien modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"})),t.push("/parametres/secteurs")])).catch(e=>{a({type:E,payload:d.a.parseApiErrors(e)})})}}function T(e,t){e.image&&(e.image=e.image["@id"]);const a=r.a.post("/api/secteurs",e);return e=>(e({type:h}),a.then(a=>{e(Object(n.B)({message:"Secteur sauvegard\xe9"})),e({type:g,payload:a.data}),t.push("/parametres/secteurs")}).catch(t=>{e({type:E,payload:d.a.parseApiErrors(t)})}))}function R(e){return(t,a)=>{const o=new FormData;o.append("file",e);const s=r.a.post("/api/image_secteur",o,{headers:{"Content-Type":"multipart/form-data"}});return t({type:P}),s.then(e=>Promise.all([e,t({type:b,payload:e.data}),t(Object(n.B)({message:"Image uploaded!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])).catch(e=>{t({type:S}),t(Object(n.B)({message:m.a.map(d.a.parseApiErrors(e),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function O(){return{type:f,payload:{name:"",image:null}}}const C="[DIALOG] OPEN",x="[DIALOG] CLOSE";function U(){return{type:x}}function I(e){return{type:C,options:e}}a.d(t,"f",function(){return o}),a.d(t,"c",function(){return s}),a.d(t,"i",function(){return i}),a.d(t,"d",function(){return"[SECTEURS APP] REMOVE SECTEUR"}),a.d(t,"u",function(){return c}),a.d(t,"p",function(){return l}),a.d(t,"s",function(){return u}),a.d(t,"b",function(){return f}),a.d(t,"g",function(){return E}),a.d(t,"h",function(){return g}),a.d(t,"e",function(){return h}),a.d(t,"l",function(){return P}),a.d(t,"k",function(){return S}),a.d(t,"j",function(){return b}),a.d(t,"a",function(){return y}),a.d(t,"m",function(){return v}),a.d(t,"o",function(){return A}),a.d(t,"v",function(){return w}),a.d(t,"t",function(){return T}),a.d(t,"w",function(){return R}),a.d(t,"q",function(){return O}),a.d(t,"n",function(){return U}),a.d(t,"r",function(){return I})},1346:function(e,t,a){"use strict";var r=a(43),n=a(1267);const o={entities:[],loading:!1,searchText:""};var s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.f:return{...e,loading:!0};case n.c:return{...e,entities:t.payload["hydra:member"],loading:!1};case n.i:return{...e,searchText:t.searchText};default:return e}};const i={loadingSS:!1,requestSecteur:!1,error:null,data:null,secteurReqInProgress:!1,image:null};var c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.a:return{...e,loadingS:!1,requestSecteur:!1,error:null,data:null,secteurReqInProgress:!1,image:null};case n.d:return{...e,loadingS:!1};case n.e:case n.f:return{...e,loadingS:!0};case n.b:return{...e,data:t.payload,requestSecteur:!1,error:null};case n.h:return{...e,loadingS:!1,error:null};case n.g:return{...e,loadingS:!1,error:t.payload};case n.l:return{...e,secteurReqInProgress:!0};case n.j:return{...e,image:t.payload,secteurReqInProgress:!1};case n.k:return{...e,secteurReqInProgress:!1};default:return e}},l=a(33);const u={state:!1,options:{children:"Hi"}};var d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.f:return{...e,state:!0,options:{...e.options,...t.options}};case l.a:return{...e,state:!1};default:return e}};const m=Object(r.d)({secteurs:s,secteur:c,dialog:d});t.a=m},1498:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(89),s=a(1204),i=a(1227),c=a(1236),l=a(1219),u=a(1232),d=a(1157),m=a(39),p=a(137),f=a(7),E=a(136),g=a(1267),h=a(1346),P=a(10),S=a(51),b=a.n(S),y=a(1233),v=a(1242),A=a.n(v),w=a(2),T=a(16),R=a(1224);const O=Object(d.a)(e=>({root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},buttonProgress:{color:A.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},profileImageUpload:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut},profileImageItem:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,"&:hover":{"& $profileImageFeaturedStar":{opacity:.8}},"&.featured":{pointerEvents:"none",boxShadow:e.shadows[3],"& $profileImageFeaturedStar":{opacity:1},"&:hover $profileImageFeaturedStar":{opacity:1}}}}));t.default=Object(E.a)("secteursApp",h.a)(function(e){const t=Object(f.b)(),a=O(),d=Object(f.c)(e=>{let{secteursApp:t}=e;return t.secteur}),E=Object(r.useRef)(null),[h,S]=Object(r.useState)(0),{form:v,handleChange:A,setForm:C}=Object(p.b)(null);return Object(r.useEffect)(()=>(function(){const a=e.match.params,{secteurId:r}=a;t("new"===r?g.q():g.o(r))}(),()=>{t(g.m())}),[t,e.match.params]),Object(r.useEffect)(()=>{d.error&&0===h&&d.error.name&&E.current.updateInputsWithError({...d.error})},[d.error]),Object(r.useEffect)(()=>{(d.data&&!v||d.data&&v&&d.data.id!==v.id)&&C({...d.data})},[v,d.data,C]),Object(r.useEffect)(()=>{d.image&&C(P.a.set({...v},"image",d.image))},[d.image]),n.a.createElement(m.o,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:v&&n.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},n.a.createElement("div",{className:"flex flex-col items-start max-w-full"},n.a.createElement(m.d,{animation:"transition.slideRightIn",delay:300},n.a.createElement(o.a,{className:"normal-case flex items-center sm:mb-12",component:T.a,role:"button",to:"/parametres/secteurs",color:"inherit"},n.a.createElement(s.a,{className:"mr-4 text-20"},"arrow_back"),"Secteurs")),n.a.createElement("div",{className:"flex items-center max-w-full"},n.a.createElement("div",{className:"flex flex-col min-w-0"},n.a.createElement(m.d,{animation:"transition.slideLeftIn",delay:300},n.a.createElement(o.a,{className:"text-16 sm:text-20 truncate"},v.name?v.name:"Nouveau Secteur"))))),n.a.createElement(m.d,{animation:"transition.slideRightIn",delay:300},n.a.createElement(i.a,{className:"whitespace-no-wrap",variant:"contained",disabled:d.loadingSSS||!v.name||!v.image,onClick:()=>(function(a){const r=e.match.params,{secteurId:n}=r;t("new"===n?g.t(v,e.history):g.v(v,e.history))})()},"Sauvegarder",d.loadingSSS&&n.a.createElement(y.a,{size:24,className:a.buttonProgress})))),contentToolbar:v&&n.a.createElement(c.a,{value:h,onChange:function(e,t){S(t)},indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},n.a.createElement(l.a,{className:"h-64 normal-case",label:"Infos secteur"}),n.a.createElement(l.a,{className:"h-64 normal-case",label:"File"})),content:d.requestSecteur?n.a.createElement(R.a,{color:"secondary"}):v&&n.a.createElement("div",{className:" sm:p-10 max-w-2xl"},0===h&&n.a.createElement(b.a,{ref:E,className:"flex pt-5 flex-col "},n.a.createElement(u.a,{container:!0,spacing:3},n.a.createElement(u.a,{item:!0,xs:12,sm:12},n.a.createElement(m.F,{className:"mb-16",type:"text",name:"name",value:v.name,onChange:A,label:"Nom du secteur",validations:{minLength:3},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 3"},variant:"outlined",required:!0,fullWidth:!0})))),1===h&&n.a.createElement("div",null,n.a.createElement("input",{className:"hidden",id:"button-file",type:"file",disabled:d.secteurReqInProgress,onChange:function(e){const a=e.target.files[0];a&&t(g.w(a,v.id))}}),n.a.createElement("div",{className:"flex justify-center sm:justify-start flex-wrap"},n.a.createElement("label",{htmlFor:"button-file",className:Object(w.a)(a.secteurImageUpload,"flex items-center justify-center relative w-128 h-128 rounded-4 mr-16 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5")},d.secteurReqInProgress?n.a.createElement(y.a,{size:24,className:a.buttonProgress}):n.a.createElement(s.a,{fontSize:"large",color:"action"},"arrow_upward")),v.image?n.a.createElement("div",{className:Object(w.a)(a.secteurImageItem,"flex items-center cursor-pointer justify-center relative w-128 h-128 rounded-4 mr-16 mb-16 overflow-hidden  shadow-1 hover:shadow-5"),onClick:v.image?()=>window.open(m.G+v.image.url,"_blank"):""},n.a.createElement("img",{className:"max-w-none w-auto h-full",src:m.G+v.image.url,alt:v.name})):""))),innerScroll:!0})})}}]);