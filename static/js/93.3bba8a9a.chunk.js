(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{1244:function(e,a,t){"use strict";var n=t(3),r=t.n(n),l=t(4),c=t.n(l),o=t(0),s=t.n(o),i=t(2),m=t(8),d=t(89),u=s.a.forwardRef(function(e,a){var t=e.children,n=e.classes,l=e.className,o=e.disableTypography,m=void 0!==o&&o,u=c()(e,["children","classes","className","disableTypography"]);return s.a.createElement("div",r()({className:Object(i.a)(n.root,l),ref:a},u),m?t:s.a.createElement(d.a,{variant:"h6"},t))});a.a=Object(m.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(u)},1245:function(e,a,t){"use strict";var n=t(3),r=t.n(n),l=t(0),c=t.n(l),o=t(8),s=t(89),i=c.a.forwardRef(function(e,a){return c.a.createElement(s.a,r()({component:"p",variant:"body1",color:"textSecondary",ref:a},e))});a.a=Object(o.a)({root:{marginBottom:16}},{name:"MuiDialogContentText"})(i)},1547:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(39),c=t(7),o=t(136),s=t(89),i=t(1160),m=t(1140),d=t(1244),u=t(1229),p=t(1245),E=t(1230),f=t(1227),b=t(1204),h=t(365),O=t(50),N=t(102),g=t(33),y=t(10);const A="[COMMANDES FOURNISSEUR APP] GET COMMANDES",v="[COMMANDES FOURNISSEUR APP] SET SEARCH TEXT",S="[COMMANDES FOURNISSEUR APP] OPEN NEW COMMANDES DIALOG",C="[COMMANDES FOURNISSEUR APP] CLOSE NEW COMMANDES DIALOG",D="[COMMANDES FOURNISSEUR APP] OPEN EDIT COMMANDES DIALOG",j="[COMMANDES FOURNISSEUR APP] CLOSE EDIT COMMANDES DIALOG",x="[COMMANDES FOURNISSEUR APP] ADD COMMANDE",M="[COMMANDES FOURNISSEUR APP] SAVE ERROR",R="[COMMANDES FOURNISSEUR APP] UPDATE COMMANDE",P="[COMMANDES FOURNISSEUR APP] REMOVE COMMANDE",w="[COMMANDES FOURNISSEUR APP] CLEAN_UP";function I(e){const a=O.a.get("/api/fournisseurs/".concat(e,"/commandes?pagination=false&order[created]=desc"));return e=>a.then(a=>{e({type:A,payload:a.data["hydra:member"]})})}function U(){return{type:S}}const T="[DIALOG] OPEN",F="[DIALOG] CLOSE";function L(){return{type:F}}var k=t(1226),z=t(59),H=t.n(z);const B=Object(k.a)(e=>({chip2:{marginLeft:e.spacing(1),background:"#4caf50",color:"white",fontWeight:"bold",fontSize:"11px"},chipOrange:{marginLeft:e.spacing(1),background:"#ff9800",color:"white",fontWeight:"bold",fontSize:"11px"}}));var J=function(e){const a=Object(c.b)(),t=Object(c.c)(e=>{let{commandesFrsApp:a}=e;return a.commandes.entities}),o=Object(c.c)(e=>{let{commandesFrsApp:a}=e;return a.commandes.searchText}),N=Object(c.c)(e=>{let{auth:a}=e;return a.user}),y=B(),[A,v]=Object(n.useState)(null);return Object(n.useEffect)(()=>{t&&v(function(e,a){const t=Object.keys(e).map(a=>e[a]);return 0===a.length?t:l.y.filterArrayByString(t,a)}(t,o))},[t,o]),A?0===A.length?r.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},r.a.createElement(s.a,{color:"textSecondary",variant:"h5"},"Il n'y a pas de Commandes!")):r.a.createElement(l.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(h.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:(e,t,n)=>({className:"cursor-pointer",onClick:(e,n)=>{t&&a(function(e){return{type:D,data:e}}(t.original))}}),getTheadProps:(e,a,t)=>({className:"h-64 font-bold"}),data:A,columns:[{Header:"Commande N\xb0",accessor:"id",filterable:!0},{Header:"Nombre de jetons",accessor:"nbrJeton",filterable:!0},{Header:"\u064fEtat",id:"isUse",filterable:!0,accessor:e=>e.isUse?r.a.createElement(i.a,{className:y.chip2,label:"Trait\xe9e"}):r.a.createElement(i.a,{className:y.chipOrange,label:"En attente"})},{Header:"Date de commande",id:"created",filterable:!0,accessor:e=>H()(e.created).format("DD/MM/YYYY HH:mm")},{Header:"",sortable:!1,width:64,Cell:e=>r.a.createElement("div",{className:"flex items-center"},r.a.createElement(m.a,{className:"text-red text-20",onClick:t=>{t.stopPropagation(),a(function(e){return{type:T,options:e}}({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(u.a,null,r.a.createElement(p.a,{id:"alert-dialog-description"},e.original.isUse?"Vous ne pouvez pas supprimer cet enregistrement, car il est trait\xe9e!":"Voulez vous vraiment supprimer cet enregistrement ?")),r.a.createElement(E.a,null,r.a.createElement(f.a,{onClick:()=>a(L()),color:"primary"},"Non"),e.original.isUse?r.a.createElement(f.a,{disabled:!0,color:"primary",autoFocus:!0},"Oui"):r.a.createElement(f.a,{onClick:t=>{a(function(e,a){return(t,n)=>O.a.delete(e["@id"]).then(e=>Promise.all([t({type:P}),t(Object(g.B)({message:"Commande bien supprim\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>t(I(a))))}(e.original,N.id)),a(L())},color:"primary",autoFocus:!0},"Oui")))}))}},r.a.createElement(b.a,null,"delete")))}],defaultPageSize:10,noDataText:"No Commande found"})):null},W=t(135),G=t(1139),V=t(1205);var Y=function(e){const a=Object(c.b)(),t=Object(c.c)(e=>{let{commandesFrsApp:a}=e;return a.commandes.searchText}),n=Object(c.c)(e=>{let{fuse:a}=e;return a.settings.mainTheme});return r.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(l.d,{animation:"transition.expandIn",delay:300},r.a.createElement(b.a,{className:"text-32 mr-0 sm:mr-12"},"control_point_duplicate")),r.a.createElement(l.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(s.a,{className:"hidden sm:flex",variant:"h6"},"Liste des commandes"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},r.a.createElement(V.a,{theme:n},r.a.createElement(l.d,{animation:"transition.slideDownIn",delay:300},r.a.createElement(W.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},r.a.createElement(b.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(G.a,{placeholder:"Rechercher...",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:t,inputProps:{"aria-label":"Search"},onChange:e=>a(function(e){return{type:v,searchText:e.target.value}}(e))}))))),r.a.createElement(l.d,{animation:"transition.slideRightIn",delay:300},r.a.createElement(f.a,{onClick:e=>a(U()),className:"whitespace-no-wrap",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Commander des jetons"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},_=t(1223),$=t(1218),q=t(1228),K=t(1215),X=t(1238),Q=t(137),Z=t(51),ee=t.n(Z);const ae={name:""};var te=function(e){const a=Object(c.b)(),t=Object(c.c)(e=>{let{commandesFrsApp:a}=e;return a.commandes.commandesDialog}),o=Object(c.c)(e=>{let{auth:a}=e;return a.user}),{form:i,setForm:m}=Object(Q.b)(ae),[d,p]=Object(n.useState)(!1),b=Object(n.useRef)(null),h=Object(n.useCallback)(()=>{"edit"===t.type&&t.data&&m({...t.data}),"new"===t.type&&m({...ae,...t.data})},[t.data,t.type,m]);function A(){"edit"===t.type?a({type:j}):a({type:C})}return Object(n.useEffect)(()=>{t.props.open&&h()},[t.props.open,h]),r.a.createElement(_.a,Object.assign({classes:{paper:"m-24"}},t.props,{onClose:A,fullWidth:!0,maxWidth:"xs"}),r.a.createElement($.a,{position:"static",elevation:1},r.a.createElement(q.a,{className:"flex w-full"},r.a.createElement(s.a,{variant:"subtitle1",color:"inherit"},"new"===t.type?"Nouvelle Commande":"Editer Commande"))),r.a.createElement(ee.a,{onValidSubmit:function(e){var n,r;"new"===t.type?a((n=i,r=o.id,(e,a)=>O.a.post("/api/demande_jetons",n).then(a=>Promise.all([e({type:x}),e(Object(g.B)({message:"Commande bien ajout\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>e(I(r)))).catch(a=>{e({type:M}),e(Object(g.B)({message:y.a.map(N.a.parseApiErrors(a),function(e,a){return a+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))}))):a(function(e,a){return(t,n)=>O.a.put(e["@id"],e).then(e=>Promise.all([t({type:R}),t(Object(g.B)({message:"Commande bien modifi\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>t(I(a)))).catch(e=>{t({type:M}),t(Object(g.B)({message:y.a.map(N.a.parseApiErrors(e),function(e,a){return a+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}(i,o.id)),A()},onValid:function(){p(!0)},onInvalid:function(){p(!1)},ref:b,className:"flex flex-col overflow-hidden"},r.a.createElement(u.a,{classes:{root:"p-24"}},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"min-w-50 pt-5 pr-5 font-bold"},"Nombre de jetons"),r.a.createElement(l.C,{className:"",name:"nbrJeton",required:!0,onChange:function(e){m(y.a.set({...i},"nbrJeton",parseInt(e.target.value)))}},r.a.createElement(K.a,{value:"5",checked:5===i.nbrJeton,control:r.a.createElement(X.a,null),label:o.data.currency&&o.data.currency!==l.z?"5 ( 50,00 \u20ac/$   ) ":"5 ( 500,00 Dhs )"}),r.a.createElement(K.a,{value:"10",checked:10===i.nbrJeton,control:r.a.createElement(X.a,null),label:o.data.currency&&o.data.currency!==l.z?"10 ( 100,00 \u20ac/$   ) ":"10 ( 1000,00 Dhs )"}),r.a.createElement(K.a,{value:"20",checked:20===i.nbrJeton,control:r.a.createElement(X.a,null),label:o.data.currency&&o.data.currency!==l.z?"20 ( 200,00 \u20ac/$   ) ":"20 ( 2000,00 Dhs )"}))),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"caption",color:"inherit"},"Votre commande va \xeatre trait\xe9e d\xe8s que le virement sera fait,",r.a.createElement("br",null)," ci-dessous les coordonn\xe9es bancaires: ",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"caption",color:"inherit"},r.a.createElement("strong",{className:"uppercase"},"7e-Sky"),r.a.createElement("br",null),"ATTIJARIWAFA BANK",r.a.createElement("br",null),"CENTRE D'AFFAIRE CASA PORTE D'ANFA",r.a.createElement("br",null),"Casablanca, Maroc",r.a.createElement("br",null),r.a.createElement("strong",{className:"uppercase"}," RIB : 007 780 0004095000002798 03")," ",r.a.createElement("br",null),r.a.createElement("strong",{className:"uppercase"}," IBAN : MA64 007 780 0004095000002798 03"))),"new"===t.type?r.a.createElement(E.a,{className:"justify-between pl-16"},r.a.createElement(f.a,{variant:"contained",color:"primary",type:"submit",disabled:!d},"Ajouter")):r.a.createElement(E.a,{className:"justify-between pl-16"},i.isUse?"":r.a.createElement(f.a,{variant:"contained",color:"primary",type:"submit",disabled:!d},"Modifier"))))},ne=t(43);const re={entities:null,searchText:"",selectedCommandesIds:[],routeParams:{},commandesDialog:{type:"new",props:{open:!1},data:null}};var le=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case A:return{...e,entities:a.payload};case w:return{...re};case v:return{...e,searchText:a.searchText};case S:return{...e,commandesDialog:{type:"new",props:{open:!0},data:null}};case C:return{...e,commandesDialog:{type:"new",props:{open:!1},data:null}};case D:return{...e,commandesDialog:{type:"edit",props:{open:!0},data:a.data}};case j:return{...e,commandesDialog:{type:"edit",props:{open:!1},data:null}};default:return e}};const ce={state:!1,options:{children:"Hi"}};var oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case g.f:return{...e,state:!0,options:{...e.options,...a.options}};case g.a:return{...e,state:!1};default:return e}};var se=Object(ne.d)({commandes:le,dialog:oe}),ie=t(364);a.default=Object(o.a)("commandesFrsApp",se)(function(e){const a=Object(c.b)(),t=Object(c.c)(e=>{let{auth:a}=e;return a.user}),o=Object(n.useRef)(null),s=e.match.params,{open:i}=s;return Object(n.useEffect)(()=>(t.id&&a(I(t.id)),()=>{a(e=>e({type:w}))}),[a,t.id]),Object(n.useEffect)(()=>{i&&a(U())},[a,i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.Helmet,null,r.a.createElement("title",null,"Commandes jetons | Les Achats Industriels"),r.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),r.a.createElement("meta",{name:"googlebot",content:"noindex"})),r.a.createElement(l.p,{classes:{contentWrapper:"p-0 sm:p-24 pb-80 sm:pb-80 h-full",content:"flex flex-col h-full",leftSidebar:"w-256 border-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(Y,{pageLayout:o}),content:r.a.createElement(J,null),sidebarInner:!0,ref:o,innerScroll:!0}),r.a.createElement(te,null))})}}]);