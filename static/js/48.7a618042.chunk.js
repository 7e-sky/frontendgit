(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1242:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};a.default=r},1270:function(e,a,t){"use strict";var r=t(33),n=t(50);const i="[ACTUALITES APP] REQUEST ACTUALITES",l="[ACTUALITES APP] REMOVE ACTUALITES",o="[ACTUALITES APP] STATUT ACTUALITES",c="[ACTUALITES APP] SET PARAMETRES DATA",s="[ACTUALITES APP] CLEAN_UP",u="[USERS APP] GET ACTUALITES",d="[USERS APP] SET ACTUALITES SEARCH TEXT";function m(){return e=>e({type:s})}function p(e){var a=e.description?"=".concat(e.description):"";const t=n.a.get("/api/actualites?page=".concat(e.page,"&description").concat(a,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return e=>(e({type:i}),t.then(a=>e({type:u,payload:a.data})))}function g(e,a){return t=>{return n.a.delete("/api/actualites/".concat(e.id)).then(e=>Promise.all([t({type:l}),t(Object(r.B)({message:"Actualite bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>t(p(a))))}}function f(e,a,t){let i={isActive:a};return(l,c)=>{return n.a.put("/api/actualites/".concat(e.id),i).then(e=>Promise.all([l({type:o}),l(Object(r.B)({message:a?"Cette actualit\xe9 est publi\xe9e aux publics":"Cette actualit\xe9 est priv\xe9e",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>l(p(t))))}}function E(e){return{type:c,parametres:e}}var h=t(39),b=t(10);const A="[ACTUALITE APP] REQUEST ACTUALITE",T="[ACTUALITE APP] GET ACTUALITE",v="[ACTUALITE APP] REQUEST SAVE",y="[ACTUALITE APP] SAVE ACTUALITE",I="[ACTUALITE APP] SAVE ERROR",P="[ACTUALITE APP] UPLOAD ATTACHEMENT",C="[ACTUALITE APP] UPLOAD REQUEST",L="[ACTUALITE APP] UPLOAD ERROR",w="[ACTUALITE APP] REQUEST DELETE",S="[ACTUALITE APP] DELETE SUCCESS";function U(e){const a=n.a.get("/api/actualites?slug=".concat(e));return e=>(e({type:A}),a.then(a=>{e({type:T,payload:a.data["hydra:member"]})}).catch(a=>{e({type:I,payload:h.y.parseApiErrors(a)})}))}function x(e){e.image&&(e.image=e.image["@id"]);const a=n.a.post("/api/actualites",e);return e=>(e({type:v}),a.then(a=>(e(Object(r.B)({message:"Actualit\xe9 enregistr\xe9 avec succ\xe8s"})),e({type:y,payload:a.data}))).catch(a=>{e({type:I,payload:h.y.parseApiErrors(a)})}))}function O(e,a){e.image&&(e.image=e.image["@id"]);const t=n.a.put("/api/actualites/".concat(a),e);return e=>(e({type:v}),t.then(a=>(e(Object(r.B)({message:"Actualit\xe9 modifi\xe9 avec succ\xe8s"})),e({type:y,payload:a.data}))).catch(a=>{e({type:I,payload:h.y.parseApiErrors(a)})}))}function R(e){return(a,t)=>{const i=new FormData;i.append("file",e);const l=n.a.post("/api/actualite_images",i,{headers:{"Content-Type":"multipart/form-data"}});return a({type:C}),l.then(e=>Promise.all([e,a({type:P,payload:e.data}),a(Object(r.B)({message:"Document t\xe9l\xe9charg\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])).catch(e=>{a({type:L}),a(Object(r.B)({message:b.a.map(h.y.parseApiErrors(e),function(e,a){return a+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function j(){return{type:T,payload:{titre:"",description:"",source:"",image:null}}}t.d(a,"g",function(){return i}),t.d(a,"m",function(){return c}),t.d(a,"a",function(){return s}),t.d(a,"d",function(){return u}),t.d(a,"l",function(){return d}),t.d(a,"q",function(){return m}),t.d(a,"s",function(){return p}),t.d(a,"v",function(){return g}),t.d(a,"e",function(){return f}),t.d(a,"x",function(){return E}),t.d(a,"f",function(){return A}),t.d(a,"c",function(){return T}),t.d(a,"i",function(){return v}),t.d(a,"j",function(){return y}),t.d(a,"k",function(){return I}),t.d(a,"n",function(){return P}),t.d(a,"p",function(){return C}),t.d(a,"o",function(){return L}),t.d(a,"h",function(){return w}),t.d(a,"b",function(){return S}),t.d(a,"r",function(){return U}),t.d(a,"w",function(){return x}),t.d(a,"u",function(){return O}),t.d(a,"y",function(){return R}),t.d(a,"t",function(){return j})},1321:function(e,a){var t;(t=window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})).fr=Object.assign(t.fr||{},{a:"Envoi du fichier \xe9chou\xe9 :",b:"Barre d'outils des images",c:"Barre d'outils des tableaux",d:"Italique",e:"Choisir l'en-t\xeate",f:"En-t\xeate",g:"Ins\xe9rer une image ou un fichier",h:"Citation",i:"Objet image",j:"Ins\xe9rer une image",k:"Augmenter le retrait",l:"Diminuer le retrait",m:"Ins\xe9rer un tableau",n:"Colonne d'ent\xeate",o:"Ins\xe9rer une colonne \xe0 gauche",p:"Ins\xe9rer une colonne \xe0 droite",q:"Supprimer la colonne",r:"Colonne",s:"Ligne d'ent\xeate",t:"Ins\xe9rer une ligne en-dessous",u:"Ins\xe9rer une ligne au-dessus",v:"Supprimer la ligne",w:"Ligne",x:"Fusionner la cellule au-dessus",y:"Fusionner la cellule \xe0 droite",z:"Fusionner la cellule en-dessous",aa:"Fusionner la cellule \xe0 gauche",ab:"Scinder la cellule verticalement",ac:"Scinder la cellule horizontalement",ad:"Fusionner les cellules",ae:"Liste num\xe9rot\xe9e",af:"Liste \xe0 puces",ag:"Gras",ah:"Image taille r\xe9elle",ai:"Image lat\xe9rale",aj:"Image align\xe9e \xe0 gauche",ak:"Image centr\xe9e",al:"Image align\xe9e \xe0 droite",am:"Saisir la l\xe9gende de l\u2019image",an:"\xc9chec de l'envoi",ao:"Ins\xe9rer un m\xe9dia",ap:"L'URL ne doit pas \xeatre vide.",aq:"Cette URL de m\xe9dia n'est pas support\xe9e.",ar:"widget m\xe9dia",as:"Lien",at:"Impossible d'obtenir l'image redimensionn\xe9e",au:"La s\xe9lection de l'image redimensionn\xe9e a \xe9chou\xe9.",av:"Impossible d'ins\xe9rer l'image \xe0 la position courante.",aw:"L'insertion d'image a \xe9chou\xe9.",ax:"Barre d'outils du widget",ay:"T\xe9l\xe9chargement en cours",az:"Ouvrir dans un nouvel onglet",ba:"Fichier t\xe9l\xe9chargeable",bb:"Supprimer le lien",bc:"Modifier le lien",bd:"Ouvrir le lien dans un nouvel onglet",be:"Ce lien n'a pas d'URL",bf:"Enregistrer",bg:"Annuler",bh:"Coller l'URL du m\xe9dia",bi:"Astuce : Copier l'URL du m\xe9dia dans le contenu pour l'ins\xe9rer plus rapidement",bj:"URL de m\xe9dia",bk:"URL du lien",bl:"\xc9diteur de texte enrichi",bm:"Barre d'outils dans un menu d\xe9roulant",bn:"%0 sur %1",bo:"Pr\xe9cedent",bp:"Suivant",bq:"Barre d'outils de l'\xe9diteur",br:"Montrer plus d'\xe9l\xe9ments",bs:"Annuler",bt:"Restaurer",bu:"\xc9diteur de texte enrichi, %0",bv:"Changer le texte alternatif \xe0 l\u2019image",bw:"Paragraphe",bx:"Titre 1",by:"Titre 2",bz:"Titre 3",ca:"Titre 4",cb:"Titre 5",cc:"Titre 6",cd:"Texte alternatif"})},1357:function(e,a,t){"use strict";var r=t(43),n=t(1270),i=t(102);const l={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,description:"",filter:{id:"created",direction:"desc"}}};var o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case n.a:return{...e,data:[]};case n.g:return{...e,loading:!0};case n.d:return{...e,data:a.payload["hydra:member"],pageCount:i.a.hydraPageCount(a.payload),loading:!1};case n.l:return{...e,searchText:a.searchText};case n.m:return{...e,parametres:{page:a.parametres.page,description:a.parametres.description,filter:{id:a.parametres.filter.id,direction:a.parametres.filter.direction}}};default:return e}};const c={data:null,error:null,loading:!1,success:!1,imageReqInProgress:!1,deleteReqInProgress:!1,image:null,image_deleted:null};var s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case n.f:case n.i:return{...e,loading:!0};case n.p:return{...e,imageReqInProgress:!0};case n.h:return{...e,deleteReqInProgress:!0};case n.n:return{...e,image:a.payload,imageReqInProgress:!1};case n.b:return{...e,deleteReqInProgress:!1,image_deleted:a.id};case n.o:return{...e,imageReqInProgress:!1};case n.c:return{...e,data:a.payload[0]?a.payload[0]:a.payload,loading:!1};case n.j:return{...e,loading:!1,success:!0};case n.k:return{...e,error:a.payload,loading:!1,success:!1};default:return e}};const u=Object(r.d)({actualites:o,actualite:s});a.a=u},1509:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),i=t(89),l=t(1204),o=t(1224),c=t(1236),s=t(1219),u=t(1227),d=t(1233),m=t(1157),p=t(39),g=t(137),f=t(16),E=t(2),h=t(10),b=t(7),A=t(136),T=t(1270),v=t(1357),y=t(51),I=t.n(y),P=t(1242),C=t.n(P),L=t(1319),w=t.n(L),S=t(1320),U=t.n(S);t(1321);const x=Object(m.a)(e=>({root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},buttonProgress:{color:C.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));a.default=Object(A.a)("actualiteApp",v.a)(function(e){const a=Object(b.b)(),t=Object(b.c)(e=>{let{actualiteApp:a}=e;return a.actualite}),[m,A]=Object(r.useState)(!1),v=Object(r.useRef)(null),{form:y,handleChange:P,setForm:C}=Object(g.b)(null),L=x(e),[S,O]=Object(r.useState)(0);function R(){A(!1)}return Object(r.useEffect)(()=>{!function(){const t=e.match.params,{actualiteId:r}=t;a("new"===r?T.t():T.r(r))}()},[a,e.match.params]),Object(r.useEffect)(()=>{t.image&&(C(h.a.set({...y},"image",t.image)),t.image=null)},[y,C,t.image]),Object(r.useEffect)(()=>{t.error&&(t.error.titre||t.error.source)&&(v.current.updateInputsWithError({...t.error}),R(),t.error=null)},[t.error]),Object(r.useEffect)(()=>{t.success&&(t.success=!1,t.data=null,t.error=null,t.image_deleted=null,e.history.push("/admin/actualites"))},[t.success]),Object(r.useEffect)(()=>{(t.data&&!y||t.data&&y&&t.data.id!==y.id)&&C({...t.data})},[y,t.data,C]),n.a.createElement(p.o,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:t.loading?"":y&&n.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},n.a.createElement("div",{className:"flex flex-col items-start max-w-full"},n.a.createElement(p.d,{animation:"transition.slideRightIn",delay:300},n.a.createElement(i.a,{className:"normal-case flex items-center sm:mb-12",component:f.a,role:"button",to:"/admin/actualites",color:"inherit"},n.a.createElement(l.a,{className:"mr-4 text-20"},"arrow_back"),"Retour")),n.a.createElement("div",{className:"flex items-center max-w-full"},n.a.createElement("div",{className:"flex flex-col min-w-0"},n.a.createElement(p.d,{animation:"transition.slideLeftIn",delay:300},n.a.createElement(i.a,{className:"text-16 sm:text-20 truncate"},y.titre?y.titre:"Nouvelle Actualit\xe9")),n.a.createElement(p.d,{animation:"transition.slideLeftIn",delay:300},n.a.createElement(i.a,{variant:"caption"},"D\xe9tails de l'actualit\xe9"," ")))))),contentToolbar:t.loading?n.a.createElement("div",{className:L.root},n.a.createElement(o.a,{color:"secondary"})):n.a.createElement(c.a,{value:S,onChange:function(e,a){O(a)},indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},n.a.createElement(s.a,{className:"h-64 normal-case",label:"Infos g\xe9n\xe9rales"}),n.a.createElement(s.a,{className:"h-64 normal-case",label:"Image"})),content:t.loading?"":y&&n.a.createElement("div",{className:"p-10  sm:p-24 max-w-2xl"},0===S&&n.a.createElement(I.a,{onValidSubmit:function(t){const r=e.match.params,{actualiteId:n}=r;a("new"===n?T.w(y):T.u(y,y.id))},onValid:function(){A(!0)},onInvalid:R,ref:v,className:"flex flex-col "},n.a.createElement("div",{className:"flex pt-10 "},n.a.createElement(p.F,{className:"mb-16",label:"Titre",autoFocus:!0,id:"titre",name:"titre",value:y.titre,onChange:P,variant:"outlined",validations:{minLength:6},validationErrors:{minLength:"La longueur minimale des caract\xe8res est de 6"},required:!0,fullWidth:!0})),n.a.createElement("div",{className:"flex"},n.a.createElement(p.F,{className:"mb-16 mt-16  w-full",type:"text",name:"apercu",value:y.apercu,onChange:P,label:"Aper\xe7u",validations:{minLength:20},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 20"},required:!0,variant:"outlined",multiline:!0,rows:"2"})),n.a.createElement("div",{className:"flex"},n.a.createElement(p.F,{className:"mb-16",type:"text",name:"source",value:y.source,onChange:P,autoComplete:"website",label:"Source",validations:"isUrl",validationErrors:{isUrl:"Exemple : http://www.exemple.com"},variant:"outlined",required:!0,fullWidth:!0})),n.a.createElement(w.a,{editor:U.a,data:y.description,config:{language:"fr",ckfinder:{uploadUrl:"http://localhost:8080/ProjectlesHA/public/ckfinder/connector?command=QuickUpload&CKEditor=editor1&type=Images&responseType=json"}},onInit:e=>{console.log("Editor is ready to use!",e)},onChange:(e,a)=>{const t=a.getData();C(h.a.set({...y},"description",t))},onBlur:e=>{console.log("Blur.",e)}}),t.error&&t.error.description?n.a.createElement("span",{className:"text-red"}," ",t.error.description):"",n.a.createElement(u.a,{type:"submit",variant:"contained",color:"primary",className:"w-200 pr-auto mt-16 normal-case","aria-label":"Suivant",disabled:!m||t.loading||!y.description||!y.image,value:"legacy"},"Sauvegarder",t.loading&&n.a.createElement(d.a,{size:24,className:L.buttonProgress}))),1===S&&n.a.createElement("div",null,n.a.createElement("input",{accept:"image/jpeg,image/gif,image/png",className:"hidden",id:"button-file",type:"file",disabled:t.imageReqInProgress,onChange:function(e){const t=e.target.files[0];t&&a(T.y(t))}}),n.a.createElement("div",{className:"flex justify-center sm:justify-start flex-wrap"},n.a.createElement("label",{htmlFor:"button-file",className:Object(E.a)(L.imageImageUpload,"flex items-center justify-center relative w-128 h-128 rounded-4 mr-16 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5")},t.imageReqInProgress?n.a.createElement(d.a,{size:24,className:L.buttonProgress}):n.a.createElement(l.a,{fontSize:"large",color:"action"},"arrow_upward")),y.image?n.a.createElement("div",{className:Object(E.a)(L.imageImageItem,"flex items-center cursor-pointer justify-center relative w-128 h-128 rounded-4 mr-16 mb-16 overflow-hidden  shadow-1 hover:shadow-5"),onClick:y.image?()=>window.open(p.G+y.image.url,"_blank"):""},n.a.createElement("img",{className:"max-w-none w-auto h-full",src:p.G+y.image.url,alt:y.titre})):""))),innerScroll:!0})})}}]);