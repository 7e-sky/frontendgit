(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{1051:function(e,a,t){"use strict";var n=t(3),r=t.n(n),l=t(4),i=t.n(l),o=t(0),s=t.n(o),c=(t(1),t(2)),u=t(7),m=t(98),d=s.a.forwardRef(function(e,a){var t=e.children,n=e.classes,l=e.className,o=e.disableTypography,u=void 0!==o&&o,d=i()(e,["children","classes","className","disableTypography"]);return s.a.createElement("div",r()({className:Object(c.a)(n.root,l),ref:a},d),u?t:s.a.createElement(m.a,{variant:"h6"},t))});a.a=Object(u.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(d)},1052:function(e,a,t){"use strict";var n=t(3),r=t.n(n),l=t(0),i=t.n(l),o=(t(1),t(7)),s=t(98),c=i.a.forwardRef(function(e,a){return i.a.createElement(s.a,r()({component:"p",variant:"body1",color:"textSecondary",ref:a},e))});a.a=Object(o.a)({root:{marginBottom:16}},{name:"MuiDialogContentText"})(c)},1359:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(40),i=t(6),o=t(140),s=t(23),c=t(98),u=t(945),m=t(1035),d=t(958),p=t(1013),f=t(1051),E=t(1037),h=t(1052),g=t(1038),v=t(1029),b=t(347),y=t(8),O=t(54),N=t(107),j=t(36),P=t(10),x="[PAYS APP] GET PAYS",A="[ZONES APP] GET ZONES",w="[ZONES APP] SET SEARCH TEXT",S="[ZONES APP] OPEN NEW ZONES DIALOG",C="[ZONES APP] CLOSE NEW ZONES DIALOG",z="[ZONES APP] OPEN EDIT ZONES DIALOG",T="[ZONES APP] CLOSE EDIT ZONES DIALOG",D="[ZONES APP] ADD ZONE",L="[ZONES APP] SAVE ERROR",Z="[ZONES APP] REMOVE ZONE",I="[ZONES APP] STATUT ZONE",k="[ZONES APP] UPLOAD IMAGE",F="[ZONES APP] UPLOAD REQUEST",R="[ZONES APP] UPLOAD ERROR",W="[ZONES APP] REQUEST SAVE",q="[ZONES APP] REQUEST_ZONE";function M(){var e=O.a.get("/api/zone_commercials");return function(a){return a({type:q}),e.then(function(e){a({type:A,payload:e.data["hydra:member"]})})}}function H(){return{type:C}}function G(){return{type:T}}function B(e){var a={del:!0,username:e.username+"_deleted-"+e.id,email:e.email+"_deleted-"+e.id};return function(t,n){return O.a.put(e["@id"],a).then(function(e){return Promise.all([t({type:Z}),t(Object(j.B)({message:"Admin commercials bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return t(M())})})}}function U(e,a){var t={isactif:a};return function(a,n){return O.a.put(e["@id"],t).then(function(e){return Promise.all([a({type:I}),a(Object(j.B)({message:"Statut modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return a(M())})})}}var V="[DIALOG] OPEN",_="[DIALOG] CLOSE";function Y(){return{type:_}}function Q(e){return{type:V,options:e}}var J=t(64),X=t.n(J),K=t(7);var $=function(e){var a=Object(i.b)(),t=Object(i.c)(function(e){return e.zonesApp.zones.entities}),o=Object(i.c)(function(e){return e.zonesApp.zones.loadingZone}),y=Object(i.c)(function(e){return e.zonesApp.zones.searchText}),O=Object(n.useState)(null),N=Object(s.a)(O,2),j=N[0],x=N[1],A=Object(K.a)(function(e){return{tooltip:{maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid #dadde9","& b":{fontWeight:e.typography.fontWeightMedium}}}})(v.a);return Object(n.useEffect)(function(){t&&x(function(e,a){var t=Object.keys(e).map(function(a){return e[a]});return 0===a.length?t:l.y.filterArrayByString(t,a)}(t,y))},[t,y]),j?0===j.length?r.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},r.a.createElement(c.a,{color:"textSecondary",variant:"h5"},"Il n'y a pas d'Admins commerciaux!")):r.a.createElement(l.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(b.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(e,t,n){return{className:"cursor-pointer",onClick:function(e,n){var r;t&&a((r=t.original,{type:z,data:r}))}}},data:j,columns:[{Header:"",Cell:function(e){return e.original.avatar?r.a.createElement(u.a,{className:"mr-8",alt:e.original.firstName,src:l.G+e.original.avatar.url}):r.a.createElement(u.a,{className:"mr-8",alt:e.original.firstName,src:"assets/images/avatars/images.png"})},className:"justify-center",width:64,sortable:!1},{Header:"Nom",accessor:"lastName",filterable:!0},{Header:"Pr\xe9nom",accessor:"firstName",filterable:!0},{Header:"Email",accessor:"email",filterable:!0},{Header:"T\xe9l\xe9phone",accessor:"phone",filterable:!0},{Header:"Date de cr\xe9ation",Cell:function(e){return X()(e.original.created).format("DD/MM/YYYY HH:mm")}},{Header:"Nbr.Pays",className:"font-bold",Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(A,{title:r.a.createElement(r.a.Fragment,null,0===Object.keys(e.original.pays).length?"Il n'y aucun pays":r.a.createElement("ul",null,P.a.map(e.original.pays,function(e,a){return r.a.createElement("li",{key:a}," ",e.name," ")})))},r.a.createElement(m.a,{onClick:function(e){e.stopPropagation()}},Object.keys(e.original.pays).length)))}},{Header:"Statut",Cell:function(e){return e.original.isactif?r.a.createElement(v.a,{title:"Activ\xe9"},r.a.createElement(d.a,{className:"text-green text-20",onClick:function(t){t.stopPropagation(),a(U(e.original,!1))}},r.a.createElement(p.a,null,"check_circle"))):r.a.createElement(v.a,{title:"D\xe9sactiv\xe9"},r.a.createElement(d.a,{className:"text-red text-20",onClick:function(t){t.stopPropagation(),a(U(e.original,!0))}},r.a.createElement(p.a,null,"remove_circle")))}},{Header:"",width:64,Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(d.a,{className:"text-red text-20",onClick:function(t){t.stopPropagation(),a(Q({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(E.a,null,r.a.createElement(h.a,{id:"alert-dialog-description"},"Voulez vous vraiment supprimer cet enregistrement ?")),r.a.createElement(g.a,null,r.a.createElement(m.a,{onClick:function(){return a(Y())},color:"primary"},"Non"),r.a.createElement(m.a,{onClick:function(t){a(B(e.original)),a(Y())},color:"primary",autoFocus:!0},"Oui")))}))}},r.a.createElement(p.a,null,"delete")))}}],loading:o,defaultPageSize:10,noDataText:"Aucun admin commercial trouv\xe9",loadingText:"Chargement...",ofText:"sur"})):null},ee=t(139),ae=t(957),te=t(1014);var ne=function(e){var a=Object(i.b)(),t=Object(i.c)(function(e){return e.zonesApp.zones.searchText}),n=Object(i.c)(function(e){return e.fuse.settings.mainTheme});return r.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(l.d,{animation:"transition.expandIn",delay:300},r.a.createElement(p.a,{className:"text-32 mr-0 sm:mr-12"},"group")),r.a.createElement(l.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(c.a,{className:"hidden sm:flex",variant:"h6"},"Gestion des Admins commerciaux"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},r.a.createElement(te.a,{theme:n},r.a.createElement(l.d,{animation:"transition.slideDownIn",delay:300},r.a.createElement(ee.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},r.a.createElement(p.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(ae.a,{placeholder:"Rechercher...",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:t,inputProps:{"aria-label":"Search"},onChange:function(e){return a({type:w,searchText:e.target.value})}}))))),r.a.createElement(l.d,{animation:"transition.slideRightIn",delay:300},r.a.createElement(m.a,{onClick:function(e){return a({type:S})},className:"whitespace-no-wrap",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Ajouter nouvel Ad.C"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},re=t(1031),le=t(1026),ie=t(1036),oe=t(1041),se=t(1039),ce=t(141),ue=t(197),me=t(55),de=t.n(me),pe=t(350),fe=t(351),Ee=t.n(fe),he=t(352),ge=t.n(he),ve={firstName:"",lastName:"",adresse1:"",adresse2:"",codepostal:null,phone:"",email:"",pays:null};var be=function(e){var a=Object(i.b)(),t=Object(i.c)(function(e){return e.zonesApp.zones.zonesDialog}),o=Object(i.c)(function(e){return e.zonesApp.zones}),v=Object(i.c)(function(e){return e.zonesApp.zones.pays}),b=Object(i.c)(function(e){return e.zonesApp.zones.imageReqInProgress}),x=Object(i.c)(function(e){return e.zonesApp.zones.avatar}),A=Object(ce.b)(ve),w=A.form,S=A.handleChange,C=A.setForm,z=Object(n.useState)(!1),T=Object(s.a)(z,2),Z=T[0],I=T[1],q=Object(n.useRef)(null),U=Object(n.useState)({showPassword:!1}),V=Object(s.a)(U,2),_=V[0],J=V[1],X=function(){J(Object(y.a)({},_,{showPassword:!_.showPassword}))},K=function(e){e.preventDefault()},$=Object(n.useCallback)(function(){if("edit"===t.type&&t.data){var e=t.data.pays.map(function(e){return{value:e["@id"],label:e.name}});C(Object(y.a)({},t.data)),C(P.a.set(Object(y.a)({},t.data),"pays",e))}"new"===t.type&&C(Object(y.a)({},ve,t.data))},[t.data,t.type,C]);function ee(){"edit"===t.type?a(G()):a(H())}function ae(){a(B(w)),a(Y()),ee()}function te(){I(!1)}return Object(n.useEffect)(function(){o.error&&(o.error.firstName||o.error.lastName||o.error.adresse1||o.error.adresse2||o.error.codepostal||o.error.phone||o.error.email||o.error.pays)&&(q.current.updateInputsWithError(Object(y.a)({},o.error)),te(),o.error=null)},[o.error]),Object(n.useEffect)(function(){t.props.open&&$()},[t.props.open,$]),Object(n.useEffect)(function(){C(x?P.a.set(Object(y.a)({},w),"avatar",x):P.a.set(Object(y.a)({},w),"avatar",null))},[x]),r.a.createElement(re.a,Object.assign({classes:{paper:"m-24"}},t.props,{onClose:ee,fullWidth:!0,maxWidth:"xs"}),r.a.createElement(le.a,{position:"static",elevation:1},r.a.createElement(ie.a,{className:"flex w-full"},r.a.createElement(c.a,{variant:"subtitle1",color:"inherit"},"new"===t.type?"Nouvelle Zone":"Editer Zone")),r.a.createElement("div",{className:"flex flex-col items-center justify-center pb-24"},b?r.a.createElement(u.a,{className:""},r.a.createElement(oe.a,{size:24})):r.a.createElement(u.a,{className:"w-96 h-96",alt:"contact avatar",src:w.avatar?ue.d+w.avatar.url:"assets/images/avatars/images.png"}),"edit"===t.type&&r.a.createElement(c.a,{variant:"h6",color:"inherit",className:"pt-8"},w.firstName,"\u2002",w.lastName))),r.a.createElement(de.a,{onValidSubmit:function(e){w.codepostal=P.a.parseInt(w.codepostal),"new"===t.type?a(function(e){var a=null,t=null;e.pays&&(a=e.pays.map(function(e){return e.value})),e.avatar&&e.avatar.url&&(t=e.avatar["@id"]);var n=Object(y.a)({},e,{pays:a,avatar:t});return function(e){return e({type:W}),O.a.post("/api/zone_commercials",n).then(function(a){return Promise.all([e({type:D}),e(Object(j.B)({message:"Admin commercials bien ajout\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"})),e(H())]).then(function(){return e(M())})}).catch(function(a){e({type:L,payload:N.a.parseApiErrors(a)})})}}(w)):a(function(e){var a=null,t=null;e.pays&&(a=e.pays.map(function(e){return e.value})),e.avatar&&e.avatar.url&&(t=e.avatar["@id"]);var n=Object(y.a)({},e,{pays:a,avatar:t});return function(a){return a({type:W}),O.a.put(e["@id"],n).then(function(e){return Promise.all([a({type:D}),a(Object(j.B)({message:"Admin commercials bien modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"})),a(G())]).then(function(){return a(M())})}).catch(function(e){a({type:L,payload:N.a.parseApiErrors(e)})})}}(w))},onValid:function(){I(!0)},onInvalid:te,ref:q,className:"flex flex-col overflow-hidden"},r.a.createElement(E.a,{classes:{root:"p-24"}},r.a.createElement("div",{className:"flex"},r.a.createElement(l.F,{className:"mb-24",label:"Nom",autoFocus:!0,id:"lastName",name:"lastName",value:w.lastName,onChange:S,variant:"outlined",validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},required:!0,fullWidth:!0})),r.a.createElement("div",{className:"flex"},r.a.createElement(l.F,{className:"mb-24",label:"Pr\xe9nom",id:"firstName",name:"firstName",value:w.firstName,onChange:S,variant:"outlined",validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},required:!0,fullWidth:!0})),r.a.createElement("div",{className:"flex"},r.a.createElement(l.F,{className:"mb-24",label:"Adresse 1",id:"adresse1",name:"adresse1",value:w.adresse1,onChange:S,variant:"outlined",validations:{minLength:6},validationErrors:{minLength:"La longueur minimale des caract\xe8res est de 6"},required:!0,fullWidth:!0})),r.a.createElement("div",{className:"flex"},r.a.createElement(l.F,{className:"mb-24",label:"Adresse 2",id:"adresse2",name:"adresse2",value:w.adresse2,onChange:S,variant:"outlined",validations:{minLength:4},validationErrors:{minLength:"La longueur minimale des caract\xe8res est de 6"},fullWidth:!0})),r.a.createElement("div",{className:"flex"},r.a.createElement(l.F,{className:"mb-24",label:"Code postal",id:"codepostal",type:"number",name:"codepostal",value:P.a.toString(w.codepostal),onChange:S,variant:"outlined",validations:{minLength:4,isNumeric:!0},validationErrors:{minLength:"Min character length is 4",isNumeric:"Numeric value required"},required:!0,fullWidth:!0})),r.a.createElement("div",{className:"flex"},r.a.createElement(l.F,{className:"mb-24",label:"T\xe9l\xe9phone",id:"phone",name:"phone",value:w.phone,onChange:S,variant:"outlined",validations:{minLength:10,isNumeric:!0},validationErrors:{minLength:"Min character length is 10",isNumeric:"Numeric value required"},required:!0,fullWidth:!0})),r.a.createElement("div",{className:"flex"},r.a.createElement(l.F,{className:"mb-24",label:"E-mail",id:"email",name:"email",value:w.email,onChange:S,variant:"outlined",validations:"isEmail",validationErrors:{isEmail:"This is not a valid email"},required:!0,fullWidth:!0})),"new"===t.type?r.a.createElement("div",null,r.a.createElement("div",{className:"flex"},r.a.createElement(l.F,{className:"mb-24",type:_.showPassword?"text":"password",name:"password",label:"Mot de passe",onChange:S,validations:{minLength:6},validationErrors:{minLength:"La longueur minimale des caract\xe8res est de 6"},InputProps:{endAdornment:r.a.createElement(se.a,{position:"end"},r.a.createElement(d.a,{"aria-label":"toggle password visibility",onClick:X,onMouseDown:K},_.showPassword?r.a.createElement(Ee.a,null):r.a.createElement(ge.a,null)))},variant:"outlined",required:!0,fullWidth:!0})),r.a.createElement("div",{className:"flex"},r.a.createElement(l.F,{className:"mb-24",id:"confirmpassword",type:_.showPassword?"text":"password",name:"confirmpassword",label:"Confirmer mot de passe",validations:"equalsField:password",onChange:S,validationErrors:{equalsField:"Passwords not identique"},InputProps:{endAdornment:r.a.createElement(se.a,{position:"end"},r.a.createElement(d.a,{"aria-label":"toggle password visibility",onClick:X,onMouseDown:K},_.showPassword?r.a.createElement(Ee.a,null):r.a.createElement(ge.a,null)))},variant:"outlined",fullWidth:!0}))):"",r.a.createElement("div",{className:"flex"},r.a.createElement(pe.a,{id:"pays",name:"pays",className:"MuiFormControl-fullWidth MuiTextField-root mb-24",value:w.pays,onChange:function(e){return function(e,a){C(P.a.set(Object(y.a)({},w),a,e))}(e,"pays")},placeholder:"S\xe9lectionner multiple pays",textFieldProps:{label:"Pays",InputLabelProps:{shrink:!0},variant:"outlined"},options:v,fullWidth:!0,isMulti:!0,required:!0})),r.a.createElement("div",{className:"flex"},r.a.createElement("input",{accept:"image/*",id:"button-file",type:"file",onChange:function(e){var t=e.target.files[0];t&&a(function(e){return function(a,t){var n=new FormData;n.append("file",e);var r=O.a.post("/api/avatars",n,{headers:{"Content-Type":"multipart/form-data"}});return a({type:F}),r.then(function(e){return Promise.all([e,a({type:k,payload:e.data}),a(Object(j.B)({message:"Image uploaded!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])}).catch(function(e){a({type:R}),a(Object(j.B)({message:P.a.map(N.a.parseApiErrors(e),function(e,a){return a+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}(t))}}))),"new"===t.type?r.a.createElement(g.a,{className:"justify-between pl-16"},r.a.createElement(m.a,{variant:"contained",color:"primary",type:"submit",disabled:!Z||o.loading||b},"Ajouter",o.loading&&r.a.createElement(oe.a,{size:24}))):r.a.createElement(g.a,{className:"justify-between pl-16"},r.a.createElement(m.a,{variant:"contained",color:"primary",type:"submit",disabled:!Z||o.loading||b},"Modifier",o.loading&&r.a.createElement(oe.a,{size:24})),r.a.createElement(d.a,{onClick:function(){return a(Q({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(E.a,null,r.a.createElement(h.a,{id:"alert-dialog-description"},"Voulez vous vraiment supprimer cet enregistrement ?")),r.a.createElement(g.a,null,r.a.createElement(m.a,{onClick:function(){return a(Y())},color:"primary"},"Non"),r.a.createElement(m.a,{onClick:ae,color:"primary",autoFocus:!0},"Oui")))}))}},r.a.createElement(p.a,null,"delete")))))},ye=t(46),Oe={entities:null,error:null,loadingZone:!1,loading:!1,searchText:"",selectedZonesIds:[],routeParams:{},zonesDialog:{type:"new",props:{open:!1},data:null},avatar:null,pays:null,imageReqInProgress:!1},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case q:return Object(y.a)({},e,{loadingZone:!0});case W:return Object(y.a)({},e,{loading:!0});case D:return Object(y.a)({},e,{loading:!1,error:null});case x:return Object(y.a)({},e,{executed:!1,message:null,pays:P.a.keyBy(a.payload,"id")});case A:return Object(y.a)({},e,{entities:a.payload,loadingZone:!1});case w:return Object(y.a)({},e,{searchText:a.searchText});case S:return Object(y.a)({},e,{zonesDialog:{type:"new",props:{open:!0},data:null}});case C:return Object(y.a)({},e,{zonesDialog:{type:"new",props:{open:!1},data:null}});case z:return Object(y.a)({},e,{zonesDialog:{type:"edit",props:{open:!0},data:a.data}});case T:return Object(y.a)({},e,{zonesDialog:{type:"edit",props:{open:!1},data:null}});case F:return Object(y.a)({},e,{imageReqInProgress:!0});case k:return Object(y.a)({},e,{avatar:a.payload,imageReqInProgress:!1});case R:return Object(y.a)({},e,{imageReqInProgress:!1});case L:return Object(y.a)({},e,{error:a.payload,loading:!1});default:return e}},je={state:!1,options:{children:"Hi"}},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case j.f:return Object(y.a)({},e,{state:!0,options:Object(y.a)({},e.options,a.options)});case j.a:return Object(y.a)({},e,{state:!1});default:return e}},xe=Object(ye.d)({zones:Ne,dialog:Pe});a.default=Object(o.a)("zonesApp",xe)(function(e){var a=Object(i.b)(),t=Object(n.useRef)(null);return Object(n.useEffect)(function(){a(M()),a(function(){var e=O.a.get("/api/pays?pagination=false&props[]=id&props[]=name");return function(a){return e.then(function(e){a({type:x,payload:e.data["hydra:member"]})})}}())},[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.p,{classes:{contentWrapper:"p-0 sm:p-24 pb-80 sm:pb-80 h-full",content:"flex flex-col h-full",leftSidebar:"w-256 border-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(ne,{pageLayout:t}),content:r.a.createElement($,null),sidebarInner:!0,ref:t,innerScroll:!0}),r.a.createElement(be,null))})}}]);