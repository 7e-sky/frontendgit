(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1051:function(e,t,n){"use strict";var a=n(3),r=n.n(a),c=n(4),i=n.n(c),o=n(0),u=n.n(o),l=(n(1),n(2)),s=n(7),d=n(98),f=u.a.forwardRef(function(e,t){var n=e.children,a=e.classes,c=e.className,o=e.disableTypography,s=void 0!==o&&o,f=i()(e,["children","classes","className","disableTypography"]);return u.a.createElement("div",r()({className:Object(l.a)(a.root,c),ref:t},f),s?n:u.a.createElement(d.a,{variant:"h6"},n))});t.a=Object(s.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(f)},1052:function(e,t,n){"use strict";var a=n(3),r=n.n(a),c=n(0),i=n.n(c),o=(n(1),n(7)),u=n(98),l=i.a.forwardRef(function(e,t){return i.a.createElement(u.a,r()({component:"p",variant:"body1",color:"textSecondary",ref:t},e))});t.a=Object(o.a)({root:{marginBottom:16}},{name:"MuiDialogContentText"})(l)},1084:function(e,t,n){"use strict";var a=n(36),r=n(54),c=n(196),i="[CONTACTS FOURNISSEUR APP] REQUEST CONTACTS",o="[CONTACTS FOURNISSEUR APP] REMOVE CONTACTS",u="[CONTACTS FOURNISSEUR APP] SET PARAMETRES DATA",l="[CONTACTS FOURNISSEUR APP] GET CONTACTS",s="[CONTACTS FOURNISSEUR APP] SET CONTACTS SEARCH TEXT";function d(e){var t="";e.search.length>0&&e.search.map(function(e){return e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value)});var n=r.a.get("/api/contact_fournisseurs?page=".concat(e.page).concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:i}),n.then(function(t){return e({type:l,payload:t.data})})}}function f(e,t){var n={del:!0};return function(u,l){var s=r.a.put("/api/contact_fournisseurs/".concat(e.id),n);return u({type:i}),s.then(function(e){return Promise.all([u({type:o}),u(c.b("message-fournisseur")),u(Object(a.B)({message:"Message bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return u(d(t))})})}}function p(e){return{type:u,parametres:e}}var m=n(40),g="[CONTACT FOURNISSEUR APP] REQUEST CONTACT",h="[CONTACT FOURNISSEUR APP] GET CONTACT",E="[CONTACT FOURNISSEUR APP] REQUEST SAVE",O="[CONTACT FOURNISSEUR APP] SAVE ERROR",b="[CONTACT FOURNISSEUR APP] CLEAN_ERROR",C="[CONTACT FOURNISSEUR APP] CLEAN_UP";function v(){return function(e){return e({type:b})}}function T(e){var t=r.a.get("/api/contact_fournisseurs/".concat(e));return function(e){return e({type:g}),t.then(function(t){e({type:h,payload:t.data})}).catch(function(t){e({type:O,payload:m.y.parseApiErrors(t)})})}}function S(e,t,n){var i=r.a.put("/api/contact_fournisseurs/".concat(t),e);return function(e){return e({type:E}),i.then(function(t){e(c.b("message-fournisseur")),e(Object(a.B)({message:"Message Modifi\xe9"})),n.push("/contact_fournisseur")}).catch(function(t){e({type:O,payload:m.y.parseApiErrors(t)})})}}var N="[DIALOG] OPEN",A="[DIALOG] CLOSE";function y(){return{type:A}}function j(e){return{type:N,options:e}}n.d(t,"f",function(){return i}),n.d(t,"j",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"i",function(){return s}),n.d(t,"n",function(){return d}),n.d(t,"q",function(){return f}),n.d(t,"r",function(){return p}),n.d(t,"e",function(){return g}),n.d(t,"c",function(){return h}),n.d(t,"g",function(){return E}),n.d(t,"h",function(){return O}),n.d(t,"a",function(){return b}),n.d(t,"b",function(){return C}),n.d(t,"k",function(){return v}),n.d(t,"m",function(){return T}),n.d(t,"p",function(){return S}),n.d(t,"l",function(){return y}),n.d(t,"o",function(){return j})},1155:function(e,t,n){"use strict";var a=n(46),r=n(8),c=n(1084),i={data:null,error:null,loading:!1},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.b:return Object(r.a)({},i);case c.a:return Object(r.a)({},e,{error:null});case c.e:case c.g:return Object(r.a)({},e,{loading:!0});case c.c:return Object(r.a)({},e,{data:t.payload,loading:!1});case c.h:return Object(r.a)({},e,{error:t.payload,loading:!1});default:return e}},u=n(107),l={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,search:[],filter:{id:"created",direction:"desc"}}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.f:return Object(r.a)({},e,{loading:!0});case c.d:return Object(r.a)({},e,{data:t.payload["hydra:member"],pageCount:u.a.hydraPageCount(t.payload),loading:!1});case c.i:return Object(r.a)({},e,{searchText:t.searchText});case c.j:return Object(r.a)({},e,{parametres:{page:t.parametres.page,search:t.parametres.search,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}});default:return e}},d=n(36),f={state:!1,options:{children:"Hi"}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.f:return Object(r.a)({},e,{state:!0,options:Object(r.a)({},e.options,t.options)});case d.a:return Object(r.a)({},e,{state:!1});default:return e}},m=Object(a.d)({contactsFournisseur:s,contactFournisseur:o,dialog:p});t.a=m},1391:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(40),i=n(140),o=n(23),u=n(967),l=n(974),s=n(1029),d=n(958),f=n(1051),p=n(1037),m=n(1052),g=n(1038),h=n(1035),E=n(1013),O=n(78),b=n(1084),C=n(6),v=n(64),T=n.n(v),S=n(107),N=n(347),A=n(1034),y=n(10),j=Object(A.a)(function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},chip:{marginLeft:e.spacing(1),padding:2,background:"#ef5350",color:"white",fontWeight:"bold",fontSize:"11px",height:20},chip2:{marginLeft:e.spacing(1),padding:2,background:"#4caf50",color:"white",fontWeight:"bold",fontSize:"11px",height:20},chipOrange:{marginLeft:e.spacing(1),padding:2,background:"#ff9800",color:"white",fontWeight:"bold",fontSize:"11px",height:20}}});var R=Object(O.g)(function(e){var t=j(),n=Object(C.b)(),i=Object(C.c)(function(e){return e.contactsFournisseurApp.contactsFournisseur.data}),O=Object(C.c)(function(e){return e.contactsFournisseurApp.contactsFournisseur.loading}),v=Object(C.c)(function(e){return e.contactsFournisseurApp.contactsFournisseur.pageCount}),A=Object(C.c)(function(e){return e.contactsFournisseurApp.contactsFournisseur.parametres}),R=Object(C.c)(function(e){return e.contactsFournisseurApp.contactsFournisseur.searchText}),P=Object(a.useState)(null),x=Object(o.a)(P,2),F=x[0],U=x[1];if(Object(a.useEffect)(function(){i&&U(function(e,t){var n=Object.keys(e).map(function(t){return e[t]});return 0===t.length?n:S.a.filterArrayByString(n,t)}(i,R))},[i,R]),!F)return null;var w=y.a.debounce(function(e){return n(b.r(e))},1e3);return r.a.createElement("div",{className:"w-full flex flex-col"},r.a.createElement(c.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(N.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(t,n,a){return{className:"h-64 cursor-pointer",onClick:function(t,a){n&&e.history.push("/contact_fournisseur/"+n.original.id)}}},getTheadProps:function(e,t,n){return{className:"h-64"}},data:F,columns:[{Header:"Fournisseur",className:"font-bold",accessor:"fournisseur.societe",filterable:!0,Cell:function(e){return e.original.fournisseur?e.original.fournisseur.societe:""}},{Header:"Nom Contact",accessor:"contact",filterable:!0,Cell:function(e){return e.original.contact?e.original.contact:""}},{Header:"T\xe9l\xe9phone",accessor:"phone",filterable:!0,Cell:function(e){return e.original.phone?e.original.phone:""}},{Header:"Email",accessor:"email",filterable:!0,Cell:function(e){return e.original.email?e.original.email:""}},{Header:"Message",accessor:"message",filterable:!0,Cell:function(e){return y.a.truncate(e.original.message,{length:36,separator:" "})}},{Header:"Date de cr\xe9ation",accessor:"created",filterable:!0,Cell:function(e){return T()(e.original.created).format("DD/MM/YYYY HH:mm")},Filter:function(e){var t=e.filter,n=e.onChange;return r.a.createElement(u.a,{onChange:function(e){return n(e.target.value)},style:{width:"100%"},value:t?t.value:"",type:"date",InputLabelProps:{shrink:!0}})}},{Header:"Statut",accessor:"statut",filterable:!0,Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},!1===e.original.statut?r.a.createElement(l.a,{className:t.chipOrange,label:"En attente"}):r.a.createElement(l.a,{className:t.chip2,label:"Valid\xe9"}))},Filter:function(e){var t=e.filter,n=e.onChange;return r.a.createElement("select",{onChange:function(e){return n(e.target.value)},style:{width:"100%"},value:t?t.value:""},r.a.createElement("option",{value:""},"Tous"),r.a.createElement("option",{value:"true"},"Valid\xe9"),r.a.createElement("option",{value:"false"},"En attente"))}},{Header:"",Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},1!==e.original.statut?r.a.createElement(s.a,{title:"Supprimer"},r.a.createElement(d.a,{className:"text-red text-20",onClick:function(t){t.stopPropagation(),n(b.o({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(p.a,null,r.a.createElement(m.a,{id:"alert-dialog-description"},"Voulez vous vraiment supprimer cet enregistrement ?")),r.a.createElement(g.a,null,r.a.createElement(h.a,{onClick:function(){return n(b.l())},color:"primary"},"Non"),r.a.createElement(h.a,{onClick:function(t){n(b.q(e.original,A)),n(b.l())},color:"primary",autoFocus:!0},"Oui")))}))}},r.a.createElement(E.a,null,"delete"))):r.a.createElement(s.a,{title:"Interdit!"},r.a.createElement(d.a,{className:"text-20 cursor-not-allowed disable",onClick:function(e){e.stopPropagation()}},r.a.createElement(E.a,null,"delete"))),r.a.createElement(s.a,{title:"D\xe9tails"},r.a.createElement(d.a,{className:"text-teal text-20"},r.a.createElement(E.a,null,"remove_red_eye"))))}}],manual:!0,pages:v,page:A.page-1,defaultPageSize:10,loading:O,showPageSizeOptions:!1,onPageChange:function(e){A.page=e+1,n(b.r(A))},onSortedChange:function(e,t,a){A.page=1,A.filter.id=e[0].id,A.filter.direction=e[0].desc?"desc":"asc",n(b.r(A))},onFilteredChange:function(e){A.page=1,A.search=e,w(A)},noDataText:"Aucun message trouv\xe9",loadingText:"Chargement...",ofText:"sur"})))}),P=n(98);var x=function(e){return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(c.d,{animation:"transition.expandIn",delay:300},r.a.createElement(E.a,{className:"text-32 mr-0 sm:mr-12"},"email")),r.a.createElement(c.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(P.a,{className:"hidden sm:flex",variant:"h6"},"Validation des messages envoy\xe9s aux Fournisseurs"))))},F=n(1155),U=n(346);t.default=Object(i.a)("contactsFournisseurApp",F.a)(function(){var e=Object(C.b)(),t=Object(C.c)(function(e){return e.contactsFournisseurApp.contactsFournisseur.parametres});return Object(a.useEffect)(function(){e(b.n(t))},[e,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(U.Helmet,null,r.a.createElement("title",null,"Messages fournisseurs | Les Achats Industriels"),r.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),r.a.createElement("meta",{name:"googlebot",content:"noindex"})),r.a.createElement(c.o,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(x,null),content:r.a.createElement(R,null),innerScroll:!0}))})}}]);