(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{1051:function(e,t,a){"use strict";var n=a(3),r=a.n(n),i=a(4),l=a.n(i),o=a(0),c=a.n(o),s=(a(1),a(2)),u=a(7),m=a(98),f=c.a.forwardRef(function(e,t){var a=e.children,n=e.classes,i=e.className,o=e.disableTypography,u=void 0!==o&&o,f=l()(e,["children","classes","className","disableTypography"]);return c.a.createElement("div",r()({className:Object(s.a)(n.root,i),ref:t},f),u?a:c.a.createElement(m.a,{variant:"h6"},a))});t.a=Object(u.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(f)},1052:function(e,t,a){"use strict";var n=a(3),r=a.n(n),i=a(0),l=a.n(i),o=(a(1),a(7)),c=a(98),s=l.a.forwardRef(function(e,t){return l.a.createElement(c.a,r()({component:"p",variant:"body1",color:"textSecondary",ref:t},e))});t.a=Object(o.a)({root:{marginBottom:16}},{name:"MuiDialogContentText"})(s)},1356:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(40),l=a(6),o=a(140),c=a(23),s=a(98),u=a(958),m=a(1051),f=a(1037),p=a(1052),d=a(1038),h=a(1035),E=a(1013),O=a(347),b=a(54),g=a(107),v=a(36),y=a(10),j="[MOTIFS APP] GET MOTIFS",x="[MOTIFS APP] SET SEARCH TEXT",T="[MOTIFS APP] OPEN NEW MOTIFS DIALOG",I="[MOTIFS APP] CLOSE NEW MOTIFS DIALOG",N="[MOTIFS APP] OPEN EDIT MOTIFS DIALOG",w="[MOTIFS APP] CLOSE EDIT MOTIFS DIALOG",M="[MOTIFS APP] ADD MOTIF",S="[MOTIFS APP] SAVE ERROR",P="[MOTIFS APP] UPDATE MOTIF",A="[MOTIFS APP] REMOVE MOTIF";function F(){var e=b.a.get("/api/motifs");return function(t){return e.then(function(e){t({type:j,payload:e.data["hydra:member"]})})}}function D(e){return function(t,a){return b.a.delete(e["@id"]).then(function(e){return Promise.all([t({type:A}),t(Object(v.B)({message:"Motif bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return t(F())})})}}var C="[DIALOG] OPEN",L="[DIALOG] CLOSE";function k(){return{type:L}}function R(e){return{type:C,options:e}}var z=function(e){var t=Object(l.b)(),a=Object(l.c)(function(e){return e.motifsApp.motifs.entities}),o=Object(l.c)(function(e){return e.motifsApp.motifs.searchText}),b=Object(n.useState)(null),g=Object(c.a)(b,2),v=g[0],y=g[1];return Object(n.useEffect)(function(){a&&y(function(e,t){var a=Object.keys(e).map(function(t){return e[t]});return 0===t.length?a:i.y.filterArrayByString(a,t)}(a,o))},[a,o]),v?0===v.length?r.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},r.a.createElement(s.a,{color:"textSecondary",variant:"h5"},"Il n'y a pas de Motifs!")):r.a.createElement(i.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(O.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(e,a,n){return{className:"cursor-pointer",onClick:function(e,n){var r;a&&t((r=a.original,{type:N,data:r}))}}},data:v,columns:[{Header:"Id",accessor:"id",filterable:!1},{Header:"D\xe9singnation",accessor:"name",filterable:!0},{Header:"",width:64,Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(u.a,{className:"text-red text-20",onClick:function(a){a.stopPropagation(),t(R({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(f.a,null,r.a.createElement(p.a,{id:"alert-dialog-description"},"'Voulez vous vraiment supprimer cet enregistrement ?'")),r.a.createElement(d.a,null,r.a.createElement(h.a,{onClick:function(){return t(k())},color:"primary"},"Non"),r.a.createElement(h.a,{onClick:function(a){t(D(e.original)),t(k())},color:"primary",autoFocus:!0},"Oui")))}))}},r.a.createElement(E.a,null,"delete")))}}],defaultPageSize:10,noDataText:"No Motif found"})):null},G=a(139),H=a(957),B=a(1014);var W=function(e){var t=Object(l.b)(),a=Object(l.c)(function(e){return e.motifsApp.motifs.searchText}),n=Object(l.c)(function(e){return e.fuse.settings.mainTheme});return r.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(i.d,{animation:"transition.expandIn",delay:300},r.a.createElement(E.a,{className:"text-32 mr-0 sm:mr-12"},"remove_circle_outline")),r.a.createElement(i.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(s.a,{className:"hidden sm:flex",variant:"h6"},"Gestion des motifs du rejet"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},r.a.createElement(B.a,{theme:n},r.a.createElement(i.d,{animation:"transition.slideDownIn",delay:300},r.a.createElement(G.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},r.a.createElement(E.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(H.a,{placeholder:"Rechercher...",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:function(e){return t({type:x,searchText:e.target.value})}}))))),r.a.createElement(i.d,{animation:"transition.slideRightIn",delay:300},r.a.createElement(h.a,{onClick:function(e){return t({type:T})},className:"whitespace-no-wrap",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Ajouter nouveau Motif"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},V=a(8),_=a(1031),U=a(1026),J=a(1036),q=a(141),X=a(55),K=a.n(X),Q={name:""};var Y=function(e){var t=Object(l.b)(),a=Object(l.c)(function(e){return e.motifsApp.motifs.motifsDialog}),o=Object(q.b)(Q),O=o.form,j=o.handleChange,x=o.setForm,T=Object(n.useState)(!1),N=Object(c.a)(T,2),A=N[0],C=N[1],L=Object(n.useRef)(null),z=Object(n.useCallback)(function(){"edit"===a.type&&a.data&&x(Object(V.a)({},a.data)),"new"===a.type&&x(Object(V.a)({},Q,a.data))},[a.data,a.type,x]);function G(){"edit"===a.type?t({type:w}):t({type:I})}function H(){t(D(O)),t(k()),G()}return Object(n.useEffect)(function(){a.props.open&&z()},[a.props.open,z]),r.a.createElement(_.a,Object.assign({classes:{paper:"m-24"}},a.props,{onClose:G,fullWidth:!0,maxWidth:"xs"}),r.a.createElement(U.a,{position:"static",elevation:1},r.a.createElement(J.a,{className:"flex w-full"},r.a.createElement(s.a,{variant:"subtitle1",color:"inherit"},"new"===a.type?"Nouveau Motif":"Editer Motif"))),r.a.createElement(K.a,{onValidSubmit:function(e){var n,r;"new"===a.type?t((r=O,function(e,t){return b.a.post("/api/motifs",r).then(function(t){return Promise.all([e({type:M}),e(Object(v.B)({message:"Motif bien ajout\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return e(F())})}).catch(function(t){e({type:S}),e(Object(v.B)({message:y.a.map(g.a.parseApiErrors(t),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})})):t((n=O,function(e,t){return b.a.put(n["@id"],n).then(function(t){return Promise.all([e({type:P}),e(Object(v.B)({message:"Motif bien modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return e(F())})}).catch(function(t){e({type:S}),e(Object(v.B)({message:y.a.map(g.a.parseApiErrors(t),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})})),G()},onValid:function(){C(!0)},onInvalid:function(){C(!1)},ref:L,className:"flex flex-col overflow-hidden"},r.a.createElement(f.a,{classes:{root:"p-24"}},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"min-w-48 pt-20"},r.a.createElement(E.a,{color:"action"},"remove_circle_outline")),r.a.createElement(i.F,{className:"mb-24",label:"D\xe9signation",autoFocus:!0,id:"name",name:"name",value:O.name,onChange:j,variant:"outlined",validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},required:!0,fullWidth:!0}))),"new"===a.type?r.a.createElement(d.a,{className:"justify-between pl-16"},r.a.createElement(h.a,{variant:"contained",color:"primary",type:"submit",disabled:!A},"Ajouter")):r.a.createElement(d.a,{className:"justify-between pl-16"},r.a.createElement(h.a,{variant:"contained",color:"primary",type:"submit",disabled:!A},"Modifier"),r.a.createElement(u.a,{onClick:function(){return t(R({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(f.a,null,r.a.createElement(p.a,{id:"alert-dialog-description"},"Voulez vous vraiment supprimer cet enregistrement ?")),r.a.createElement(d.a,null,r.a.createElement(h.a,{onClick:function(){return t(k())},color:"primary"},"Non"),r.a.createElement(h.a,{onClick:H,color:"primary",autoFocus:!0},"Oui")))}))}},r.a.createElement(E.a,null,"delete")))))},Z=a(46),$={entities:null,searchText:"",selectedMotifsIds:[],routeParams:{},motifsDialog:{type:"new",props:{open:!1},data:null}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(V.a)({},e,{entities:t.payload});case x:return Object(V.a)({},e,{searchText:t.searchText});case T:return Object(V.a)({},e,{motifsDialog:{type:"new",props:{open:!0},data:null}});case I:return Object(V.a)({},e,{motifsDialog:{type:"new",props:{open:!1},data:null}});case N:return Object(V.a)({},e,{motifsDialog:{type:"edit",props:{open:!0},data:t.data}});case w:return Object(V.a)({},e,{motifsDialog:{type:"edit",props:{open:!1},data:null}});default:return e}},te={state:!1,options:{children:"Hi"}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.f:return Object(V.a)({},e,{state:!0,options:Object(V.a)({},e.options,t.options)});case v.a:return Object(V.a)({},e,{state:!1});default:return e}},ne=Object(Z.d)({motifs:ee,dialog:ae}),re=a(346);t.default=Object(o.a)("motifsApp",ne)(function(e){var t=Object(l.b)(),a=Object(n.useRef)(null);return Object(n.useEffect)(function(){t(F())},[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(re.Helmet,null,r.a.createElement("title",null,"Motifs | Les Achats Industriels"),r.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),r.a.createElement("meta",{name:"googlebot",content:"noindex"})),r.a.createElement(i.p,{classes:{contentWrapper:"p-0 sm:p-24 pb-80 sm:pb-80 h-full",content:"flex flex-col h-full",leftSidebar:"w-256 border-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(W,{pageLayout:a}),content:r.a.createElement(z,null),sidebarInner:!0,ref:a,innerScroll:!0}),r.a.createElement(Y,null))})}}]);