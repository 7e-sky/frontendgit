(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{1049:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};t.default=n},1083:function(e,t,a){"use strict";var n=a(36),r=a(54),i="[PRODUITS APP] REQUEST PRODUITS",c="[PRODUITS APP] REMOVE PRODUITS",o="[PRODUITS APP] SET PARAMETRES DATA",u="[PRODUITS APP] CLEAN_UP",l="[PRODUITS APP] GET PRODUITS",s="[PRODUITS APP] SET PRODUITS SEARCH TEXT";function d(){return function(e){return e({type:u})}}function m(e){var t="";e.search.length>0&&e.search.map(function(e){return e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value)});var a=r.a.get("/api/produits?page=".concat(e.page).concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:i}),a.then(function(t){return e({type:l,payload:t.data})})}}function p(e,t){var a={del:!0};return function(i,o){return r.a.put("/api/produits/".concat(e.id),a).then(function(e){return Promise.all([i({type:c}),i(Object(n.B)({message:"Produit bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return i(m(t))})})}}function f(e){return{type:o,parametres:e}}var g=a(40),E=a(67),h=a.n(E),b=a(10),v=a(196),O="[PRODUIT APP] REQUEST PRODUIT",P="[PRODUIT APP] GET PRODUIT",A="[PRODUIT APP] REQUEST SAVE",I="[PRODUIT APP] SAVE PRODUIT",y="[PRODUIT APP] SAVE ERROR",S="[PRODUIT APP] REQUEST SOUS_SECTEUR",R="[PRODUIT APP] GET SOUS SECTEUR",T="[PRODUIT APP] REQUEST SECTEUR",j="[PRODUIT APP] GET SECTEUR",D="[PRODUIT APP] REQUEST ADD SECTEUR",U="[PRODUIT APP] SAVE_ADD_SECTEUR",x="[PRODUIT APP] SAVE_ERROR_ADD_SECTEUR",C="[ACHETEURS ADMIN APP] CLEAN_UP_SECTEUR",w="[PRODUIT APP] REQUEST ADD SOUS SECTEUR",N="[PRODUIT APP] SAVE ADD SOUS SECTEUR",L="[PRODUIT APP] SAVE ERROR ADD SOUS SECTEUR",q="[ACHETEURS ADMIN APP] CLEAN UP SOUS SECTEUR",_="[PRODUIT APP] REQUEST ADD CATEGORIE",F="[PRODUIT APP] SAVE ADD CATEGORIE",V="[PRODUIT APP] SAVE ERROR ADD CATEGORIE",z="[ACHETEURS ADMIN APP] CLEAN UP CATEGORIE",G="[PRODUIT APP] REQUEST CATEGORIE",M="[PRODUIT APP] GET CATEGORIE",k="[PRODUIT APP] UPLOAD ATTACHEMENT",B="[PRODUIT APP] UPLOAD REQUEST",H="[PRODUIT APP] UPLOAD ERROR",W="[PRODUIT APP] UPLOAD_FICHE_ATTACHEMENT",Q="[PRODUIT APP] UPLOAD_FICHE_REQUEST",Y="[PRODUIT APP] UPLOAD_FICHE_ERROR",J="[PRODUIT APP] REQUEST DELETE",K="[PRODUIT APP] DELETE SUCCESS",X="[PRODUIT APP] ERROR DELETE",Z="[PRODUIT APP] CLEAN_ERROR",$="[PRODUIT APP] CLEAN_IMAGE",ee="[PRODUIT APP] CLEAN_DELETE_IMAGE",te="[PRODUIT APP] REQUEST_VIDEO",ae="[PRODUIT APP] GET_VIDEO";function ne(e){var t=h.a.get("https://www.googleapis.com/youtube/v3/videos?part=snippet%2CcontentDetails%2Cstatistics&id=".concat(e,"&key=AIzaSyBvpeIK_1hzKDwawG1uRVmbHdE6n7tcRr4"));return function(e){return e({type:te}),t.then(function(t){return e({type:ae,payload:t.data&&t.data.items.length>0?1:2})})}}function re(){var e=r.a.get("/api/secteurs?pagination=false&props[]=id&props[]=name");return function(t){return t({type:T}),e.then(function(e){t({type:j,payload:e.data})})}}function ie(e,t){var a={name:e},i=r.a.post("/api/secteurs",a);return function(e){return e({type:D}),i.then(function(a){e(re());var n={secteur:a.data["@id"],autreSecteur:null};return r.a.put("/api/produits/".concat(t),n).then(function(t){e({type:U,payload:t.data})})}).catch(function(t){e({type:x}),e(Object(n.B)({message:b.a.map(g.y.parseApiErrors(t),function(e,t){return e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function ce(){return function(e){return e({type:C})}}function oe(e){var t=r.a.get("".concat(e,"/sous_secteurs?pagination=false&props[]=id&props[]=name"));return function(e){return e({type:S}),t.then(function(t){e({type:R,payload:t.data})})}}function ue(e,t,a){var i={name:e,secteur:t},c=r.a.post("/api/sous_secteurs",i);return function(e){return e({type:w}),c.then(function(n){e(oe(t));var i={sousSecteurs:n.data["@id"],autreActivite:null};return r.a.put("/api/produits/".concat(a),i).then(function(t){e({type:N,payload:t.data})})}).catch(function(t){e({type:L}),e(Object(n.B)({message:b.a.map(g.y.parseApiErrors(t),function(e,t){return e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function le(){return function(e){return e({type:q})}}function se(e){var t=r.a.get("".concat(e,"/categories?pagination=false&props[]=id&props[]=name"));return function(e){return e({type:G}),t.then(function(t){e({type:M,payload:t.data})})}}function de(e,t,a){var i={name:e,sousSecteurs:[t]},c=r.a.post("/api/categories",i);return function(e){return e({type:_}),c.then(function(n){e(se(t));var i={categorie:n.data["@id"],autreProduit:null};return r.a.put("/api/produits/".concat(a),i).then(function(t){e({type:F,payload:t.data})})}).catch(function(t){e({type:V}),e(Object(n.B)({message:b.a.map(g.y.parseApiErrors(t),function(e,t){return e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function me(){return function(e){return e({type:z})}}function pe(e){var t=r.a.get("/api/produits/".concat(e));return function(e){return e({type:O}),t.then(function(t){e({type:P,payload:t.data})}).catch(function(t){e({type:y,payload:g.y.parseApiErrors(t)})})}}function fe(e,t,a,i){e.pu&&(e.pu=parseFloat(e.pu)),e.sousSecteurs=a.value,e.secteur=t.value,e.categorie=i?i.value:a.value,e.images=b.a.map(e.images,function(e,t){return e["@id"]}),e.ficheTechnique&&(e.ficheTechnique=e.ficheTechnique["@id"]),e.featuredImageId&&(e.featuredImageId=e.featuredImageId["@id"]);var c=r.a.post("/api/produits",e);return function(e){return e({type:A}),c.then(function(t){return e(Object(n.B)({message:"Produit enregistr\xe9"})),e({type:I,payload:t.data})}).catch(function(t){e({type:y,payload:g.y.parseApiErrors(t)})})}}function ge(e,t,a,i,c){e.pu&&(e.pu=parseFloat(e.pu)),e.sousSecteurs=i.value,e.secteur=a.value,e.categorie=c?c.value:i.value,e.images=b.a.map(e.images,function(e,t){return e["@id"]}),e.ficheTechnique&&(e.ficheTechnique=e.ficheTechnique["@id"]),e.featuredImageId&&(e.featuredImageId=e.featuredImageId["@id"]);var o=r.a.put("/api/produits/".concat(t),e);return function(e){return e({type:A}),o.then(function(t){return e(Object(n.B)({message:"Produit Modifi\xe9"})),e(v.b("validation_produits")),e({type:I,payload:t.data})}).catch(function(t){e({type:y,payload:g.y.parseApiErrors(t)})})}}function Ee(e){var t=r.a.delete(e["@id"]);return function(a){return a({type:J}),t.then(function(t){return a(Object(n.B)({message:"Document supprim\xe9"})),a({type:K,id:e})}).catch(function(e){a({type:X,payload:g.y.parseApiErrors(e)})})}}function he(e){return function(t,a){var i=new FormData;i.append("file",e);var c=r.a.post("/api/image_produits",i,{headers:{"Content-Type":"multipart/form-data"}});return t({type:B}),c.then(function(e){return Promise.all([e,t({type:k,payload:e.data}),t(Object(n.B)({message:"Document t\xe9l\xe9charg\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])}).catch(function(e){t({type:H}),t(Object(n.B)({message:b.a.map(g.y.parseApiErrors(e),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function be(e){return function(t,a){var i=new FormData;i.append("file",e);var c=r.a.post("/api/fiches",i,{headers:{"Content-Type":"multipart/form-data"}});return t({type:Q}),c.then(function(e){return Promise.all([e,t({type:W,payload:e.data}),t(Object(n.B)({message:"Document t\xe9l\xe9charg\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])}).catch(function(e){t({type:Y}),t(Object(n.B)({message:b.a.map(g.y.parseApiErrors(e),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function ve(){return function(e){return e({type:Z})}}function Oe(){return function(e){return e({type:$})}}function Pe(){return function(e){return e({type:ee})}}var Ae="[DIALOG] OPEN",Ie="[DIALOG] CLOSE";function ye(){return{type:Ie}}function Se(e){return{type:Ae,options:e}}a.d(t,"u",function(){return i}),a.d(t,"G",function(){return o}),a.d(t,"d",function(){return u}),a.d(t,"k",function(){return l}),a.d(t,"H",function(){return s}),a.d(t,"U",function(){return d}),a.d(t,"cb",function(){return m}),a.d(t,"ib",function(){return p}),a.d(t,"kb",function(){return f}),a.d(t,"t",function(){return O}),a.d(t,"j",function(){return P}),a.d(t,"v",function(){return A}),a.d(t,"F",function(){return I}),a.d(t,"B",function(){return y}),a.d(t,"w",function(){return S}),a.d(t,"m",function(){return R}),a.d(t,"l",function(){return j}),a.d(t,"p",function(){return D}),a.d(t,"z",function(){return U}),a.d(t,"D",function(){return x}),a.d(t,"f",function(){return C}),a.d(t,"q",function(){return w}),a.d(t,"A",function(){return N}),a.d(t,"E",function(){return L}),a.d(t,"g",function(){return q}),a.d(t,"o",function(){return _}),a.d(t,"y",function(){return F}),a.d(t,"C",function(){return V}),a.d(t,"e",function(){return z}),a.d(t,"r",function(){return G}),a.d(t,"i",function(){return M}),a.d(t,"I",function(){return k}),a.d(t,"N",function(){return B}),a.d(t,"J",function(){return H}),a.d(t,"K",function(){return W}),a.d(t,"M",function(){return Q}),a.d(t,"L",function(){return Y}),a.d(t,"s",function(){return J}),a.d(t,"h",function(){return K}),a.d(t,"b",function(){return Z}),a.d(t,"c",function(){return $}),a.d(t,"a",function(){return ee}),a.d(t,"x",function(){return te}),a.d(t,"n",function(){return ae}),a.d(t,"fb",function(){return ne}),a.d(t,"db",function(){return re}),a.d(t,"P",function(){return ie}),a.d(t,"W",function(){return ce}),a.d(t,"eb",function(){return oe}),a.d(t,"Q",function(){return ue}),a.d(t,"X",function(){return le}),a.d(t,"ab",function(){return se}),a.d(t,"O",function(){return de}),a.d(t,"V",function(){return me}),a.d(t,"bb",function(){return pe}),a.d(t,"jb",function(){return fe}),a.d(t,"hb",function(){return ge}),a.d(t,"Z",function(){return Ee}),a.d(t,"mb",function(){return he}),a.d(t,"lb",function(){return be}),a.d(t,"S",function(){return ve}),a.d(t,"T",function(){return Oe}),a.d(t,"R",function(){return Pe}),a.d(t,"Y",function(){return ye}),a.d(t,"gb",function(){return Se})},1154:function(e,t,a){"use strict";var n=a(46),r=a(8),i=a(1083),c=a(107),o={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,reference:"",search:[],filter:{id:"created",direction:"desc"}}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.d:return Object(r.a)({},o);case i.u:return Object(r.a)({},e,{loading:!0});case i.k:return Object(r.a)({},e,{data:t.payload["hydra:member"],pageCount:c.a.hydraPageCount(t.payload),loading:!1});case i.H:return Object(r.a)({},e,{searchText:t.searchText});case i.G:return Object(r.a)({},e,{parametres:{page:t.parametres.page,reference:t.parametres.reference,search:t.parametres.search,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}});default:return e}},l=a(21),s={data:null,error:null,loading:!1,success:!1,imageReqInProgress:!1,deleteReqInProgress:!1,image:null,image_deleted:null,sousSecteurs:[],secteurs:[],categories:[],fiche:null,ficheReqInProgress:!1,loadingRechercheVideo:!1,videoExist:0,loadingAddSecteur:!1,secteurAdded:!1,loadingAddSousSecteur:!1,sousSecteurAdded:!1,loadingAddCategorie:!1,CategorieAdded:!1},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.o:return Object(r.a)({},e,{loadingAddCategorie:!0});case i.y:return Object(r.a)({},e,{loadingAddCategorie:!1,data:t.payload,CategorieAdded:!0});case i.C:return Object(r.a)({},e,{loadingAddCategorie:!1});case i.e:return Object(r.a)({},e,{CategorieAdded:!1});case i.q:return Object(r.a)({},e,{loadingAddSousSecteur:!0});case i.A:return Object(r.a)({},e,{loadingAddSousSecteur:!1,data:t.payload,sousSecteurAdded:!0});case i.E:return Object(r.a)({},e,{loadingAddSousSecteur:!1});case i.g:return Object(r.a)({},e,{sousSecteurAdded:!1});case i.p:return Object(r.a)({},e,{loadingAddSecteur:!0});case i.z:return Object(r.a)({},e,{loadingAddSecteur:!1,data:t.payload,secteurAdded:!0});case i.D:return Object(r.a)({},e,{loadingAddSecteur:!1});case i.f:return Object(r.a)({},e,{secteurAdded:!1});case i.x:return Object(r.a)({},e,{loadingRechercheVideo:!0});case i.n:return Object(r.a)({},e,{videoExist:t.payload,loadingRechercheVideo:!1});case i.t:case i.v:return Object(r.a)({},e,{loading:!0});case i.w:return Object(r.a)({},e,{sousSecteurs:[],categories:[]});case i.r:return Object(r.a)({},e,{categories:[]});case i.N:return Object(r.a)({},e,{imageReqInProgress:!0});case i.s:return Object(r.a)({},e,{deleteReqInProgress:!0});case i.I:return Object(r.a)({},e,{image:t.payload,imageReqInProgress:!1});case i.h:return Object(r.a)({},e,{deleteReqInProgress:!1,image_deleted:t.id});case i.J:return Object(r.a)({},e,{imageReqInProgress:!1});case i.M:return Object(r.a)({},e,{ficheReqInProgress:!0});case i.K:return Object(r.a)({},e,{fiche:t.payload,ficheReqInProgress:!1});case i.L:return Object(r.a)({},e,{ficheReqInProgress:!1});case i.l:return Object(r.a)({},e,{secteurs:t.payload["hydra:member"]});case i.m:return Object(r.a)({},e,{sousSecteurs:[].concat(Object(l.a)(t.payload["hydra:member"]),[{"@id":"/api/sous_secteurs/98",name:"Autre"}])});case i.i:return Object(r.a)({},e,{categories:[].concat(Object(l.a)(t.payload["hydra:member"]),[{"@id":"/api/categories/382",name:"Autre"}])});case i.j:return Object(r.a)({},e,{data:t.payload,loading:!1});case i.F:return Object(r.a)({},e,{loading:!1,success:!0});case i.b:return Object(r.a)({},e,{error:null});case i.c:return Object(r.a)({},e,{image:null,fiche:null});case i.a:return Object(r.a)({},e,{image_deleted:null});case i.B:return Object(r.a)({},e,{error:t.payload,loading:!1,success:!1});default:return e}},m=a(36),p={state:!1,options:{children:"Hi"}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.f:return Object(r.a)({},e,{state:!0,options:Object(r.a)({},e.options,t.options)});case m.a:return Object(r.a)({},e,{state:!1});default:return e}},g=Object(n.d)({produits:u,produit:d,dialog:f});t.a=g},1324:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(8),i=a(23),c=a(0),o=a.n(c),u=a(98),l=a(1013),s=a(1035),d=a(1041),m=a(1032),p=a(1044),f=a(1027),g=a(1040),E=a(1039),h=a(958),b=a(1029),v=a(967),O=a(163),P=a(388),A=a(345),I=a(40),y=a(141),S=a(18),R=a(2),T=a(10),j=a(6),D=a(140),U=a(1083),x=a(1154),C=a(55),w=a.n(C),N=a(64),L=a.n(N),q=a(1049),_=a.n(q),F=a(350),V=a(1098),z=a(1113),G=a(1048),M=a(1123),k=(a(1125),a(197)),B=Object(A.a)(function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},buttonProgress:{color:_.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},produitImageFeaturedStar2:{position:"absolute",top:0,right:0,color:O.a[400],opacity:0},produitImageFeaturedStar:{position:"absolute",top:0,left:0,color:P.a[400],opacity:0},produitImageUpload:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut},select:{zIndex:999},produitImageItem:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,"&:hover":{"& $produitImageFeaturedStar":{opacity:.8},"& $produitImageFeaturedStar2":{opacity:.8}},"&.featured":{boxShadow:e.shadows[3],"& $produitImageFeaturedStar":{opacity:1},"&:hover $produitImageFeaturedStar":{opacity:1}}},error:{backgroundColor:e.palette.error.dark},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"},margin:{margin:e.spacing(1)}}});L.a.defaultFormat="DD/MM/YYYY HH:mm",t.default=Object(D.a)("produitsApp",x.a)(function(e){var t=Object(j.b)(),a=Object(j.c)(function(e){return e.produitsApp.produit}),O=Object(c.useState)(!1),P=Object(i.a)(O,2),A=P[0],D=P[1],x=Object(c.useRef)(null),C=Object(y.b)(null),N=C.form,L=C.handleChange,q=C.setForm,_=B(e),H=Object(c.useState)(0),W=Object(i.a)(H,2),Q=W[0],Y=W[1],J=Object(c.useState)(null),K=Object(i.a)(J,2),X=K[0],Z=K[1],$=Object(c.useState)(null),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ne=Object(c.useState)(null),re=Object(i.a)(ne,2),ie=re[0],ce=re[1],oe=Object(c.useState)(""),ue=Object(i.a)(oe,2),le=ue[0],se=ue[1],de=Object(c.useState)(!1),me=Object(i.a)(de,2),pe=me[0],fe=me[1],ge=Object(c.useState)(0),Ee=Object(i.a)(ge,2),he=Ee[0],be=Ee[1],ve=Object(c.useState)(!1),Oe=Object(i.a)(ve,2),Pe=Oe[0],Ae=Oe[1],Ie=Object(c.useState)([]),ye=Object(i.a)(Ie,2),Se=ye[0],Re=ye[1];function Te(e,a){q(T.a.set(Object(r.a)({},N),a,e)),"secteur"===a&&e.value&&(t(U.eb(e.value)),Z(e)),"sousSecteurs"===a&&e.value&&(t(U.ab(e.value)),ae(e)),"categorie"===a&&ce(e)}function je(){D(!1)}function De(a){var n=e.match.params.produitId;t("new"===n?U.jb(a,X,te,ie):U.hb(a,a.id,X,te,ie))}return Object(c.useEffect)(function(){return a.fiche&&q(T.a.set(Object(r.a)({},N),"ficheTechnique",a.fiche)),function(){t(U.T())}},[N,q,a.fiche,t]),Object(c.useEffect)(function(){1===a.videoExist?(q(T.a.set(Object(r.a)({},N),"videos",le)),fe(!1)):2===a.videoExist&&(q(T.a.set(Object(r.a)({},N),"videos",null)),fe(!0)),a.videoExist=0},[N,q,a.videoExist]),Object(c.useEffect)(function(){t(U.db())},[t]),Object(c.useEffect)(function(){return a.error&&(a.error.reference||a.error.titre||a.error.description||a.error.pu||a.error.secteur||a.error.sousSecteurs)&&(x.current.updateInputsWithError(Object(r.a)({},a.error)),je()),function(){t(U.S())}},[a.error,t]),Object(c.useEffect)(function(){a.success&&(a.success=!1,a.data=null,t(U.S()),t(U.T()),t(U.R()),e.history.push("/products"))},[a.success,t]),Object(c.useEffect)(function(){return a.image&&(q(T.a.set(Object(r.a)({},N),"images",[a.image].concat(Object(n.a)(N.images)))),Re([].concat(Object(n.a)(Se),[k.d+a.image.url]))),function(){t(U.T())}},[N,q,a.image,t]),Object(c.useEffect)(function(){return a.image_deleted&&("ImageProduit"===a.image_deleted["@type"]?(q(T.a.set(Object(r.a)({},N),"images",T.a.pullAllBy(N.images,[{id:a.image_deleted.id}],"id"))),Re(T.a.reject(Se,function(e){return e===k.d+a.image_deleted.url}))):q(T.a.set(Object(r.a)({},N),"ficheTechnique",null))),function(){t(U.R())}},[a.image_deleted,t]),Object(c.useEffect)(function(){!function(){var a=e.match.params.produitId;t(U.bb(a))}()},[t,e.match.params]),Object(c.useEffect)(function(){if(a.data&&a.secteurAdded)return q(Object(r.a)({},a.data)),Z({value:a.data.secteur["@id"],label:a.data.secteur.name}),function(){t(U.W())}},[N,a.secteurAdded,a.data,q]),Object(c.useEffect)(function(){if(a.data&&a.sousSecteurAdded)return q(Object(r.a)({},a.data)),ae({value:a.data.sousSecteurs["@id"],label:a.data.sousSecteurs.name}),function(){t(U.X())}},[N,a.sousSecteurAdded,a.data,q]),Object(c.useEffect)(function(){if(a.data&&a.CategorieAdded)return q(Object(r.a)({},a.data)),ce({value:a.data.categorie["@id"],label:a.data.categorie.name}),function(){t(U.V())}},[N,a.CategorieAdded,a.data,q]),Object(c.useEffect)(function(){(a.data&&!N||a.data&&N&&a.data.id!==N.id)&&(a.data.secteur&&(t(U.eb(a.data.secteur["@id"])),Z({value:a.data.secteur["@id"],label:a.data.secteur.name})),a.data.sousSecteurs&&(t(U.ab(a.data.sousSecteurs["@id"])),ae({value:a.data.sousSecteurs["@id"],label:a.data.sousSecteurs.name})),a.data.images&&Re(a.data.images.map(function(e){return k.d+e.url})),a.data.categorie&&ce({value:a.data.categorie["@id"],label:a.data.categorie.name}),q(Object(r.a)({},a.data)))},[N,a.data,q,t]),o.a.createElement(I.o,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:a.loading?"":N&&o.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},o.a.createElement("div",{className:"flex flex-col items-start max-w-full"},o.a.createElement(I.d,{animation:"transition.slideRightIn",delay:300},o.a.createElement(u.a,{className:"normal-case flex items-center sm:mb-12",component:S.a,role:"button",to:"/products",color:"inherit"},o.a.createElement(l.a,{className:"mr-4 text-20"},"arrow_back"),"Retour")),o.a.createElement("div",{className:"flex items-center max-w-full"},o.a.createElement(I.d,{animation:"transition.expandIn",delay:300},N.images.length>0&&N.featuredImageId?o.a.createElement("img",{className:"w-32 sm:w-48 mr-8 sm:mr-16 rounded",src:k.d+N.featuredImageId.url,alt:N.reference}):o.a.createElement("img",{className:"w-32 sm:w-48 mr-8 sm:mr-16 rounded",src:"assets/images/ecommerce/product-image-placeholder.png",alt:N.reference})),o.a.createElement("div",{className:"flex flex-col min-w-0"},o.a.createElement(I.d,{animation:"transition.slideLeftIn",delay:300},o.a.createElement(u.a,{className:"text-16 sm:text-20 truncate"},N.reference?N.reference:"Nouveau produit")),o.a.createElement(I.d,{animation:"transition.slideLeftIn",delay:300},o.a.createElement(u.a,{variant:"caption"},"D\xe9tails du produit"))))),o.a.createElement(I.d,{animation:"transition.slideRightIn",delay:300},o.a.createElement(s.a,{className:"whitespace-no-wrap",variant:"contained",disabled:!A||a.loading,onClick:function(){return De(N)}},"Sauvegarder",a.loading&&o.a.createElement(d.a,{size:24,className:_.buttonProgress})))),contentToolbar:a.loading?o.a.createElement("div",{className:_.root},o.a.createElement(m.a,{color:"secondary"})):o.a.createElement(p.a,{value:Q,onChange:function(e,t){Y(t)},indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},o.a.createElement(f.a,{className:"h-64 normal-case",label:"Infos g\xe9n\xe9rales"}),o.a.createElement(f.a,{className:"h-64 normal-case",label:N&&N.images.length>0?"Image(s) ("+N.images.length+")":"Image(s)"}),o.a.createElement(f.a,{className:"h-64 normal-case",label:N&&N.ficheTechnique?"Fiche technique (1)":"Fiche technique"}),o.a.createElement(f.a,{className:"h-64 normal-case",label:N&&N.videos?"Vid\xe9o (1)":"Vid\xe9o"})),content:a.loading?"":N&&o.a.createElement("div",{className:"p-10  sm:p-24 max-w-2xl"},0===Q&&o.a.createElement(w.a,{onValidSubmit:De,onValid:function(){D(!0)},onInvalid:je,ref:x,className:"flex flex-col "},o.a.createElement(g.a,{container:!0,spacing:3},o.a.createElement(g.a,{item:!0,xs:12,sm:4},o.a.createElement(F.a,{id:"secteur",name:"secteur",className:"MuiFormControl-fullWidth MuiTextField-root ",value:X,onChange:function(e){return Te(e,"secteur")},placeholder:"S\xe9lectionner un secteur",textFieldProps:{label:"Secteurs",InputLabelProps:{shrink:!0},variant:"outlined"},options:a.secteurs,fullWidth:!0,required:!0}),X&&("Autre"===X.label||"autre"===X.label)&&o.a.createElement(I.F,{className:"mt-16 w-full",type:"text",name:"autreSecteur",value:N.autreSecteur,onChange:L,label:"Autre Secteur",validations:{minLength:2,maxLength:50},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 2",maxLength:"La longueur maximale de caract\xe8re est 50"},InputProps:{endAdornment:a.loadingAddSecteur?o.a.createElement(d.a,{color:"secondary"}):o.a.createElement(E.a,{position:"end"},o.a.createElement(h.a,{color:"secondary",disabled:!N.autreSecteur,onClick:function(e){return t(U.P(N.autreSecteur,N.id))}},o.a.createElement(l.a,null,"add_circle")))},variant:"outlined",required:!0})),o.a.createElement(g.a,{item:!0,xs:12,sm:4},o.a.createElement(F.a,{id:"sousSecteurs",name:"sousSecteurs",className:"MuiFormControl-fullWidth MuiTextField-root",value:te,onChange:function(e){return Te(e,"sousSecteurs")},placeholder:"S\xe9lectionner une activit\xe9",textFieldProps:{label:"Activit\xe9s",InputLabelProps:{shrink:!0},variant:"outlined"},options:a.sousSecteurs,fullWidth:!0,required:!0}),te&&("Autre"===te.label||"autre"===te.label)&&o.a.createElement(I.F,{className:"mt-16 w-full",type:"text",name:"autreActivite",value:N.autreActivite,onChange:L,label:"Autre Activit\xe9",validations:{minLength:2,maxLength:50},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 2",maxLength:"La longueur maximale de caract\xe8re est 50"},variant:"outlined",InputProps:{endAdornment:a.loadingAddSousSecteur?o.a.createElement(d.a,{color:"secondary"}):o.a.createElement(E.a,{position:"end"},o.a.createElement(h.a,{color:"secondary",disabled:!N.autreActivite||"Autre"===X.label||"autre"===X.label,onClick:function(e){return t(U.Q(N.autreActivite,X.value,N.id))}},o.a.createElement(l.a,null,"add_circle")))},required:!0})),o.a.createElement(g.a,{item:!0,xs:12,sm:4},o.a.createElement(F.a,{id:"categorie",name:"categorie",className:"MuiFormControl-fullWidth MuiTextField-root",value:ie,onChange:function(e){return Te(e,"categorie")},placeholder:"S\xe9lectionner un produit",textFieldProps:{label:"Produits",InputLabelProps:{shrink:!0},variant:"outlined"},options:a.categories,fullWidth:!0}),ie&&("Autre"===ie.label||"autre"===ie.label)&&o.a.createElement(I.F,{className:"mt-16 w-full",type:"text",name:"autreProduit",value:N.autreProduit,onChange:L,label:"Autre Produit",validations:{minLength:2,maxLength:50},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 2",maxLength:"La longueur maximale de caract\xe8re est 50"},variant:"outlined",required:!0,InputProps:{endAdornment:a.loadingAddCategorie?o.a.createElement(d.a,{color:"secondary"}):o.a.createElement(E.a,{position:"end"},o.a.createElement(h.a,{color:"secondary",disabled:!N.autreProduit||"Autre"===te.label||"autre"===te.label,onClick:function(e){return t(U.O(N.autreProduit,te.value,N.id))}},o.a.createElement(l.a,null,"add_circle")))}}))),o.a.createElement(g.a,{container:!0,spacing:3},o.a.createElement(g.a,{item:!0,xs:12,sm:12},o.a.createElement(I.F,{label:"Titre",id:"titre",name:"titre",value:N.titre,onChange:L,variant:"outlined",validations:{minLength:6},validationErrors:{minLength:"La longueur minimale des caract\xe8res est de 6"},className:"mt-16",required:!0,fullWidth:!0})),o.a.createElement(g.a,{item:!0,xs:12,sm:6},o.a.createElement(I.F,{className:"mb-24",label:"R\xe9f\xe9rence",id:"reference",name:"reference",value:N.reference,onChange:L,variant:"outlined",validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},required:!0,fullWidth:!0})),o.a.createElement(g.a,{item:!0,xs:12,sm:6},o.a.createElement(I.F,{className:"mb-24",label:"Prix Unitaire du produit",type:"number",step:"any",id:"pu",name:"pu",value:String(N.pu),onChange:L,variant:"outlined",fullWidth:!0}))),o.a.createElement(I.F,{className:"mb-16  w-full",type:"text",name:"description",value:N.description,onChange:L,label:"Description",autoComplete:"description",validations:{minLength:10},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 10"},required:!0,variant:"outlined",multiline:!0,rows:"4"}),o.a.createElement(g.a,{container:!0,spacing:3},o.a.createElement(g.a,{item:!0,xs:12,sm:6},o.a.createElement(I.a,{className:"mb-10",name:"isValid",onChange:function(e){return function(e,t){q(T.a.set(Object(r.a)({},N),t,e.target.checked))}(e,"isValid")},label:"Valider",value:N.isValid})))),1===Q&&o.a.createElement("div",null,o.a.createElement("input",{accept:"text/plain,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/vnd.ms-powerpoint,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,application/pdf,image/jpeg,image/gif,image/png,application/pdf,",className:"hidden",id:"button-file",type:"file",disabled:a.imageReqInProgress,onChange:function(e){var a=e.target.files[0];a&&t(U.mb(a))}}),o.a.createElement("div",{className:"flex justify-center sm:justify-start flex-wrap"},o.a.createElement("label",{htmlFor:"button-file",className:Object(R.a)(_.produitImageUpload,"flex items-center justify-center relative w-128 h-128 rounded-4 mr-16 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5",5===N.images.length&&"hidden")},a.imageReqInProgress?o.a.createElement(d.a,{size:24,className:_.buttonProgress}):o.a.createElement(l.a,{fontSize:"large",color:"action"},"arrow_upward")),N.images.map(function(e){return o.a.createElement("div",{className:Object(R.a)(_.produitImageItem,"flex items-center cursor-pointer justify-center relative w-128 h-128 rounded-4 mr-16 mb-16 overflow-hidden  shadow-1 hover:shadow-5",e.id===(N.featuredImageId?N.featuredImageId.id:null)&&"featured"),key:e.id,onClick:function(){Ae(!0)}},o.a.createElement(b.a,{title:"Image en vedette"},o.a.createElement(h.a,{className:_.produitImageFeaturedStar,onClick:function(t){var a;t.stopPropagation(),a=e,q(T.a.set(Object(r.a)({},N),"featuredImageId",a))}},o.a.createElement(l.a,null,"star"))),o.a.createElement(b.a,{title:"Supprimer"},o.a.createElement(h.a,{className:Object(R.a)(_.produitImageFeaturedStar2,e.id===(N.featuredImageId?N.featuredImageId.id:null)&&"hidden"),onClick:function(a){a.stopPropagation(),t(U.Z(e))}},o.a.createElement(l.a,null,"delete"))),o.a.createElement("img",{className:"max-w-none w-auto h-full",src:k.d+e.url,alt:"produit"}),Pe&&o.a.createElement(M.a,{mainSrc:Se[he],nextSrc:Se[(he+1)%Se.length],prevSrc:Se[(he+Se.length-1)%Se.length],onCloseRequest:function(){return Ae(!1)},onMovePrevRequest:function(){return be((he+Se.length-1)%Se.length)},onMoveNextRequest:function(){return be((he+1)%Se.length)}}))}),o.a.createElement(g.a,{container:!0,spacing:3},o.a.createElement(g.a,{item:!0,xs:12,sm:6},o.a.createElement(u.a,{variant:"caption"},"- Taille maximale par fichier : 2 Mb ",o.a.createElement("br",null),"- 5 fichiers \xe0 t\xe9l\xe9charger"))))),2===Q&&o.a.createElement("div",null,o.a.createElement("input",{accept:"text/plain,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/vnd.ms-powerpoint,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,application/pdf,image/jpeg,image/gif,image/png,application/pdf,",className:"hidden",id:"button-file",type:"file",disabled:a.ficheReqInProgress,onChange:function(e){var a=e.target.files[0];a&&t(U.lb(a))}}),o.a.createElement("div",{className:"flex justify-center sm:justify-start flex-wrap"},o.a.createElement("label",{htmlFor:"button-file",className:Object(R.a)(_.produitImageUpload,"flex items-center justify-center relative w-128 h-128 rounded-4 mr-16 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5",N.ficheTechnique&&"hidden")},a.ficheReqInProgress?o.a.createElement(d.a,{size:24,className:_.buttonProgress}):o.a.createElement(l.a,{fontSize:"large",color:"action"},"arrow_upward")),N.ficheTechnique?o.a.createElement("div",{className:Object(R.a)(_.produitImageItem,"flex items-center cursor-pointer justify-center relative w-128 h-128 rounded-4 mr-16 mb-16 overflow-hidden  shadow-1 hover:shadow-5"),key:N.ficheTechnique.id,onClick:function(){return window.open(k.d+N.ficheTechnique.url,"_blank")}},o.a.createElement(b.a,{title:"Supprimer"},o.a.createElement(h.a,{className:_.produitImageFeaturedStar,onClick:function(e){e.stopPropagation(),t(U.Z(N.ficheTechnique))}},o.a.createElement(l.a,null,"delete"))),"image"===T.a.split(N.ficheTechnique,"/",1)[0]?o.a.createElement("img",{className:"max-w-none w-auto h-full",src:k.d+N.ficheTechnique.url,alt:"fiche"}):o.a.createElement(l.a,{color:"secondary",style:{fontSize:80}},"insert_drive_file")):"",o.a.createElement(g.a,{container:!0,spacing:3},o.a.createElement(g.a,{item:!0,xs:12,sm:6},o.a.createElement(u.a,{variant:"caption"},"- Taille maximale de fichier : 3 Mo"))))),3===Q&&o.a.createElement(g.a,{container:!0,spacing:2},o.a.createElement(g.a,{item:!0,xs:12,sm:6},o.a.createElement(v.a,{label:"ID vid\xe9o Youtube",id:"video",name:"video",variant:"outlined",onChange:function(e){se(e.target.value)},fullWidth:!0}),o.a.createElement(s.a,{className:"whitespace-no-wrap mt-10 mb-10",variant:"contained",fullWidth:!0,size:"large",color:"secondary",disabled:a.loadingRechercheVideo||!le,onClick:function(){t(U.fb(le))}},"Rechercher",a.loadingRechercheVideo&&o.a.createElement(d.a,{size:24,className:_.buttonProgress})),o.a.createElement(u.a,{variant:"h6",className:"mb-10"},o.a.createElement(l.a,{color:"secondary"},"info")," COMMENT OBTENIR L'ID DE LA VID\xc9O YOUTUBE?"," "),o.a.createElement(u.a,{className:"mb-10"},"Il n'est pas difficile d'obtenir l'ID vid\xe9o Youtube dans le navigateur ou via l'application. Suivez ces \xe9tapes:"),o.a.createElement(u.a,{variant:"h6",className:"mb-10"},"TROUVEZ L'ID DE LA VID\xc9O YOUTUBE VIA LE NAVIGATEUR"),o.a.createElement(u.a,{className:"mb-10"},o.a.createElement("ol",null,o.a.createElement("li",null,"Acc\xe9dez \xe0 votre vid\xe9o Youtube pr\xe9f\xe9r\xe9e"),o.a.createElement("li",null,"V\xe9rifiez l'URL dans le navigateur Web, par exemple. https://www.youtube.com/watch?v=JGwWNGJdvx8"),o.a.createElement("li",null,'L\'ID vid\xe9o est la partie entre "? V =" et "&", dans ce cas "JGwWNGJdvx8"'),o.a.createElement("li",null,'Parfois, l\'URL de la vid\xe9o YouTube ressemble \xe0 "https://youtube.be/JGwWNGJdvx"'),o.a.createElement("li",null,'Dans ce cas, l\'url de la vid\xe9o fait partie de la derni\xe8re barre oblique "/" et "&"'))),o.a.createElement(u.a,{className:"mb-10",variant:"h6"},"TROUVER UN ID VIDEO YOUTUBE DANS L'APPLICATION YOUTUBE"),o.a.createElement(u.a,{className:"mb-10"},o.a.createElement("ol",null,o.a.createElement("li",null,"Ouvrez l'application Youtube"),o.a.createElement("li",null,"Ouvrez la vid\xe9o dont vous souhaitez l'ID vid\xe9o"),o.a.createElement("li",null,"Cliquez sur le bouton Partager et choisissez le lien"),o.a.createElement("li",null,"Le lien est copi\xe9 dans votre presse-papiers et vous pouvez le coller n'importe o\xf9"),o.a.createElement("li",null,"Le lien ressemble \xe0 https://youtube.be/JGwWNGJdvx8"),o.a.createElement("li",null,'La vid\xe9o est la partie entre la derni\xe8re barre oblique "/" et "&", dans ce cas "JGwWNGJdvx8".')))),o.a.createElement(g.a,{item:!0,xs:12,sm:6},a.loadingRechercheVideo?o.a.createElement(G.a,{height:250,width:320,speed:2},o.a.createElement("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"320",height:"250"})):N.videos?o.a.createElement(o.a.Fragment,null,o.a.createElement(z.a,{videoId:N.videos,opts:{width:"460",playerVars:{showinfo:0,fs:0,modestbranding:1,rel:0}}}),o.a.createElement(V.a,{component:"button",variant:"body2",className:"text-red",onClick:function(){return q(T.a.set(Object(r.a)({},N),"videos",null))}},"X Supprimer cette vid\xe9o")):pe?"ID vid\xe9o n'existe pas dans la base de donn\xe9es YouTube":""))),innerScroll:!0})})}}]);