(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1049:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};t.default=n},1056:function(e,t,a){"use strict";var n=a(36),r=a(54),i=a(196),o=(a(1069),"[DEMANDES APP] REQUEST DEMANDES"),c="[DEMANDES APP] REMOVE DEMANDES",u="[DEMANDES APP] SET PARAMETRES DATA",s="[DEMANDES APP] CLEAN_UP",d="[DEMANDES APP] GET DEMANDES",l="[DEMANDES APP] SET DEMANDES SEARCH TEXT";function m(){return function(e){return e({type:s})}}function p(e){var t="";e.search.length>0&&e.search.map(function(e){return e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value)});var a=r.a.get("/api/demande_devis?page=".concat(e.page,"&del=0&statut=false").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:o}),a.then(function(t){return e({type:d,payload:t.data})})}}function f(e){var t="";e.search.length>0&&e.search.map(function(e){return e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value)});var a=r.a.get("/api/demande_devis?page=".concat(e.page,"&del=0&statut=1").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:o}),a.then(function(t){return e({type:d,payload:t.data})})}}function E(e){var t="";e.search.length>0&&e.search.map(function(e){return e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value)});var a=r.a.get("/api/demande_devis?page=".concat(e.page,"&del=1").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:o}),a.then(function(t){return e({type:d,payload:t.data})})}}function h(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={del:a};return function(u,s){return r.a.put("/api/demande_devis/".concat(e.id),o).then(function(e){return Promise.all([u({type:c}),u(i.b("demandes-devis")),u(!1===a?Object(n.B)({message:"Demande bien recup\xe9r\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}):Object(n.B)({message:"Demande bien supprim\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return u(!1===a?E(t):p(t))})})}}function g(e){return{type:u,parametres:e}}var v=a(40),A="[DEMANDE APP] REQUEST DEMANDE",b="[DEMANDE APP] GET DEMANDE",P="[DEMANDE APP] REQUEST SAVE",y="[DEMANDE APP] SAVE DEMANDE",D="[DEMANDE APP] SAVE ERROR";function O(e){var t=r.a.get("/api/demande_devis/".concat(e));return function(e){return e({type:A}),t.then(function(t){e({type:b,payload:t.data})}).catch(function(t){e({type:D,payload:v.y.parseApiErrors(t)})})}}function x(e,t){var a=r.a.put("/api/demande_devis/".concat(t),e);return function(e){return e({type:P}),a.then(function(t){return e(Object(n.B)({message:"Demande Modifi\xe9e"})),e(i.b("demandes-devis")),e({type:y,payload:t.data})}).catch(function(t){e({type:D,payload:v.y.parseApiErrors(t)})})}}var N="[DIALOG] OPEN",T="[DIALOG] CLOSE";function I(){return{type:T}}function S(e){return{type:N,options:e}}a.d(t,"e",function(){return o}),a.d(t,"j",function(){return u}),a.d(t,"a",function(){return s}),a.d(t,"c",function(){return d}),a.d(t,"i",function(){return l}),a.d(t,"k",function(){return m}),a.d(t,"o",function(){return p}),a.d(t,"p",function(){return f}),a.d(t,"n",function(){return E}),a.d(t,"s",function(){return h}),a.d(t,"t",function(){return g}),a.d(t,"d",function(){return A}),a.d(t,"b",function(){return b}),a.d(t,"f",function(){return P}),a.d(t,"g",function(){return y}),a.d(t,"h",function(){return D}),a.d(t,"m",function(){return O}),a.d(t,"r",function(){return x}),a.d(t,"l",function(){return I}),a.d(t,"q",function(){return S})},1069:function(e,t,a){"use strict";var n=a(54),r="[PORTAIL APP] REQUEST_DEMANDE_DEVIS",i="[PORTAIL APP] GET_DEMANDE_DEVIS",o="[PORTAIL APP] REQUEST_ACTUALITE",c="[PORTAIL APP] GET_ACTUALITE",u="[PORTAIL APP] REQUEST_FOCUS_PRODUITS",s="[PORTAIL APP] GET_FOCUS_PRODUITS",d="[PORTAIL APP] REQUEST_CATEGORIES",l="[PORTAIL APP] GET_CATEGORIES",m="[PORTAIL APP] CLEAN_UP_DEVIS",p="[PORTAIL APP] CLEAN_UP_PRODUCT",f="[PORTAIL APP] CLEAN_UP_NEW",E="[PORTAIL APP] CLEAN_UP_NEW";function h(){return function(e){return e({type:E})}}function g(){return function(e){return e({type:m})}}function v(){return function(e){return e({type:p})}}function A(){return function(e){return e({type:f})}}function b(){var e=n.a.get("/api/focus_categories_mobile");return function(t){return t({type:d}),e.then(function(e){return t({type:l,payload:e.data})})}}function P(){var e=n.a.get("/api/select_produits?produit[exists]=true");return function(t){return t({type:u}),e.then(function(e){return t({type:s,payload:e.data["hydra:member"]})})}}function y(){var e=n.a.get("/api/demande_achats?itemsPerPage=4&statut=1&isPublic=1&order[created]=desc&props[]=id&props[]=reference&props[]=titre&props[]=description&props[]=pays&props[]=ville&props[]=dateExpiration&props[]=created&props[]=slug");return function(t){return t({type:r}),e.then(function(e){return t({type:i,payload:e.data["hydra:member"]})})}}function D(){var e=n.a.get("/api/actualites?itemsPerPage=4&isActive=true&order[created]=desc");return function(t){return t({type:o}),e.then(function(e){return t({type:c,payload:e.data["hydra:member"]})})}}a.d(t,"k",function(){return r}),a.d(t,"g",function(){return i}),a.d(t,"i",function(){return o}),a.d(t,"e",function(){return c}),a.d(t,"l",function(){return u}),a.d(t,"h",function(){return s}),a.d(t,"j",function(){return d}),a.d(t,"f",function(){return l}),a.d(t,"b",function(){return m}),a.d(t,"d",function(){return p}),a.d(t,"c",function(){return f}),a.d(t,"a",function(){return E}),a.d(t,"m",function(){return h}),a.d(t,"n",function(){return g}),a.d(t,"p",function(){return v}),a.d(t,"o",function(){return A}),a.d(t,"q",function(){return b}),a.d(t,"r",function(){return P}),a.d(t,"t",function(){return y}),a.d(t,"s",function(){return D})},1093:function(e,t,a){"use strict";var n=a(46),r=a(8),i=a(1056),o=a(107),c={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,search:[],filter:{id:"created",direction:"desc"}},demandesDialog:{props:{open:!1}}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a:return Object(r.a)({},c);case i.e:return Object(r.a)({},e,{loading:!0});case i.c:return Object(r.a)({},e,{data:t.payload["hydra:member"],pageCount:o.a.hydraPageCount(t.payload),loading:!1});case i.i:return Object(r.a)({},e,{searchText:t.searchText});case i.j:return Object(r.a)({},e,{parametres:{page:t.parametres.page,search:t.parametres.search,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}});default:return e}},s={data:null,error:null,loading:!1,success:!1},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.d:case i.f:return Object(r.a)({},e,{loading:!0});case i.b:return Object(r.a)({},e,{data:t.payload,loading:!1});case i.g:return Object(r.a)({},e,{loading:!1,success:!0});case i.h:return Object(r.a)({},e,{error:t.payload,loading:!1,success:!1});default:return e}},l=a(36),m={state:!1,options:{children:"Hi"}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.f:return Object(r.a)({},e,{state:!0,options:Object(r.a)({},e.options,t.options)});case l.a:return Object(r.a)({},e,{state:!1});default:return e}},f=Object(n.d)({demandesDevis:u,demandeDevis:d,dialog:p});t.a=f},1323:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(23),i=a(0),o=a.n(i),c=a(98),u=a(1013),s=a(1035),d=a(1041),l=a(1032),m=a(1044),p=a(1027),f=a(1040),E=a(1020),h=a(1039),g=a(163),v=a(345),A=a(40),b=a(141),P=a(10),y=a(6),D=a(140),O=a(1056),x=a(1093),N=a(55),T=a.n(N),I=a(1049),S=a.n(I),L=Object(v.a)(function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},buttonProgress:{color:S.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},demandeDevisImageFeaturedStar:{position:"absolute",top:0,right:0,color:g.a[400],opacity:0},demandeDevisImageUpload:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut},select:{zIndex:999},demandeDevisImageItem:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,"&:hover":{"& $demandeDevisImageFeaturedStar":{opacity:.8}},"&.featured":{pointerEvents:"none",boxShadow:e.shadows[3],"& $demandeDevisImageFeaturedStar":{opacity:1},"&:hover $demandeDevisImageFeaturedStar":{opacity:1}}}}});t.default=Object(D.a)("demandeDevisApp",x.a)(function(e){var t=Object(y.b)(),a=Object(y.c)(function(e){return e.demandeDevisApp.demandeDevis}),g=Object(i.useState)(!1),v=Object(r.a)(g,2),D=v[0],x=v[1],N=Object(i.useRef)(null),I=Object(b.b)(),S=I.form,R=I.handleChange,j=I.setForm,_=L(e),C=Object(i.useState)(0),w=Object(r.a)(C,2),M=w[0],F=w[1];function U(){x(!1)}function q(){t(O.r(S,S.id))}return Object(i.useEffect)(function(){a.error&&(a.error.reference||a.error.statut||a.error.motifRejet||a.error.description||a.error.descriptionEn||a.error.descriptionEs||a.error.dateExpiration||a.error.isPublic||a.error.isAnonyme||a.error.sousSecteurs||a.error.budget)&&(N.current.updateInputsWithError(Object(n.a)({},a.error)),U(),a.error=null)},[a.error]),Object(i.useEffect)(function(){a.success&&(a.success=!1,a.data=null,a.error=null,e.history.push("/demandes_devis"))},[a.success]),Object(i.useEffect)(function(){!function(){var a=e.match.params.demandeId;t(O.m(a))}()},[t,e.match.params]),Object(i.useEffect)(function(){(a.data&&!S||a.data&&S&&a.data.id!==S.id)&&j(Object(n.a)({},a.data))},[S,a.data,j]),o.a.createElement(A.o,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:a.loading?"":S&&o.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},o.a.createElement("div",{className:"flex flex-col items-start max-w-full"},o.a.createElement(A.d,{animation:"transition.slideRightIn",delay:300},o.a.createElement(c.a,{className:"normal-case flex items-center sm:mb-12",role:"button",onClick:function(){return e.history.goBack()},color:"inherit"},o.a.createElement(u.a,{className:"mr-4 text-20"},"arrow_back"),"Retour")),o.a.createElement("div",{className:"flex items-center max-w-full"},o.a.createElement("div",{className:"flex flex-col min-w-0"},o.a.createElement(A.d,{animation:"transition.slideLeftIn",delay:300},o.a.createElement(c.a,{className:"text-16 sm:text-20 truncate"},S.produit?"R\xe9f\xe9rence de produit :"+S.produit.reference:"")),o.a.createElement(A.d,{animation:"transition.slideLeftIn",delay:300},o.a.createElement(c.a,{variant:"caption"},"D\xe9tails de la demande"))))),o.a.createElement(A.d,{animation:"transition.slideRightIn",delay:300},o.a.createElement(s.a,{className:"whitespace-no-wrap",variant:"contained",type:"submit",disabled:!D||a.loading,onClick:function(){return q()}},"Sauvegarder",a.loading&&o.a.createElement(d.a,{size:24,className:_.buttonProgress})))),contentToolbar:a.loading?o.a.createElement("div",{className:_.root},o.a.createElement(l.a,{color:"secondary"})):o.a.createElement(m.a,{value:M,onChange:function(e,t){F(t)},indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},o.a.createElement(p.a,{className:"h-64 normal-case",label:"D\xe9tails de la demande de devis"})),content:a.loading?"":S&&o.a.createElement("div",{className:"p-10  sm:p-24 max-w-2xl"},0===M&&o.a.createElement(T.a,{onValidSubmit:q,onValid:function(){x(!0)},onInvalid:U,ref:N,className:"flex pt-10 flex-col "},o.a.createElement(f.a,{container:!0,spacing:3,className:"mb-5"},o.a.createElement(f.a,{item:!0,xs:12,sm:4},o.a.createElement(A.F,{label:"Fournisseur",id:"fournisseur",name:"fournisseur",value:S.fournisseur?S.fournisseur.societe:"",variant:"outlined",InputProps:{readOnly:!0},fullWidth:!0})),o.a.createElement(f.a,{item:!0,xs:12,sm:4},o.a.createElement(A.F,{label:"R\xe9f. Produit",id:"reference",name:"reference",value:S.produit?S.produit.reference:"",variant:"outlined",InputProps:{readOnly:!0},fullWidth:!0})),o.a.createElement(f.a,{item:!0,xs:12,sm:4},o.a.createElement(A.F,{label:"Quantit\xe9",id:"quantity",name:"quantity",value:S.quantity?S.quantity:"",variant:"outlined",InputProps:{readOnly:!0},fullWidth:!0}))),o.a.createElement(E.a,null),o.a.createElement(f.a,{container:!0,spacing:3,className:"mt-5 mb-5"},o.a.createElement(f.a,{item:!0,xs:12,sm:4},o.a.createElement(A.F,{label:"Raison sociale",autoFocus:!0,id:"societe",name:"societe",value:S.societe,onChange:R,variant:"outlined",validations:{matchRegexp:/^[a-z]|([a-z][0-9])|([0-9][a-z])|([a-z][0-9][a-z])+$/i,minLength:2,maxLength:40},validationErrors:{minLength:"Raison sociale doit d\xe9passer 2 caract\xe8res alphanum\xe9riques",maxLength:"Raison sociale ne peut d\xe9passer 40 caract\xe8res alphanum\xe9riques",matchRegexp:"Raison sociale doit contenir des caract\xe8res alphanum\xe9riques"},required:!0,fullWidth:!0})),o.a.createElement(f.a,{item:!0,xs:12,sm:4},o.a.createElement(A.F,{type:"text",name:"contact",value:S.contact,onChange:R,label:"NOM & Pr\xe9nom",validations:{minLength:4},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 4"},InputProps:{endAdornment:o.a.createElement(h.a,{position:"end"},o.a.createElement(u.a,{className:"text-20",color:"action"},"person"))},variant:"outlined",required:!0,fullWidth:!0})),o.a.createElement(f.a,{item:!0,xs:12,sm:4},o.a.createElement(A.F,{type:"text",name:"email",label:"Email",validations:"isEmail",value:S.email,onChange:R,validationErrors:{isEmail:"Veuillez saisir un e-mail valide"},InputProps:{endAdornment:o.a.createElement(h.a,{position:"end"},o.a.createElement(u.a,{className:"text-20",color:"action"},"email"))},variant:"outlined",required:!0,fullWidth:!0})),o.a.createElement(f.a,{item:!0,xs:12,sm:4},o.a.createElement(A.F,{className:"mb-16",value:S.phone,onChange:R,type:"text",name:"phone",label:"T\xe9l\xe9phone",validations:{minLength:10,maxLength:13},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 10",maxLength:"La longueur maximale de caract\xe8re est 13"},InputProps:{endAdornment:o.a.createElement(h.a,{position:"end"},o.a.createElement(u.a,{className:"text-20",color:"action"},"local_phone"))},variant:"outlined",required:!0,fullWidth:!0})),o.a.createElement(f.a,{item:!0,xs:12,sm:8},o.a.createElement(A.F,{type:"text",name:"adresse",value:S.adresse,onChange:R,autoComplete:"adresse",label:"Adresse",validations:{minLength:10},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 10"},InputProps:{endAdornment:o.a.createElement(h.a,{position:"end"},o.a.createElement(u.a,{className:"text-20",color:"action"},"location_on"))},variant:"outlined",required:!0,fullWidth:!0}))),o.a.createElement(A.F,{className:"mb-16  w-full",type:"text",name:"message",value:S.message,onChange:R,label:"Message",validations:{minLength:10},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 10"},variant:"outlined",multiline:!0,rows:"4",required:!0}),o.a.createElement(f.a,{container:!0,spacing:3},o.a.createElement(f.a,{item:!0,xs:12,sm:6},o.a.createElement(A.a,{className:"mb-10",name:"statut",onChange:function(e){return function(e,t){j(P.a.set(Object(n.a)({},S),t,e.target.checked))}(e,"statut")},label:"Valider et alerter le fournisseur",value:S.statut}))))),innerScroll:!0})})}}]);