(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1051:function(e,t,n){"use strict";var a=n(3),r=n.n(a),c=n(4),i=n.n(c),o=n(0),s=n.n(o),u=(n(1),n(2)),l=n(7),d=n(98),m=s.a.forwardRef(function(e,t){var n=e.children,a=e.classes,c=e.className,o=e.disableTypography,l=void 0!==o&&o,m=i()(e,["children","classes","className","disableTypography"]);return s.a.createElement("div",r()({className:Object(u.a)(a.root,c),ref:t},m),l?n:s.a.createElement(d.a,{variant:"h6"},n))});t.a=Object(l.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(m)},1052:function(e,t,n){"use strict";var a=n(3),r=n.n(a),c=n(0),i=n.n(c),o=(n(1),n(7)),s=n(98),u=i.a.forwardRef(function(e,t){return i.a.createElement(s.a,r()({component:"p",variant:"body1",color:"textSecondary",ref:t},e))});t.a=Object(o.a)({root:{marginBottom:16}},{name:"MuiDialogContentText"})(u)},1072:function(e,t,n){"use strict";var a=n(54),r=n(36),c="[SECTEURS APP ADMIN] REQUEST SECTEURS",i="[SECTEURS APP ADMIN] GET SECTEURS",o="[SECTEURS APP ADMIN] SET SECTEURS SEARCH TEXT";function s(e){return{type:o,searchText:e.target.value}}function u(){var e=a.a.get("/api/secteurs?pagination=false&props[]=name&props[]=id&props[]=del&props[]=image");return function(t){return t({type:c}),e.then(function(e){return t({type:i,payload:e.data})})}}function l(e){var t={del:!0,name:e.name+"_deleted-"+e.id};return function(n){return n({type:c}),a.a.put("/api/secteurs/".concat(e.id),t).then(function(e){return Promise.all([n(Object(r.B)({message:"secteur bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return n(u())})}).catch(function(e){e.response.data&&e.response.data["hydra:description"]&&n(Object(r.B)({message:e.response.data["hydra:description"],anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))}).then(function(){return n(u())})}}var d=n(107),m=n(10),p="[SECTEUR APP APP] REQUEST SECTEUR",f="[SECTEUR APP APP] GET SECTEUR",E="[SECTEUR APP APP] SAVE ERROR",g="[SECTEUR APP APP] UPDATE SECTEUR",h="[SECTEUR APP APP] REQUEST SAVE_SECTEUR",P="[SECTEUR APP APP] UPLOAD REQUEST",b="[SECTEUR APP APP] UPLOAD ERROR",v="[SECTEUR APP APP] UPLOAD ATTACHEMENT",y="[SECTEUR APP APP] CLEAN_UP";function S(){return function(e){return e({type:y})}}function O(e){var t=a.a.get("/api/secteurs/".concat(e,"&props[]=name&props[]=id&props[]=image&props[]=del"));return function(e){return e({type:p}),t.then(function(t){e({type:f,payload:t.data})})}}function T(e,t){return e.image&&(e.image=e.image["@id"]),function(n,c){var i=a.a.put(e["@id"],e);return n({type:h}),i.then(function(e){return Promise.all([n({type:g,payload:e.data}),n(Object(r.B)({message:"Bien modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"})),t.push("/parametres/secteurs")])}).catch(function(e){n({type:E,payload:d.a.parseApiErrors(e)})})}}function A(e,t){e.image&&(e.image=e.image["@id"]);var n=a.a.post("/api/secteurs",e);return function(e){return e({type:h}),n.then(function(n){e(Object(r.B)({message:"Secteur sauvegard\xe9"})),e({type:g,payload:n.data}),t.push("/parametres/secteurs")}).catch(function(t){e({type:E,payload:d.a.parseApiErrors(t)})})}}function j(e){return function(t,n){var c=new FormData;c.append("file",e);var i=a.a.post("/api/image_secteur",c,{headers:{"Content-Type":"multipart/form-data"}});return t({type:P}),i.then(function(e){return Promise.all([e,t({type:v,payload:e.data}),t(Object(r.B)({message:"Image uploaded!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])}).catch(function(e){t({type:b}),t(Object(r.B)({message:m.a.map(d.a.parseApiErrors(e),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function R(){return{type:f,payload:{name:"",image:null}}}var x="[DIALOG] OPEN",C="[DIALOG] CLOSE";function N(){return{type:C}}function U(e){return{type:x,options:e}}n.d(t,"f",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"i",function(){return o}),n.d(t,"d",function(){return"[SECTEURS APP] REMOVE SECTEUR"}),n.d(t,"u",function(){return s}),n.d(t,"p",function(){return u}),n.d(t,"s",function(){return l}),n.d(t,"b",function(){return f}),n.d(t,"g",function(){return E}),n.d(t,"h",function(){return g}),n.d(t,"e",function(){return h}),n.d(t,"l",function(){return P}),n.d(t,"k",function(){return b}),n.d(t,"j",function(){return v}),n.d(t,"a",function(){return y}),n.d(t,"m",function(){return S}),n.d(t,"o",function(){return O}),n.d(t,"v",function(){return T}),n.d(t,"t",function(){return A}),n.d(t,"w",function(){return j}),n.d(t,"q",function(){return R}),n.d(t,"n",function(){return N}),n.d(t,"r",function(){return U})},1157:function(e,t,n){"use strict";var a=n(46),r=n(8),c=n(1072),i={entities:[],loading:!1,searchText:""},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.f:return Object(r.a)({},e,{loading:!0});case c.c:return Object(r.a)({},e,{entities:t.payload["hydra:member"],loading:!1});case c.i:return Object(r.a)({},e,{searchText:t.searchText});default:return e}},s={loadingSS:!1,requestSecteur:!1,error:null,data:null,secteurReqInProgress:!1,image:null},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.a:return Object(r.a)({},e,{loadingS:!1,requestSecteur:!1,error:null,data:null,secteurReqInProgress:!1,image:null});case c.d:return Object(r.a)({},e,{loadingS:!1});case c.e:case c.f:return Object(r.a)({},e,{loadingS:!0});case c.b:return Object(r.a)({},e,{data:t.payload,requestSecteur:!1,error:null});case c.h:return Object(r.a)({},e,{loadingS:!1,error:null});case c.g:return Object(r.a)({},e,{loadingS:!1,error:t.payload});case c.l:return Object(r.a)({},e,{secteurReqInProgress:!0});case c.j:return Object(r.a)({},e,{image:t.payload,secteurReqInProgress:!1});case c.k:return Object(r.a)({},e,{secteurReqInProgress:!1});default:return e}},l=n(36),d={state:!1,options:{children:"Hi"}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.f:return Object(r.a)({},e,{state:!0,options:Object(r.a)({},e.options,t.options)});case l.a:return Object(r.a)({},e,{state:!1});default:return e}},p=Object(a.d)({secteurs:o,secteur:u,dialog:m});t.a=p},1401:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(40),i=n(140),o=n(23),s=n(945),u=n(1029),l=n(958),d=n(1013),m=n(1051),p=n(1037),f=n(1052),E=n(1038),g=n(1035),h=n(78),P=n(6),b=n(347),v=n(1072);var y=Object(h.g)(function(e){var t=Object(P.c)(function(e){return e.secteursApp.secteurs.entities}),n=Object(P.c)(function(e){return e.secteursApp.secteurs.loading}),i=Object(P.c)(function(e){return e.secteursApp.secteurs.searchText}),h=Object(P.b)(),y=Object(a.useState)(null),S=Object(o.a)(y,2),O=S[0],T=S[1];return Object(a.useEffect)(function(){t&&T(function(e,t){var n=Object.keys(e).map(function(t){return e[t]});return 0===t.length?n:c.y.filterArrayByString(n,t)}(t,i))},[t,i]),O?r.a.createElement(c.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(b.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(t,n,a){return{className:"h-64 cursor-pointer",onClick:function(t,a){n&&e.history.push("/parametres/secteurs/"+n.original.id)}}},getTheadProps:function(e,t,n){return{className:"h-64 font-bold"}},data:O,columns:[{Header:"",Cell:function(e){return e.original.image?r.a.createElement(s.a,{className:"mr-8",alt:e.original.firstName,src:c.G+e.original.image.url}):r.a.createElement(s.a,{className:"mr-8",alt:e.original.firstName,src:"assets/images/avatars/images.png"})},className:"justify-center",width:64,sortable:!1},{Header:"Secteur",filterable:!0,accessor:"name"},{Header:"",Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(u.a,{title:"Editer"},r.a.createElement(l.a,{className:"text-teal text-20"},r.a.createElement(d.a,null,"edit"))),r.a.createElement(u.a,{title:"Supprimer"},r.a.createElement(l.a,{className:"text-red text-20",onClick:function(t){t.stopPropagation(),h(v.r({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(p.a,null,r.a.createElement(f.a,{id:"alert-dialog-description"},"Voulez vous vraiment supprimer cet enregistrement ?")),r.a.createElement(E.a,null,r.a.createElement(g.a,{onClick:function(){return h(v.n())},color:"primary"},"Non"),r.a.createElement(g.a,{onClick:function(t){h(v.s(e.original)),h(v.n())},color:"primary",autoFocus:!0},"Oui")))}))}},r.a.createElement(d.a,null,"delete"))))}}],defaultPageSize:10,loading:n,noDataText:"Aucun secteur trouv\xe9",loadingText:"Chargement...",ofText:"sur"})):null}),S=n(98),O=n(139),T=n(957),A=n(1014),j=n(18);var R=function(e){var t=Object(P.b)(),n=Object(P.c)(function(e){return e.fuse.settings.mainTheme}),a=Object(P.c)(function(e){return e.secteursApp.secteurs.searchText});return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(c.d,{animation:"transition.expandIn",delay:300},r.a.createElement(d.a,{className:"text-32 mr-0 sm:mr-12"},"work")),r.a.createElement(c.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(S.a,{className:"hidden sm:flex",variant:"h6"},"Gestion des Secteurs"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center pr-8 sm:px-12"},r.a.createElement(A.a,{theme:n},r.a.createElement(c.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(O.a,{className:"flex p-4 items-center w-full max-w-512 px-8 py-4",elevation:1},r.a.createElement(d.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(T.a,{placeholder:"Rechercher",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:function(e){return t(v.u(e))}}))))),r.a.createElement(c.d,{animation:"transition.slideRightIn",delay:300},r.a.createElement(g.a,{component:j.a,to:"/parametres/secteurs/new",className:"whitespace-no-wrap",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Ajouter nouveau secteur"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},x=n(1157),C=n(346);t.default=Object(i.a)("secteursApp",x.a)(function(){var e=Object(P.b)();return Object(a.useEffect)(function(){e(v.p())},[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.Helmet,null,r.a.createElement("title",null,"Secteurs | Les Achats Industriels"),r.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),r.a.createElement("meta",{name:"googlebot",content:"noindex"})),r.a.createElement(c.o,{classes:{content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(R,null),content:r.a.createElement(y,null),innerScroll:!0}))})}}]);