(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{1051:function(e,t,a){"use strict";var n=a(3),r=a.n(n),c=a(4),l=a.n(c),o=a(0),i=a.n(o),s=(a(1),a(2)),m=a(7),u=a(98),d=i.a.forwardRef(function(e,t){var a=e.children,n=e.classes,c=e.className,o=e.disableTypography,m=void 0!==o&&o,d=l()(e,["children","classes","className","disableTypography"]);return i.a.createElement("div",r()({className:Object(s.a)(n.root,c),ref:t},d),m?a:i.a.createElement(u.a,{variant:"h6"},a))});t.a=Object(m.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(d)},1052:function(e,t,a){"use strict";var n=a(3),r=a.n(n),c=a(0),l=a.n(c),o=(a(1),a(7)),i=a(98),s=l.a.forwardRef(function(e,t){return l.a.createElement(i.a,r()({component:"p",variant:"body1",color:"textSecondary",ref:t},e))});t.a=Object(o.a)({root:{marginBottom:16}},{name:"MuiDialogContentText"})(s)},1363:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),l=a(6),o=a(140),i=a(23),s=a(98),m=a(974),u=a(958),d=a(1051),p=a(1037),f=a(1052),E=a(1038),b=a(1035),h=a(1013),O=a(347),N=a(54),g=a(107),v=a(36),y=a(10),A="[COMMANDES FOURNISSEUR APP] GET COMMANDES",j="[COMMANDES FOURNISSEUR APP] SET SEARCH TEXT",S="[COMMANDES FOURNISSEUR APP] OPEN NEW COMMANDES DIALOG",C="[COMMANDES FOURNISSEUR APP] CLOSE NEW COMMANDES DIALOG",D="[COMMANDES FOURNISSEUR APP] OPEN EDIT COMMANDES DIALOG",x="[COMMANDES FOURNISSEUR APP] CLOSE EDIT COMMANDES DIALOG",M="[COMMANDES FOURNISSEUR APP] ADD COMMANDE",R="[COMMANDES FOURNISSEUR APP] SAVE ERROR",P="[COMMANDES FOURNISSEUR APP] UPDATE COMMANDE",w="[COMMANDES FOURNISSEUR APP] REMOVE COMMANDE",I="[COMMANDES FOURNISSEUR APP] CLEAN_UP";function U(e){var t=N.a.get("/api/fournisseurs/".concat(e,"/commandes?pagination=false&order[created]=desc"));return function(e){return t.then(function(t){e({type:A,payload:t.data["hydra:member"]})})}}function T(){return{type:S}}var F="[DIALOG] OPEN",L="[DIALOG] CLOSE";function k(){return{type:L}}var z=a(1034),H=a(64),B=a.n(H),J=Object(z.a)(function(e){return{chip2:{marginLeft:e.spacing(1),background:"#4caf50",color:"white",fontWeight:"bold",fontSize:"11px"},chipOrange:{marginLeft:e.spacing(1),background:"#ff9800",color:"white",fontWeight:"bold",fontSize:"11px"}}});var W=function(e){var t=Object(l.b)(),a=Object(l.c)(function(e){return e.commandesFrsApp.commandes.entities}),o=Object(l.c)(function(e){return e.commandesFrsApp.commandes.searchText}),g=Object(l.c)(function(e){return e.auth.user}),y=J(),A=Object(n.useState)(null),j=Object(i.a)(A,2),S=j[0],C=j[1];return Object(n.useEffect)(function(){a&&C(function(e,t){var a=Object.keys(e).map(function(t){return e[t]});return 0===t.length?a:c.y.filterArrayByString(a,t)}(a,o))},[a,o]),S?0===S.length?r.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},r.a.createElement(s.a,{color:"textSecondary",variant:"h5"},"Il n'y a pas de Commandes!")):r.a.createElement(c.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(O.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(e,a,n){return{className:"cursor-pointer",onClick:function(e,n){var r;a&&t((r=a.original,{type:D,data:r}))}}},getTheadProps:function(e,t,a){return{className:"h-64 font-bold"}},data:S,columns:[{Header:"Commande N\xb0",accessor:"id",filterable:!0},{Header:"Nombre de jetons",accessor:"nbrJeton",filterable:!0},{Header:"\u064fEtat",id:"isUse",filterable:!0,accessor:function(e){return e.isUse?r.a.createElement(m.a,{className:y.chip2,label:"Trait\xe9e"}):r.a.createElement(m.a,{className:y.chipOrange,label:"En attente"})}},{Header:"Date de commande",id:"created",filterable:!0,accessor:function(e){return B()(e.created).format("DD/MM/YYYY HH:mm")}},{Header:"",sortable:!1,width:64,Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(u.a,{className:"text-red text-20",onClick:function(a){var n;a.stopPropagation(),t((n={children:r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(p.a,null,r.a.createElement(f.a,{id:"alert-dialog-description"},e.original.isUse?"Vous ne pouvez pas supprimer cet enregistrement, car il est trait\xe9e!":"Voulez vous vraiment supprimer cet enregistrement ?")),r.a.createElement(E.a,null,r.a.createElement(b.a,{onClick:function(){return t(k())},color:"primary"},"Non"),e.original.isUse?r.a.createElement(b.a,{disabled:!0,color:"primary",autoFocus:!0},"Oui"):r.a.createElement(b.a,{onClick:function(a){var n,r;t((n=e.original,r=g.id,function(e,t){return N.a.delete(n["@id"]).then(function(t){return Promise.all([e({type:w}),e(Object(v.B)({message:"Commande bien supprim\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return e(U(r))})})})),t(k())},color:"primary",autoFocus:!0},"Oui")))},{type:F,options:n}))}},r.a.createElement(h.a,null,"delete")))}}],defaultPageSize:10,noDataText:"No Commande found"})):null},G=a(139),V=a(957),Y=a(1014);var _=function(e){var t=Object(l.b)(),a=Object(l.c)(function(e){return e.commandesFrsApp.commandes.searchText}),n=Object(l.c)(function(e){return e.fuse.settings.mainTheme});return r.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(c.d,{animation:"transition.expandIn",delay:300},r.a.createElement(h.a,{className:"text-32 mr-0 sm:mr-12"},"control_point_duplicate")),r.a.createElement(c.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(s.a,{className:"hidden sm:flex",variant:"h6"},"Liste des commandes"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},r.a.createElement(Y.a,{theme:n},r.a.createElement(c.d,{animation:"transition.slideDownIn",delay:300},r.a.createElement(G.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},r.a.createElement(h.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(V.a,{placeholder:"Rechercher...",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:function(e){return t({type:j,searchText:e.target.value})}}))))),r.a.createElement(c.d,{animation:"transition.slideRightIn",delay:300},r.a.createElement(b.a,{onClick:function(e){return t(T())},className:"whitespace-no-wrap",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Commander des jetons"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},$=a(8),q=a(1031),K=a(1026),X=a(1036),Q=a(1023),Z=a(1046),ee=a(141),te=a(55),ae=a.n(te),ne={name:""};var re=function(e){var t=Object(l.b)(),a=Object(l.c)(function(e){return e.commandesFrsApp.commandes.commandesDialog}),o=Object(l.c)(function(e){return e.auth.user}),m=Object(ee.b)(ne),u=m.form,d=m.setForm,f=Object(n.useState)(!1),h=Object(i.a)(f,2),O=h[0],A=h[1],j=Object(n.useRef)(null),S=Object(n.useCallback)(function(){"edit"===a.type&&a.data&&d(Object($.a)({},a.data)),"new"===a.type&&d(Object($.a)({},ne,a.data))},[a.data,a.type,d]);function D(){"edit"===a.type?t({type:x}):t({type:C})}return Object(n.useEffect)(function(){a.props.open&&S()},[a.props.open,S]),r.a.createElement(q.a,Object.assign({classes:{paper:"m-24"}},a.props,{onClose:D,fullWidth:!0,maxWidth:"xs"}),r.a.createElement(K.a,{position:"static",elevation:1},r.a.createElement(X.a,{className:"flex w-full"},r.a.createElement(s.a,{variant:"subtitle1",color:"inherit"},"new"===a.type?"Nouvelle Commande":"Editer Commande"))),r.a.createElement(ae.a,{onValidSubmit:function(e){var n,r;"new"===a.type?t((n=u,r=o.id,function(e,t){return N.a.post("/api/demande_jetons",n).then(function(t){return Promise.all([e({type:M}),e(Object(v.B)({message:"Commande bien ajout\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return e(U(r))})}).catch(function(t){e({type:R}),e(Object(v.B)({message:y.a.map(g.a.parseApiErrors(t),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})})):t(function(e,t){return function(a,n){return N.a.put(e["@id"],e).then(function(e){return Promise.all([a({type:P}),a(Object(v.B)({message:"Commande bien modifi\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return a(U(t))})}).catch(function(e){a({type:R}),a(Object(v.B)({message:y.a.map(g.a.parseApiErrors(e),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}(u,o.id)),D()},onValid:function(){A(!0)},onInvalid:function(){A(!1)},ref:j,className:"flex flex-col overflow-hidden"},r.a.createElement(p.a,{classes:{root:"p-24"}},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"min-w-50 pt-5 pr-5 font-bold"},"Nombre de jetons"),r.a.createElement(c.C,{className:"",name:"nbrJeton",required:!0,onChange:function(e){d(y.a.set(Object($.a)({},u),"nbrJeton",parseInt(e.target.value)))}},r.a.createElement(Q.a,{value:"5",checked:5===u.nbrJeton,control:r.a.createElement(Z.a,null),label:o.data.currency&&o.data.currency!==c.z?"5 ( 50,00 \u20ac/$   ) ":"5 ( 500,00 Dhs )"}),r.a.createElement(Q.a,{value:"10",checked:10===u.nbrJeton,control:r.a.createElement(Z.a,null),label:o.data.currency&&o.data.currency!==c.z?"10 ( 100,00 \u20ac/$   ) ":"10 ( 1000,00 Dhs )"}),r.a.createElement(Q.a,{value:"20",checked:20===u.nbrJeton,control:r.a.createElement(Z.a,null),label:o.data.currency&&o.data.currency!==c.z?"20 ( 200,00 \u20ac/$   ) ":"20 ( 2000,00 Dhs )"}))),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"caption",color:"inherit"},"Votre commande va \xeatre trait\xe9e d\xe8s que le virement sera fait,",r.a.createElement("br",null)," ci-dessous les coordonn\xe9es bancaires: ",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"caption",color:"inherit"},r.a.createElement("strong",{className:"uppercase"},"7e-Sky"),r.a.createElement("br",null),"ATTIJARIWAFA BANK",r.a.createElement("br",null),"CENTRE D'AFFAIRE CASA PORTE D'ANFA",r.a.createElement("br",null),"Casablanca, Maroc",r.a.createElement("br",null),r.a.createElement("strong",{className:"uppercase"}," RIB : 007 780 0004095000002798 03")," ",r.a.createElement("br",null),r.a.createElement("strong",{className:"uppercase"}," IBAN : MA64 007 780 0004095000002798 03"))),"new"===a.type?r.a.createElement(E.a,{className:"justify-between pl-16"},r.a.createElement(b.a,{variant:"contained",color:"primary",type:"submit",disabled:!O},"Ajouter")):r.a.createElement(E.a,{className:"justify-between pl-16"},u.isUse?"":r.a.createElement(b.a,{variant:"contained",color:"primary",type:"submit",disabled:!O},"Modifier"))))},ce=a(46),le={entities:null,searchText:"",selectedCommandesIds:[],routeParams:{},commandesDialog:{type:"new",props:{open:!1},data:null}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object($.a)({},e,{entities:t.payload});case I:return Object($.a)({},le);case j:return Object($.a)({},e,{searchText:t.searchText});case S:return Object($.a)({},e,{commandesDialog:{type:"new",props:{open:!0},data:null}});case C:return Object($.a)({},e,{commandesDialog:{type:"new",props:{open:!1},data:null}});case D:return Object($.a)({},e,{commandesDialog:{type:"edit",props:{open:!0},data:t.data}});case x:return Object($.a)({},e,{commandesDialog:{type:"edit",props:{open:!1},data:null}});default:return e}},ie={state:!1,options:{children:"Hi"}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.f:return Object($.a)({},e,{state:!0,options:Object($.a)({},e.options,t.options)});case v.a:return Object($.a)({},e,{state:!1});default:return e}},me=Object(ce.d)({commandes:oe,dialog:se}),ue=a(346);t.default=Object(o.a)("commandesFrsApp",me)(function(e){var t=Object(l.b)(),a=Object(l.c)(function(e){return e.auth.user}),o=Object(n.useRef)(null),i=e.match.params.open;return Object(n.useEffect)(function(){return a.id&&t(U(a.id)),function(){t(function(e){return e({type:I})})}},[t,a.id]),Object(n.useEffect)(function(){i&&t(T())},[t,i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.Helmet,null,r.a.createElement("title",null,"Commandes jetons | Les Achats Industriels"),r.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),r.a.createElement("meta",{name:"googlebot",content:"noindex"})),r.a.createElement(c.p,{classes:{contentWrapper:"p-0 sm:p-24 pb-80 sm:pb-80 h-full",content:"flex flex-col h-full",leftSidebar:"w-256 border-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(_,{pageLayout:o}),content:r.a.createElement(W,null),sidebarInner:!0,ref:o,innerScroll:!0}),r.a.createElement(re,null))})}}]);