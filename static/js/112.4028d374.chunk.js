(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{1532:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(89),c=a(1236),s=a(1219),o=a(39),m=a(1157),i=a(364),d=a(136),u=a(43),p=a(50),E=a(33),x=a(10);const f="[COMMANDE AB FRS APP] REQUEST COMMANDE",g="[COMMANDE AB FRS APP] GET COMMANDE",h="[COMMANDE AB FRS APP] REQUEST_SUGGESTION",b="[COMMANDE AB FRS APP] REQUEST_SOUS_SECTEURS",y="[COMMANDE AB FRS APP] GET SOUS_SECTEURS",v="[COMMANDE AB FRS APP] REQUEST SECTEURS",N="[COMMANDE AB FRS APP] GET SECTEURS",S="[COMMANDE AB FRS APP] REQUEST FOURNISSEUR",A="[COMMANDE AB FRS APP] GET FOURNISSEUR",C="[COMMANDE AB FRS APP] REQUEST OFFRES",O="[COMMANDE AB FRS APP] GET OFFRES",P="[COMMANDE AB FRS APP] REQUEST_DUREE",M="[COMMANDE AB FRS APP] GET_DUREE",k="[COMMANDE AB FRS APP] REQUEST SAVE",D="[COMMANDE AB FRS APP] SAVE COMMANDE",j="[COMMANDE AB FRS APP] SAVE_SUGGESTION",R="[COMMANDE AB FRS APP] SAVE ERROR",w="[COMMANDE AB FRS APP] REQUEST_PAIEMENT",F="[COMMANDE AB FRS APP] GET_PAIEMENT",T="[COMMANDE AB FRS APP] CLEAN_UP",_="[COMMANDE AB FRS APP] OPEN NEW COMMANDE DIALOG",z="[COMMANDE AB FRS APP] CLOSE NEW COMMANDE DIALOG",B="[COMMANDE AB FRS APP] OPEN EDIT COMMANDE DIALOG",I="[COMMANDE AB FRS APP] CLOSE EDIT COMMANDE DIALOG";function L(e){return{type:B,data:e}}function U(){const e=p.a.get("/api/offres");return t=>(t({type:C}),e.then(e=>t({type:O,payload:e.data["hydra:member"]})))}const G={data:null,loadingC:!1,offres:null,fournisseur:null,loadingSecteurs:!1,secteurs:null,sousSecteurs:null,error:null,loading:!1,loadingSuggestion:!1,loadingSS:!1,success:!1,successActivite:!1,paiements:null,durees:null,loadingOffres:!1,loadingDuree:!1,loadingP:!1,commandeDialog:{type:"new",props:{open:!1},data:null}};var H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:case k:return{...e,loading:!0,success:!1};case v:return{...e,loadingSecteurs:!0};case N:return{...e,secteurs:t.payload,loadingSecteurs:!1};case b:return{...e,loadingSS:!0};case y:return{...e,sousSecteurs:[...t.payload,{"@id":"/api/sous_secteurs/98",name:"Autre"}],loadingSS:!1};case w:return{...e,loadingP:!0};case F:return{...e,paiements:t.payload,loadingP:!1};case P:return{...e,loadingDuree:!0};case M:return{...e,durees:t.payload,loadingDuree:!1};case h:return{...e,loadingSuggestion:!0};case j:return{...e,successActivite:!0,loadingSuggestion:!1};case f:return{...e,loadingC:!0};case g:return{...e,data:t.payload,loadingC:!1};case D:return{...e,loading:!1,success:!0,data:t.payload};case T:return{...e,success:!1,data:null,error:null};case A:return{...e,fournisseur:t.payload,loading:!1};case C:return{...e,loadingOffres:!0};case O:return{...e,offres:t.payload,loadingOffres:!1};case R:return{...e,error:t.payload,loading:!1};case _:return{...e,commandeDialog:{type:"new",props:{open:!0},data:t.data}};case z:return{...e,commandeDialog:{type:"new",props:{open:!1},data:null}};case B:return{...e,commandeDialog:{type:"edit",props:{open:!0},data:t.data}};case I:return{...e,commandeDialog:{type:"edit",props:{open:!1},data:null}};default:return e}};const Y={state:!1,options:{children:"Hi"}};var Q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.f:return{...e,state:!0,options:{...e.options,...t.options}};case E.a:return{...e,state:!1};default:return e}};var W=Object(u.d)({commande:H,dialog:Q}),V=a(7),q=a(1233),$=a(1232),J=a(1221),K=a(1204),X=a(1212),Z=a(1227),ee=a(1140),te=a(1160),ae=a(59),re=a.n(ae),ne=a(16),le=(a(1252),a(2)),ce=a(1226);const se=Object(ce.a)(e=>({chip:{padding:2,background:"#ef5350",color:"white",fontWeight:"bold",fontSize:"11px",height:20},blue:{padding:2,background:"#3490dc",color:"white",fontWeight:"bold",fontSize:"11px",height:20},chip2:{padding:2,background:"#4caf50",color:"white",fontWeight:"bold",fontSize:"11px",height:20},chipOrange:{padding:2,background:"#ff9800",color:"white",fontWeight:"bold",fontSize:"11px",height:20}}));var oe=function(){const e=Object(V.b)(),[t,a]=Object(r.useState)(0),c=Object(V.c)(e=>{let{billingApp:t}=e;return t.commande}),s=Object(V.c)(e=>{let{auth:t}=e;return t.user}),m=Object(V.c)(e=>{let{auth:t}=e;return t.user.abonnement}),d=Object(V.c)(e=>{let{auth:t}=e;return t.user.loadingAbonnement}),[u,E]=Object(r.useState)(!1),[h,b]=Object(r.useState)(!0),[y,v]=Object(r.useState)(!1),[N,S]=Object(r.useState)(0),A=se();return Object(r.useEffect)(()=>{s.id&&e(function(e){const t=p.a.get("/api/fournisseurs/".concat(e,"/demande_abonnements?itemsPerPage=1&statut=false&order[created]=desc"));return e=>(e({type:f}),t.then(t=>e({type:g,payload:t.data["hydra:member"][0]})))}(s.id))},[e,s]),Object(r.useEffect)(()=>{if(!m)return;if(!m.statut)return void b(!1);let e=re()(m.expired).diff(re()(),"days");S(e),e<=0&&v(!0),m.statut&&e>0&&E(!0)},[m]),d?n.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},n.a.createElement(q.a,{color:"secondary"})," \u2002 Chargement ..."):n.a.createElement("div",{className:"p-24"},n.a.createElement(i.Helmet,null,n.a.createElement("title",null,"Mon abonnement | Les Achats Industriels"),n.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),n.a.createElement("meta",{name:"googlebot",content:"noindex"})),n.a.createElement(o.d,{animation:"transition.slideUpIn",delay:300},n.a.createElement($.a,{container:!0,spacing:4},n.a.createElement($.a,{item:!0,xs:12,sm:6,md:6,lg:6,xl:4},n.a.createElement("div",{className:"flex items-center justify-between"},n.a.createElement(l.a,{variant:"h6",className:"uppercase"},"Mon Pack"),n.a.createElement(J.a,{title:"Modifier votre pack"},n.a.createElement(ne.a,{to:"/billing/pack",className:""},n.a.createElement(K.a,{className:"text-orange"},"edit")))),n.a.createElement(X.a,null),n.a.createElement("div",{className:"mt-16"},m?n.a.createElement("table",{className:"table-auto"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Pack"),n.a.createElement("td",{className:" px-4 py-2"},m.offre&&m.offre.name)),n.a.createElement("tr",{className:"bg-gray-100"},n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Nbr. Activit\xe9s"),n.a.createElement("td",{className:" px-4 py-2"},m.offre&&m.offre.nbActivite+" Activit\xe9s")),n.a.createElement("tr",{className:"bg-gray-100"},n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Activit\xe9s"),n.a.createElement("td",{className:" px-4 py-2"},m.sousSecteurs&&x.a.join(x.a.map(m.sousSecteurs,"name"),", "))),n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Date de d\xe9but"),n.a.createElement("td",{className:" px-4 py-2"}," ",m.datePeiment&&re()(m.datePeiment).format("YYYY-MM-DD HH:mm"))),n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Date de renouvellement"),n.a.createElement("td",{className:" px-4 py-2"}," ",m.expired&&re()(m.expired).format("YYYY-MM-DD HH:mm"))),n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Dur\xe9e"),n.a.createElement("td",{className:" px-4 py-2"}," ",m.duree&&m.duree.name+" mois")),n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Statut"),n.a.createElement("td",{className:" px-4 py-2"},!h&&n.a.createElement(l.a,{variant:"caption",className:"text-red"},"D\xe9sactiv\xe9"),y&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:Object(le.a)("flex items-center px-8 py-4 mr-8 mt-2 rounded rounded-md text-white bg-red")},"Expir\xe9, ",re()(m.expired).fromNow()),n.a.createElement(J.a,{title:"Renouveler"},n.a.createElement(Z.a,{className:"mt-6",size:"small",variant:"contained",color:"secondary",onClick:function(){if(!m)return;const t={offre:m.offre,sousSecteurs:m.sousSecteurs,mode:m.mode,duree:m.duree,type:!0,suggestions:[],renew:!0};e(L(t))}},"Renouveler"))),u&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:Object(le.a)("flex items-center px-8 py-4 mr-8 mt-2 rounded rounded-md text-white",N>30?"bg-green":N>15&&N<=30?"bg-orange":"bg-red")},n.a.createElement(K.a,{className:"text-20 mr-4"},"check_circle_outline")," ",n.a.createElement("strong",null,"Actif")," ",n.a.createElement("span",{className:"hidden sm:flex"},", vous avez ",N," jour(s) restant(s) !")),N<30&&n.a.createElement(J.a,{title:"Renouveler"},n.a.createElement(Z.a,{className:"mt-6",size:"small",variant:"contained",color:"secondary"},"Renouveler"))))))):n.a.createElement("table",null,n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Pack"),n.a.createElement("td",{className:" px-4 py-2"},"Free")))))),c.loadingC?"Chargement...":c.data&&n.a.createElement($.a,{item:!0,xs:12,sm:6,md:6,lg:6,xl:4},n.a.createElement("div",{className:"flex items-center justify-between"},n.a.createElement(l.a,{variant:"h6",className:"uppercase"},"Derni\xe8re commande"),n.a.createElement(J.a,{title:"Modifier votre pack"},n.a.createElement(ee.a,{onClick:()=>e(L(c.data))},n.a.createElement(K.a,{className:"text-orange"},"edit")))),n.a.createElement(X.a,null),n.a.createElement("div",{className:"mt-16"},n.a.createElement("table",{className:"table-auto"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"R\xe9f\xe9rence"),n.a.createElement("td",{className:" px-4 py-2"},c.data.reference)),n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Pack"),n.a.createElement("td",{className:" px-4 py-2"},c.data.offre&&c.data.offre.name)),n.a.createElement("tr",{className:"bg-gray-100"},n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Nbr. Activit\xe9s"),n.a.createElement("td",{className:" px-4 py-2"},c.data.offre&&c.data.offre.nbActivite+" Activit\xe9s")),n.a.createElement("tr",{className:"bg-gray-100"},n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Activit\xe9s"),n.a.createElement("td",{className:" px-4 py-2"},c.data.sousSecteurs&&x.a.join(x.a.map(c.data.sousSecteurs,"name"),", "))),n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Date de cr\xe9ation"),n.a.createElement("td",{className:" px-4 py-2"}," ",c.data.created&&re()(c.data.created).format("YYYY-MM-DD HH:mm"))),n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Dur\xe9e"),n.a.createElement("td",{className:" px-4 py-2"}," ",c.data.duree&&c.data.duree.name+" mois")),n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Statut"),n.a.createElement("td",{className:" px-4 py-2"},!1===c.data.statut?n.a.createElement(te.a,{className:A.chipOrange,label:"En attente"}):n.a.createElement(te.a,{className:A.chip2,label:"Trait\xe9e"}))),n.a.createElement("tr",null,n.a.createElement("td",{className:" px-4 py-2 font-bold"},"Type"),n.a.createElement("td",{className:" px-4 py-2"},!1===c.data.type?n.a.createElement(te.a,{className:A.blue,label:"Nouvelle"}):n.a.createElement(te.a,{className:A.chip2,label:"Renouvellement"}))))))))))},me=a(1208),ie=a(1146),de=a(1209),ue=a(409),pe=a(163);const Ee=Object(m.a)(e=>({badge:{backgroundColor:e.palette.error.main,color:e.palette.getContrastText(e.palette.error.main)},price:{backgroundColor:e.palette.primary[600]},root:{width:"100%",backgroundColor:e.palette.background.paper,border:"1px solid #ddd"},populaire:{"&:before":{content:"ddddddd"}},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}));var xe=function(e){const t=Ee(),{currency:a}=e,l=Object(V.b)(),c=Object(V.c)(e=>{let{billingApp:t}=e;return t.commande});if(Object(r.useEffect)(()=>{l(U())},[l]),c.loadingOffres)return n.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},n.a.createElement(q.a,{color:"secondary"})," \u2002 Chargement ...");function s(e){l({type:_,data:{offre:e}})}return n.a.createElement("div",null,n.a.createElement("div",{className:"p-24 "},n.a.createElement("div",{className:"w-full max-w-2xl mx-auto"},n.a.createElement($.a,{container:!0},n.a.createElement($.a,{item:!0,xs:6,sm:6,md:4,container:!0},n.a.createElement($.a,{item:!0,xs:12,className:"h-160"}),n.a.createElement($.a,{item:!0,xs:12},n.a.createElement(me.a,{className:t.root},n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"Pr\xe9sentations de Produits / Services"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15 ml-16"},primary:"Images / Photos"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15 ml-16"},primary:"Fiches Techniques"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15 ml-16"},primary:"Vid\xe9os"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15 ml-16"},primary:"R\xe9ception des demandes par produit expos\xe9"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"Activit\xe9s"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"Mini-site de votre soci\xe9t\xe9"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56"},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"Catalogues produits"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"Catalogues produits PDF t\xe9l\xe9chargeable"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"R\xe9ception de demande de devis ( RFQ ) par mail"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"Gestion commerciale"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15 ml-16"},primary:"Cr\xe9ation d\u2019Agences / Services"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15 ml-16"},primary:"Affectation les demandes d\u2019achats ( RFQ )"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15 ml-16"},primary:"Suivi des ventes de vos Agences / Services"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"Pr\xe9sentation de produit en \xab\xa01ere Page\xa0\xbb"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 "},alignItems:"flex-start"},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"Banni\xe8re publicitaire 720x90px en \xab\xa01ere Page\xa0\xbb"}))))),n.a.createElement($.a,{item:!0,xs:6,sm:6,md:8,container:!0,spacing:1},n.a.createElement($.a,{item:!0,xs:12,sm:6,md:3,container:!0},n.a.createElement($.a,{item:!0,xs:12,style:{background:"linear-gradient(to top left, #ddd 10%, #ddd 30%, #fff 60%, #fff 60%)",borderRadius:"20px 20px 0 0",border:"1px solid #ddd"},className:"text-center h-160 "},n.a.createElement("div",{className:"text-black uppercase font-extrabold pt-16 text-24"},"FREE"),n.a.createElement("div",{className:"flex justify-center mt-12 text-black"},n.a.createElement("span",{className:" uppercase text-10 sm:text-12 md:text-14 lg:text-15"},a===o.z?o.z:"$"),n.a.createElement("span",{className:" uppercase font-extrabold text-32"},"00",n.a.createElement("span",{className:"text-10"},",00")))),n.a.createElement($.a,{item:!0,xs:12},n.a.createElement(me.a,{className:t.root},n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{justify:"center",classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15 "},primary:n.a.createElement(K.a,{style:{color:ue.a[500]}},"check_circle")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15 "},primary:"Max 5"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15 "},primary:"Max 5"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15 "},primary:"Max 5"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15 "},primary:"illimit\xe9"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"Limit\xe9 par Nbr. produits"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:n.a.createElement(K.a,{style:{color:ue.a[500]}},"check_circle")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:n.a.createElement(K.a,{style:{color:ue.a[500]}},"check_circle")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"illimit\xe9"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15"},primary:n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15 "},primary:n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15"},primary:n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")}))))),c.offres&&c.offres.map((e,r)=>n.a.createElement($.a,{item:!0,xs:12,sm:6,md:3,key:e.id,className:"flex hidden sm:block md:block lg:block "},n.a.createElement($.a,{item:!0,xs:12,style:{background:"linear-gradient(to top left, #ddd 10%, #ddd 30%, #fff 60%, #fff 60%)",borderRadius:"20px 20px 0 0",border:"1px solid #ddd"},className:"text-center h-160 "},n.a.createElement("div",{className:"text-green uppercase font-extrabold pt-16 text-16"},e.name),n.a.createElement("div",{className:"flex justify-center mt-12 text-green"},n.a.createElement("span",{className:" uppercase text-10 sm:text-12 md:text-14 lg:text-15"},a===o.z?o.z:"$"),n.a.createElement("span",{className:" uppercase font-extrabold text-32 md:text-24"},a===o.z?e.prixMad:e.prixEur,n.a.createElement("span",{className:"text-10"},",00 / mois",a===o.z&&" HT"))),n.a.createElement("div",{className:"mt-6"},n.a.createElement(Z.a,{variant:"contained",onClick:()=>s(e),color:"secondary"}," ","s\xe9lectionner"))),n.a.createElement($.a,{item:!0,xs:12},n.a.createElement(me.a,{className:t.root},n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{justify:"center",classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15 "},primary:n.a.createElement(K.a,{style:{color:ue.a[500]}},"check_circle")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15 "},primary:"5 par produit"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15 "},primary:"1 par produit"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15 "},primary:"1 par produit"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15 "},primary:"illimit\xe9"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"Jusqu'\xe0 ".concat(e.nbActivite," activit\xe9s")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:n.a.createElement(K.a,{style:{color:ue.a[500]}},"check_circle")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:n.a.createElement(K.a,{style:{color:ue.a[500]}},"check_circle")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:e.nbPageCatalogue?"".concat(e.nbPageCatalogue," pages"):n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:"illimit\xe9"})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:e.hasCommercial?n.a.createElement(K.a,{style:{color:ue.a[500]}},"check_circle"):n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15"},primary:e.hasCommercial?n.a.createElement(K.a,{style:{color:ue.a[500]}},"check_circle"):n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15 "},primary:e.hasCommercial?n.a.createElement(K.a,{style:{color:ue.a[500]}},"check_circle"):n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"text-10 sm:text-12 md:text-14 lg:text-15"},primary:e.hasCommercial?n.a.createElement(K.a,{style:{color:ue.a[500]}},"check_circle"):n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:e.focusProduit})),n.a.createElement(X.a,{component:"li"}),n.a.createElement(ie.a,{classes:{root:"h-60 sm:h-56 text-center"}},n.a.createElement(de.a,{classes:{primary:"font-bold text-10 sm:text-12 md:text-14 lg:text-15"},primary:e.hasBanner?"1 banni\xe8re (6 mois)":n.a.createElement(K.a,{style:{color:pe.a[500]}},"close")})))))))))))},fe=a(1223),ge=a(1244),he=a(1229),be=a(1230),ye=a(1325),ve=a(1326),Ne=a(1341);const Se=Object(m.a)(e=>({remise:{top:"-15px",left:10,backgroundColor:"#ecc94b",color:"#7b341e"}}));var Ae=function(e){const{durees:t,loading:a,selected:r,onChange:c,handleGetMontantPerMonth:s,handlegetMontantPerYear:m}=e,i=Se();function d(e){return parseFloat(e).toLocaleString("fr",{minimumFractionDigits:2})}return a?n.a.createElement("div",{className:"flex flex-1 items-center justify-center h-200 "},n.a.createElement(q.a,{color:"secondary"})," \u2002 Chargement ..."):n.a.createElement("div",{className:"md:px-44 mt-16"},n.a.createElement($.a,{container:!0,spacing:4},t&&t.map(e=>n.a.createElement($.a,{item:!0,xs:12,key:e["@id"],md:6},n.a.createElement("div",{onClick:()=>c(e),className:Object(le.a)("rounded rounded-md relative flex items-center justify-center p-24 h-200 w-full border-solid border-4 cursor-pointer hover:border-blue",r.duree&&(r.duree["@id"]===e["@id"]?" border-blue":" border-gray-400"))},n.a.createElement("div",{className:"mr-16"},r.duree&&(r.duree["@id"]===e["@id"]?n.a.createElement(K.a,{color:"secondary"},"radio_button_checked"):n.a.createElement(K.a,null,"radio_button_unchecked"))),n.a.createElement("div",{className:"flex flex-col items-start"},n.a.createElement("div",{className:"font-bold uppercase text-20 mb-6"},e.name," mois"),n.a.createElement("div",{className:"font-bold"},d(s(e)),r.currency===o.z?" ".concat(o.z," HT "):" $ ","par mois"),n.a.createElement(l.a,{variant:"caption"},d(m(e)),r.currency===o.z?" ".concat(o.z," HT  par an"):" $ par an")),e.remise?n.a.createElement("div",{className:Object(le.a)("absolute px-10 py-2 rounded rounded-md",i.remise)},"Economiser ",e.remise," %"):"")))))},Ce=a(1385),Oe=a(1231),Pe=a(51),Me=a.n(Pe),ke=a(1293),De=a(1224);const je=Object(ke.a)(e=>({root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:e.palette.grey["light"===e.palette.type?200:700]},bar:{borderRadius:5,backgroundColor:"#1a90ff"}}))(De.a),Re=Object(m.a)(e=>({border:{borderLeft:"11px solid "+e.palette.secondary.main+"!important",paddingLeft:11}}));var we=function(e){const t=Re(),{commande:a,selected:r,handleChipChange:c,handleDeleteActivite:s,handleAddSuggestion:m,handleChangeAutre:i}=e;return n.a.createElement(Me.a,null,r.offre&&n.a.createElement(Ce.a,{display:"flex",alignItems:"center",width:"50%",className:"mb-16 m-auto"},n.a.createElement(Ce.a,{minWidth:45},"Activit\xe9s"),n.a.createElement(Ce.a,{width:"100%",mr:1,ml:1},n.a.createElement(je,{variant:"determinate",value:(r.sousSecteurs.length+r.suggestions.length)/r.offre.nbActivite*100})),n.a.createElement(Ce.a,{minWidth:35},n.a.createElement(l.a,{variant:"body2",color:"textSecondary"},"".concat(r.sousSecteurs.length+r.suggestions.length,"/").concat(r.offre.nbActivite)))),n.a.createElement($.a,{container:!0,spacing:4},n.a.createElement($.a,{item:!0,xs:12,sm:6},n.a.createElement(o.E,{id:"secteurs",name:"secteurs",value:r.secteur,placeholder:"S\xe9lectionner.. ",textFieldProps:{label:"Secteurs",InputLabelProps:{shrink:!0},variant:"outlined"},className:"mb-16 z-50",options:a.secteurs,isLoading:a.loadingSecteurs,onChange:e=>c(e,"secteurs"),required:!0})),n.a.createElement($.a,{item:!0,xs:12,sm:6},n.a.createElement(o.E,{id:"activites",name:"activites",value:"",placeholder:"S\xe9lectionner.. ",textFieldProps:{label:"Activit\xe9s",InputLabelProps:{shrink:!0},variant:"outlined"},className:"z-9999",options:a.sousSecteurs,isLoading:a.loadingSS,onChange:e=>c(e,"activites"),required:!0}),r.showAutre?n.a.createElement(o.F,{className:"mt-16 w-full",type:"text",name:"autreActivite",value:r.autreActivite,onChange:i,label:"Autre Activit\xe9",validations:{minLength:2,maxLength:50},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 2",maxLength:"La longueur maximale de caract\xe8re est 50"},InputProps:{endAdornment:n.a.createElement(Oe.a,{position:"end"},n.a.createElement(ee.a,{color:"secondary",disabled:!r.autreActivite||r.autreActivite.length<2,onClick:e=>m(r.autreActivite)},n.a.createElement(K.a,null,"add_circle")))},variant:"outlined",required:!0}):"")),n.a.createElement($.a,{container:!0,spacing:4,className:"items-start"},n.a.createElement($.a,{item:!0,xs:12,sm:6},n.a.createElement(l.a,{className:"mb-16",variant:"h6"},n.a.createElement("span",{className:t.border},"Activit\xe9s choisies")),r.sousSecteurs.map(e=>n.a.createElement(te.a,{key:e.value,color:"secondary",label:e.label,onDelete:()=>s(e.value,"sousSecteurs"),className:"mr-8 mb-8"}))),n.a.createElement($.a,{item:!0,xs:12,sm:6},n.a.createElement(l.a,{className:"mb-16",variant:"h6"},n.a.createElement("span",{className:t.border},"Activit\xe9s sugg\xe9r\xe9es")),r.suggestions.map((e,t)=>n.a.createElement(te.a,{key:e.sousSecteur,color:"secondary",label:"".concat(e.secteur.label," : ").concat(e.sousSecteur),onDelete:()=>s(e.sousSecteur,"suggestions"),className:"mr-8 mb-8"})))))},Fe=a(1138),Te=a(1148),_e=a(1214),ze=a(1215),Be=a(1238);var Ie=function(e){const{commande:t,selected:a,handleChangeModePaiement:r}=e;return t.loadingP?n.a.createElement("div",{className:"flex flex-1 items-center justify-center h-200 "},n.a.createElement(q.a,{color:"secondary"})," \u2002 Chargement ..."):n.a.createElement("div",{className:"md:px-44 mt-16"},n.a.createElement(Fe.a,{component:"fieldset"},n.a.createElement(Te.a,{component:"legend"},"Mode de paimenet"),n.a.createElement(_e.a,{"aria-label":"mode",name:"mode1",value:a.mode,onChange:r},t.paiements.map(e=>n.a.createElement(ze.a,{value:e["@id"],key:e["@id"],control:n.a.createElement(Be.a,null),label:e.name})),n.a.createElement(ze.a,{value:"disabled",disabled:!0,control:n.a.createElement(Be.a,null),label:"Carte bancaire ( A venir )"}))))},Le=a(1273),Ue=a(1274),Ge=a(1275),He=a(1276),Ye=a(1277);const Qe=Object(m.a)(e=>({table:{minWidth:700}})),We=o.A;var Ve=function(e){const{selected:t,handleGetMontantPerMonth:a}=e,r=Qe();function l(e){return parseFloat(e).toLocaleString("fr",{minimumFractionDigits:2})}const c=a(t.duree),s=c*t.duree.name,m=We*s,i=m+s;return n.a.createElement("div",{className:"md:px-44 mt-16"},n.a.createElement(Le.a,{className:r.table,"aria-label":"spanning table"},n.a.createElement(Ue.a,null,n.a.createElement(Ge.a,null,n.a.createElement(He.a,{align:"center",colSpan:3},"Details"),n.a.createElement(He.a,{align:"right"},"Prix")),n.a.createElement(Ge.a,null,n.a.createElement(He.a,null,"PACK"),n.a.createElement(He.a,{align:"right"},"Dur\xe9e"),n.a.createElement(He.a,{align:"right"},"Prix par mois"),n.a.createElement(He.a,{align:"right"},"Somme"))),n.a.createElement(Ye.a,null,n.a.createElement(Ge.a,null,n.a.createElement(He.a,null,t.offre.name),n.a.createElement(He.a,{align:"right"},"".concat(t.duree.name," mois")),n.a.createElement(He.a,{align:"right"},t.duree.remise?n.a.createElement("span",{className:"line-through text-xs text-red"},t.currency===o.z?l(t.offre.prixMad):l(t.offre.prixEur)):""," ".concat(l(c))),n.a.createElement(He.a,{align:"right"},"".concat(l(s)))),t.currency===o.z?n.a.createElement(n.a.Fragment,null,n.a.createElement(Ge.a,null,n.a.createElement(He.a,{rowSpan:3}),n.a.createElement(He.a,{colSpan:2},"Total HT"),n.a.createElement(He.a,{align:"right"},"".concat(l(s)))),n.a.createElement(Ge.a,null,n.a.createElement(He.a,null,"TVA"),n.a.createElement(He.a,{align:"right"},"".concat((100*We).toFixed(0)," %")),n.a.createElement(He.a,{align:"right"},"".concat(l(m)))),n.a.createElement(Ge.a,null,n.a.createElement(He.a,{colSpan:2},"Total TTC"),n.a.createElement(He.a,{align:"right"},"".concat(l(i)," ").concat(o.z)))):n.a.createElement(Ge.a,null,n.a.createElement(He.a,{rowSpan:3}),n.a.createElement(He.a,{colSpan:2},"Total"),n.a.createElement(He.a,{align:"right"},"".concat(l(s)," $"))))))},qe=a(1242),$e=a.n(qe);const Je=Object(m.a)(e=>({remise:{top:"-15px",left:10,backgroundColor:"#ecc94b",color:"#7b341e"}}));var Ke=function(e){const{commande:t,selected:a,onChange:r}=e;return Je(),t.loadingOffres?n.a.createElement("div",{className:"flex flex-1 items-center justify-center h-200 "},n.a.createElement(q.a,{color:"secondary"})," \u2002 Chargement ..."):n.a.createElement("div",{className:"md:px-44 mt-16"},n.a.createElement($.a,{container:!0,spacing:4},t.offres&&t.offres.map(e=>n.a.createElement($.a,{item:!0,xs:12,key:e["@id"],md:4},n.a.createElement("div",{onClick:()=>r(e),className:Object(le.a)("rounded rounded-md relative flex items-center justify-center p-24 h-200 w-full border-solid border-4 cursor-pointer hover:border-blue",a.offre&&(a.offre["@id"]===e["@id"]?" border-blue":" border-gray-400"))},n.a.createElement("div",{className:"mr-8"},a.offre&&(a.offre["@id"]===e["@id"]?n.a.createElement(K.a,{color:"secondary"},"radio_button_checked"):n.a.createElement(K.a,null,"radio_button_unchecked"))),n.a.createElement("div",{className:"flex flex-col items-start"},n.a.createElement("div",{className:"font-bold uppercase text-20 mb-6"},e.name),n.a.createElement("div",{className:"font-bold"},function(e){return parseFloat(e).toLocaleString("fr",{minimumFractionDigits:2})}(a.currency===o.z?e.prixMad:e.prixEur),a.currency===o.z?" ".concat(o.z," HT "):" $ ","par mois")))))))};const Xe=Object(m.a)(e=>({badge:{backgroundColor:e.palette.error.main,color:e.palette.getContrastText(e.palette.error.main)},price:{backgroundColor:e.palette.primary[600]},root:{width:"100%",backgroundColor:e.palette.background.paper,border:"1px solid #ddd"},populaire:{"&:before":{content:"ddddddd"}},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},dialogPaper:{overflow:"visible"},buttonProgress:{color:$e.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var Ze=function(e){const t=Xe(),{currency:a}=e,c={currency:a,sousSecteurs:[],suggestions:[]},s=Object(V.b)(),m=Object(V.c)(e=>{let{billingApp:t}=e;return t.commande}),i=Object(V.c)(e=>{let{billingApp:t}=e;return t.commande.commandeDialog}),[d,u]=Object(r.useState)(0),[f,g]=Object(r.useState)(c),h="new"===i.type?["Dur\xe9e","Activit\xe9s","Paiement"]:["Offre","Dur\xe9e","Activit\xe9s","Paiement"],S=Object(r.useCallback)(()=>{"edit"===i.type&&i.data&&(s(U()),g({...i.data,sousSecteurs:i.data.sousSecteurs.map(e=>({value:e["@id"],label:e.secteur.name+": "+e.name})),mode:i.data.mode["@id"],currency:a})),"new"===i.type&&g({...c,...i.data})},[i.data,i.type,g]);function A(e){g({...f,mode:e.target.value})}function C(e){g({...f,autreActivite:e.target.value})}function O(e,t){if(g({...f,showAutre:!1}),"activites"===t){if("/api/sous_secteurs/98"===e.value)return void g({...f,showAutre:!0});if(f.sousSecteurs.length+f.suggestions.length===f.offre.nbActivite)return;if(!x.a.find(f.sousSecteurs,["value",e.value])){let t=e;t.label=f.secteur.label+": "+t.label,g({...f,sousSecteurs:[t,...f.sousSecteurs]})}}else e.value&&(g({...f,secteur:e}),s(function(e){const t=p.a.get("".concat(e,"/sous_secteurs?pagination=false&props[]=id&props[]=name"));return e=>(e({type:b}),t.then(t=>{e({type:y,payload:t.data["hydra:member"]})}))}(e.value)))}function j(e){if(e.length<2)return;if(x.a.find(f.suggestions,["sousSecteur",e]))return void g({...f,autreActivite:null});if(f.sousSecteurs.length+f.suggestions.length===f.offre.nbActivite)return void g({...f,autreActivite:null});let t={secteur:f.secteur,sousSecteur:e};g({...f,suggestions:[t,...f.suggestions],autreActivite:null})}function _(e,t){if("suggestions"!==t)g({...f,sousSecteurs:x.a.reject(f.sousSecteurs,function(t){return t.value===e})});else{const t=f.suggestions.filter(t=>t.sousSecteur!==e);g({...f,suggestions:t})}}function B(e){g({...f,duree:e})}function L(e){g({...f,offre:e})}function G(e){if(f.offre&&e)return e.remise?f.currency===o.z?f.offre.prixMad-f.offre.prixMad*e.remise/100:f.offre.prixEur-f.offre.prixEur*e.remise/100:a===o.z?f.offre.prixMad:f.offre.prixEur}function H(e){if(f.offre&&e)return 12*G(e)}Object(r.useEffect)(()=>{i.props.open&&S()},[i.props.open,S]),console.log(m.success),Object(r.useEffect)(()=>{if(m.success)return console.log("fff"),"new"===i.type?u(4):u(5),()=>{s(e=>e({type:T}))}},[m.success,u]),Object(r.useEffect)(()=>{s(function(){const e=p.a.get("/api/durees");return t=>(t({type:P}),e.then(e=>{t({type:M,payload:e.data["hydra:member"]})}))}())},[s]),Object(r.useEffect)(()=>{s(function(){const e=p.a.get("/api/secteurs?pagination=false&props[]=id&props[]=name&order[name]=asc");return t=>(t({type:v}),e.then(e=>{t({type:N,payload:e.data["hydra:member"]})}))}())},[s]),Object(r.useEffect)(()=>{s(function(){const e=p.a.get("/api/paiements");return t=>(t({type:w}),e.then(e=>{t({type:F,payload:e.data["hydra:member"]})}))}())},[s]),Object(r.useEffect)(()=>{m.durees&&!f.duree&&g({...f,duree:m.durees[0]})},[f,m.durees,g]);const Y=()=>{"edit"===i.type?s({type:I}):s({type:z}),g({currency:a,sousSecteurs:[],suggestions:[]}),u(0)},Q=()=>{u(e=>e+1)};function W(){(f.sousSecteurs.length||f.suggestions.length)&&f.mode&&f.offre&&("edit"===i.type?f.renew?s(function(e){var t={...e,offre:e.offre["@id"],sousSecteurs:x.a.map(e.sousSecteurs,function(e,t){return e.value}),mode:e.mode,duree:e.duree["@id"],suggestions:e.suggestions};const a=p.a.post("/api/demande_abonnements",t);return e=>(e({type:k}),a.then(t=>e({type:D,payload:t.data})).catch(t=>{e({type:R}),e(Object(E.B)({message:x.a.map(o.y.parseApiErrors(t),function(e,t){return e+" "}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))}))}(f)):s(function(e){var t={...e,offre:e.offre["@id"],sousSecteurs:x.a.map(e.sousSecteurs,function(e,t){return e.value}),mode:e.mode,duree:e.duree["@id"],suggestions:e.suggestions};const a=p.a.put(e["@id"],t);return e=>(e({type:k}),a.then(t=>e({type:D,payload:t.data})).catch(t=>{e({type:R}),e(Object(E.B)({message:x.a.map(o.y.parseApiErrors(t),function(e,t){return e+" "}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))}))}(f)):s(function(e){var t={offre:e.offre["@id"],sousSecteurs:x.a.map(e.sousSecteurs,function(e,t){return e.value}),mode:e.mode,duree:e.duree["@id"],suggestions:e.suggestions};const a=p.a.post("/api/demande_abonnements",t);return e=>(e({type:k}),a.then(t=>e({type:D,payload:t.data})).catch(t=>{e({type:R}),e(Object(E.B)({message:x.a.map(o.y.parseApiErrors(t),function(e,t){return e+" "}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))}))}(f)))}return n.a.createElement("div",null,n.a.createElement(fe.a,Object.assign({fullWidth:!0,maxWidth:"md",classes:{paperScrollPaper:t.dialogPaper}},i.props,{disableBackdropClick:!0,disableEscapeKeyDown:!0,onClose:Y,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"}),n.a.createElement(ge.a,{onClose:Y,className:"flex flex-col text-center",id:"alert-dialog-title"},n.a.createElement("p",{className:"font-extrabold uppercase"},"Activation d'abonnement"),h&&n.a.createElement(ye.a,{activeStep:d,alternativeLabel:!0},h.map(e=>n.a.createElement(ve.a,{key:e},n.a.createElement(Ne.a,null,e))))),n.a.createElement(he.a,{dividers:!0,className:Object(le.a)("min-h-xs text-center",t.dialogPaper)},n.a.createElement(l.a,{variant:"h6"},f.offre&&d<=2&&f.offre.name),n.a.createElement("div",null,"new"===i.type?function(e){switch(e){case 0:return n.a.createElement(Ae,{durees:m.durees,loading:m.loadingDuree,selected:f,handleGetMontantPerMonth:G,handlegetMontantPerYear:H,onChange:B});case 1:return n.a.createElement(we,{commande:m,selected:f,handleChipChange:O,handleChangeAutre:C,handleAddSuggestion:j,handleDeleteActivite:_});case 2:return n.a.createElement(Ie,{commande:m,selected:f,handleChangeModePaiement:A});case 3:return n.a.createElement(Ve,{selected:f,handleGetMontantPerMonth:G});case 4:return n.a.createElement("div",{className:"flex flex-col  items-center justify-center h-full"},n.a.createElement(K.a,{style:{color:$e.a[600],fontSize:120}},"done"),n.a.createElement(l.a,{color:"textSecondary",variant:"h5"},"Votre commande d'abonnement est bien enregistr\xe9e, un mail vous sera envoy\xe9 d\xe8s la validation de votre commande. ",n.a.createElement("br",null),"Nous vous remercions pour votre confiance!"));default:return""}}(d):function(e){switch(e){case 0:return n.a.createElement(Ke,{commande:m,selected:f,onChange:L});case 1:return n.a.createElement(Ae,{durees:m.durees,loading:m.loadingDuree,selected:f,handleGetMontantPerMonth:G,handlegetMontantPerYear:H,onChange:B});case 2:return n.a.createElement(we,{commande:m,selected:f,handleChipChange:O,handleChangeAutre:C,handleAddSuggestion:j,handleDeleteActivite:_});case 3:return n.a.createElement(Ie,{commande:m,selected:f,handleChangeModePaiement:A});case 4:return n.a.createElement(Ve,{selected:f,handleGetMontantPerMonth:G});case 5:return n.a.createElement("div",{className:"flex flex-col  items-center justify-center h-full"},n.a.createElement(K.a,{style:{color:$e.a[600],fontSize:120}},"done"),n.a.createElement(l.a,{color:"textSecondary",variant:"h5"},"Votre commande d'abonnement est bien enregistr\xe9e, un mail vous sera envoy\xe9 d\xe8s la validation de votre commande. ",n.a.createElement("br",null),"Nous vous remercions pour votre confiance!"));default:return""}}(d))),n.a.createElement(be.a,{className:"flex justify-between"},n.a.createElement(Z.a,{onClick:Y,disabled:m.loading,color:"primary"},d>=4&&"new"===i.type||d>=5&&"edit"===i.type?"Fermer":"Annuler"),n.a.createElement("div",null,n.a.createElement(Z.a,{disabled:0===d||m.loading,onClick:()=>{u(e=>e-1)},className:Object(le.a)(t.backButton,(d>=4&&"new"===i.type||d>=5&&"edit"===i.type)&&"hidden")},"pr\xe9c\xe9dent"),"new"===i.type?function(e){switch(e){case 0:return n.a.createElement(Z.a,{variant:"contained",color:"primary",onClick:Q}," ","Suivant");case 1:return n.a.createElement(Z.a,{variant:"contained",color:"primary",disabled:!f.sousSecteurs.length&&!f.suggestions.length,onClick:Q}," ","Suivant");case 2:return n.a.createElement(Z.a,{variant:"contained",color:"primary",disabled:!f.mode,onClick:Q}," ","Suivant");case 3:return n.a.createElement(Z.a,{variant:"contained",color:"primary",disabled:m.loading||!f.sousSecteurs.length&&!f.suggestions.length||!f.mode||!f.offre,onClick:W},m.loading&&n.a.createElement(q.a,{size:24,className:t.buttonProgress}),"Passer la commande");default:return""}}(d):function(e){switch(e){case 0:case 1:return n.a.createElement(Z.a,{variant:"contained",color:"primary",onClick:Q}," ","Suivant");case 2:return n.a.createElement(Z.a,{variant:"contained",color:"primary",disabled:!f.sousSecteurs.length&&!f.suggestions.length,onClick:Q}," ","Suivant");case 3:return n.a.createElement(Z.a,{variant:"contained",color:"primary",disabled:!f.mode,onClick:Q}," ","Suivant");case 4:return n.a.createElement(Z.a,{variant:"contained",color:"primary",disabled:m.loading||!f.sousSecteurs.length&&!f.suggestions.length||!f.mode||!f.offre,onClick:W},m.loading&&n.a.createElement(q.a,{size:24,className:t.buttonProgress}),"Passer la commande");default:return""}}(d)))))};const et=Object(m.a)(e=>({content:{"& canvas":{maxHeight:"100%"}}}));t.default=Object(d.a)("billingApp",W)(function(e){const t=et(e),a=Object(V.b)(),m=Object(r.useRef)(null),[d,u]=Object(r.useState)(0),p=Object(V.c)(e=>{let{auth:t}=e;return t.user}),E=e.match.params,{tab:x}=E,f=Object(V.c)(e=>{let{auth:t}=e;return t.user.abonnement});return Object(r.useEffect)(()=>{if(x)switch(x){case"pack":return u(2);case"renew":return function(){if(!f)return;const e={offre:f.offre,sousSecteurs:f.sousSecteurs,mode:f.mode,duree:f.duree,type:!0,suggestions:[],renew:!0};a(L(e))}();default:return u(0)}},[x,u]),n.a.createElement(n.a.Fragment,null,n.a.createElement(i.Helmet,null,n.a.createElement("title",null,"Facturations | Les Achats Industriels"),n.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),n.a.createElement("meta",{name:"googlebot",content:"noindex"})),n.a.createElement(o.p,{classes:{toolbar:"min-h-48 h-48",rightSidebar:"w-288",content:t.content},header:n.a.createElement("div",{className:"flex flex-col justify-between flex-1 px-24 pt-24"},n.a.createElement("div",{className:"flex justify-between"},n.a.createElement(l.a,{className:"py-0 sm:py-24",variant:"h4"},"Facturations"))),contentToolbar:n.a.createElement(c.a,{value:d,onChange:function(e,t){u(t)},indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"off",className:"w-full border-b-1 px-24"},n.a.createElement(s.a,{className:"text-14 font-600 normal-case",label:"Mon abonnement"}),n.a.createElement(s.a,{className:"text-14 font-600 normal-case",label:"Mon historique de facturation"}),n.a.createElement(s.a,{className:"text-14 font-600 normal-case",label:"Les Packs d'abonnements"})),content:n.a.createElement("div",{className:"p-12"},0===d&&n.a.createElement(oe,null),2===d&&n.a.createElement(xe,{currency:p.data?p.data.currency:o.z})),ref:m}),n.a.createElement(Ze,{currency:p.data?p.data.currency:o.z}))})}}]);