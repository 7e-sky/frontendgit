(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{1270:function(e,t,a){"use strict";var r=a(33),n=a(50);const i="[ACTUALITES APP] REQUEST ACTUALITES",c="[ACTUALITES APP] REMOVE ACTUALITES",l="[ACTUALITES APP] STATUT ACTUALITES",s="[ACTUALITES APP] SET PARAMETRES DATA",o="[ACTUALITES APP] CLEAN_UP",u="[USERS APP] GET ACTUALITES",d="[USERS APP] SET ACTUALITES SEARCH TEXT";function p(){return e=>e({type:o})}function m(e){var t=e.description?"=".concat(e.description):"";const a=n.a.get("/api/actualites?page=".concat(e.page,"&description").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return e=>(e({type:i}),a.then(t=>e({type:u,payload:t.data})))}function g(e,t){return a=>{return n.a.delete("/api/actualites/".concat(e.id)).then(e=>Promise.all([a({type:c}),a(Object(r.B)({message:"Actualite bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>a(m(t))))}}function f(e,t,a){let i={isActive:t};return(c,s)=>{return n.a.put("/api/actualites/".concat(e.id),i).then(e=>Promise.all([c({type:l}),c(Object(r.B)({message:t?"Cette actualit\xe9 est publi\xe9e aux publics":"Cette actualit\xe9 est priv\xe9e",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>c(m(a))))}}function E(e){return{type:s,parametres:e}}var A=a(39),h=a(10);const T="[ACTUALITE APP] REQUEST ACTUALITE",P="[ACTUALITE APP] GET ACTUALITE",y="[ACTUALITE APP] REQUEST SAVE",b="[ACTUALITE APP] SAVE ACTUALITE",C="[ACTUALITE APP] SAVE ERROR",v="[ACTUALITE APP] UPLOAD ATTACHEMENT",x="[ACTUALITE APP] UPLOAD REQUEST",S="[ACTUALITE APP] UPLOAD ERROR",U="[ACTUALITE APP] REQUEST DELETE",I="[ACTUALITE APP] DELETE SUCCESS";function O(e){const t=n.a.get("/api/actualites?slug=".concat(e));return e=>(e({type:T}),t.then(t=>{e({type:P,payload:t.data["hydra:member"]})}).catch(t=>{e({type:C,payload:A.y.parseApiErrors(t)})}))}function j(e){e.image&&(e.image=e.image["@id"]);const t=n.a.post("/api/actualites",e);return e=>(e({type:y}),t.then(t=>(e(Object(r.B)({message:"Actualit\xe9 enregistr\xe9 avec succ\xe8s"})),e({type:b,payload:t.data}))).catch(t=>{e({type:C,payload:A.y.parseApiErrors(t)})}))}function L(e,t){e.image&&(e.image=e.image["@id"]);const a=n.a.put("/api/actualites/".concat(t),e);return e=>(e({type:y}),a.then(t=>(e(Object(r.B)({message:"Actualit\xe9 modifi\xe9 avec succ\xe8s"})),e({type:b,payload:t.data}))).catch(t=>{e({type:C,payload:A.y.parseApiErrors(t)})}))}function N(e){return(t,a)=>{const i=new FormData;i.append("file",e);const c=n.a.post("/api/actualite_images",i,{headers:{"Content-Type":"multipart/form-data"}});return t({type:x}),c.then(e=>Promise.all([e,t({type:v,payload:e.data}),t(Object(r.B)({message:"Document t\xe9l\xe9charg\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])).catch(e=>{t({type:S}),t(Object(r.B)({message:h.a.map(A.y.parseApiErrors(e),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function R(){return{type:P,payload:{titre:"",description:"",source:"",image:null}}}a.d(t,"g",function(){return i}),a.d(t,"m",function(){return s}),a.d(t,"a",function(){return o}),a.d(t,"d",function(){return u}),a.d(t,"l",function(){return d}),a.d(t,"q",function(){return p}),a.d(t,"s",function(){return m}),a.d(t,"v",function(){return g}),a.d(t,"e",function(){return f}),a.d(t,"x",function(){return E}),a.d(t,"f",function(){return T}),a.d(t,"c",function(){return P}),a.d(t,"i",function(){return y}),a.d(t,"j",function(){return b}),a.d(t,"k",function(){return C}),a.d(t,"n",function(){return v}),a.d(t,"p",function(){return x}),a.d(t,"o",function(){return S}),a.d(t,"h",function(){return U}),a.d(t,"b",function(){return I}),a.d(t,"r",function(){return O}),a.d(t,"w",function(){return j}),a.d(t,"u",function(){return L}),a.d(t,"y",function(){return N}),a.d(t,"t",function(){return R})},1357:function(e,t,a){"use strict";var r=a(43),n=a(1270),i=a(102);const c={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,description:"",filter:{id:"created",direction:"desc"}}};var l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.a:return{...e,data:[]};case n.g:return{...e,loading:!0};case n.d:return{...e,data:t.payload["hydra:member"],pageCount:i.a.hydraPageCount(t.payload),loading:!1};case n.l:return{...e,searchText:t.searchText};case n.m:return{...e,parametres:{page:t.parametres.page,description:t.parametres.description,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}};default:return e}};const s={data:null,error:null,loading:!1,success:!1,imageReqInProgress:!1,deleteReqInProgress:!1,image:null,image_deleted:null};var o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.f:case n.i:return{...e,loading:!0};case n.p:return{...e,imageReqInProgress:!0};case n.h:return{...e,deleteReqInProgress:!0};case n.n:return{...e,image:t.payload,imageReqInProgress:!1};case n.b:return{...e,deleteReqInProgress:!1,image_deleted:t.id};case n.o:return{...e,imageReqInProgress:!1};case n.c:return{...e,data:t.payload[0]?t.payload[0]:t.payload,loading:!1};case n.j:return{...e,loading:!1,success:!0};case n.k:return{...e,error:t.payload,loading:!1,success:!1};default:return e}};const u=Object(r.d)({actualites:l,actualite:o});t.a=u},1591:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(39),c=a(136),l=a(1221),s=a(1140),o=a(1204),u=a(71),d=a(1270),p=a(7),m=a(59),g=a.n(m),f=a(365),E=a(10);var A=Object(u.g)(function(e){const t=Object(p.b)(),a=Object(p.c)(e=>{let{actualiteApp:t}=e;return t.actualites.data}),c=Object(p.c)(e=>{let{actualiteApp:t}=e;return t.actualites.loading}),u=Object(p.c)(e=>{let{actualiteApp:t}=e;return t.actualites.pageCount}),m=Object(p.c)(e=>{let{actualiteApp:t}=e;return t.actualites.parametres}),A=Object(p.c)(e=>{let{actualiteApp:t}=e;return t.actualites.searchText}),[h,T]=Object(r.useState)(null);return Object(r.useEffect)(()=>{a&&T(function(e,t){const a=Object.keys(e).map(t=>e[t]);return 0===t.length?a:i.y.filterArrayByString(a,t)}(a,A))},[a,A]),h?n.a.createElement(i.d,{animation:"transition.slideUpIn",delay:300},n.a.createElement(f.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:(t,a,r)=>({className:"h-64 cursor-pointer",onClick:(t,r)=>{a&&e.history.push("/admin/actualites/"+a.original.slug)}}),getTheadProps:(e,t,a)=>({className:"h-64 font-bold"}),data:h,columns:[{Header:"",accessor:"image",Cell:e=>e.original.image?n.a.createElement("img",{className:"w-full block rounded",src:i.G+e.original.image.url,alt:e.original.titre}):n.a.createElement("img",{className:"w-full block rounded",src:"assets/images/ecommerce/product-image-placeholder.png",alt:e.original.titre}),className:"justify-center",width:64,sortable:!1,filterable:!1},{Header:"Titre",accessor:"titre",filterable:!1,Cell:e=>n.a.createElement("div",{className:"flex items-center"},E.a.capitalize(E.a.truncate(e.original.titre,{length:20})))},{Header:"Description",accessor:"description",filterable:!1,Cell:e=>n.a.createElement("div",{className:"flex items-center"},E.a.capitalize(E.a.truncate(e.original.description,{length:50})))},{Header:"Date de cr\xe9ation",accessor:"created",filterable:!1,Cell:e=>g()(e.original.created).format("DD/MM/YYYY HH:mm")},{Header:"Publi\xe9e",accessor:"isActive",Cell:e=>e.original.isActive?n.a.createElement(l.a,{title:"Publi\xe9e"},n.a.createElement(s.a,{className:"text-green text-20",onClick:a=>{a.stopPropagation(),t(d.e(e.original,!1,m))}},n.a.createElement(o.a,null,"check_circle"))):n.a.createElement(l.a,{title:"Priv\xe9e"},n.a.createElement(s.a,{className:"text-red text-20",onClick:a=>{a.stopPropagation(),t(d.e(e.original,!0,m))}},n.a.createElement(o.a,null,"remove_circle")))},{Header:"",Cell:e=>n.a.createElement("div",{className:"flex items-center"},n.a.createElement(l.a,{title:"Supprimer"},n.a.createElement(s.a,{className:"text-red text-20",onClick:a=>{a.stopPropagation(),t(d.v(e.original,m))}},n.a.createElement(o.a,null,"delete"))),n.a.createElement(l.a,{title:"Editer"},n.a.createElement(s.a,{className:"text-teal text-20"},n.a.createElement(o.a,null,"edit"))))}],manual:!0,defaultSortDesc:!0,pages:u,page:m.page-1,defaultPageSize:10,loading:c,showPageSizeOptions:!1,onPageChange:e=>{m.page=e+1,t(d.x(m))},onSortedChange:(e,a,r)=>{m.page=1,m.filter.id=e[0].id,m.filter.direction=e[0].desc?"desc":"asc",t(d.x(m))},noDataText:"No Actualite found",loadingText:"Chargement...",ofText:"sur"})):null}),h=a(89),T=a(135),P=a(1139),y=a(1227),b=a(1205),C=a(16);var v=function(e){const t=Object(p.b)(),a=Object(p.c)(e=>{let{fuse:t}=e;return t.settings.mainTheme}),r=Object(p.c)(e=>{let{actualiteApp:t}=e;return t.actualites.parametres});return n.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement(i.d,{animation:"transition.expandIn",delay:300},n.a.createElement(o.a,{className:"text-32 mr-0 sm:mr-12"},"inbox")),n.a.createElement(i.d,{animation:"transition.slideLeftIn",delay:300},n.a.createElement(h.a,{className:"hidden sm:flex",variant:"h6"},"Gestion des actualit\xe9s"))),n.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},n.a.createElement(b.a,{theme:a},n.a.createElement(i.d,{animation:"transition.slideDownIn",delay:300},n.a.createElement(T.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},n.a.createElement(o.a,{className:"mr-8",color:"action"},"search"),n.a.createElement(P.a,{placeholder:"Rechercher dans la description",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:r.description,inputProps:{"aria-label":"Rechercher"},onChange:e=>{r.page=1,r.description=e.target.value,t(d.x(r))}}))))),n.a.createElement(i.d,{animation:"transition.slideRightIn",delay:300},n.a.createElement(y.a,{component:C.a,to:"/admin/actualites/new",className:"whitespace-no-wrap",variant:"contained"},n.a.createElement("span",{className:"hidden sm:flex"},"Ajouter nouvelle actualit\xe9"),n.a.createElement("span",{className:"flex sm:hidden"},"New"))))},x=a(1357);t.default=Object(c.a)("actualiteApp",x.a)(function(){const e=Object(p.b)(),t=Object(p.c)(e=>{let{actualiteApp:t}=e;return t.actualites.parametres});return Object(r.useEffect)(()=>(e(d.s(t)),()=>{e(d.q())}),[e,t]),n.a.createElement(i.o,{classes:{content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:n.a.createElement(v,null),content:n.a.createElement(A,null),innerScroll:!0})})}}]);