(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1244:function(e,a,t){"use strict";var n=t(3),r=t.n(n),i=t(4),l=t.n(i),s=t(0),c=t.n(s),o=t(2),p=t(8),m=t(89),u=c.a.forwardRef(function(e,a){var t=e.children,n=e.classes,i=e.className,s=e.disableTypography,p=void 0!==s&&s,u=l()(e,["children","classes","className","disableTypography"]);return c.a.createElement("div",r()({className:Object(o.a)(n.root,i),ref:a},u),p?t:c.a.createElement(m.a,{variant:"h6"},t))});a.a=Object(p.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(u)},1245:function(e,a,t){"use strict";var n=t(3),r=t.n(n),i=t(0),l=t.n(i),s=t(8),c=t(89),o=l.a.forwardRef(function(e,a){return l.a.createElement(c.a,r()({component:"p",variant:"body1",color:"textSecondary",ref:a},e))});a.a=Object(s.a)({root:{marginBottom:16}},{name:"MuiDialogContentText"})(o)},1536:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(39),l=t(7),s=t(136),c=t(1140),o=t(1244),p=t(1229),m=t(1245),u=t(1230),d=t(1227),y=t(1204),E=t(365),f=t(10),h=t(50),g=t(102),P=t(33);const A="[PAYS APP] GET PAYS",b="[PAYS APP] REQUEST PAYS",O="[PAYS APP] SET SEARCH TEXT",v="[PAYS APP] TOGGLE IN SELECTED PAYS",S="[PAYS APP] SELECT ALL PAYS",j="[PAYS APP] DESELECT ALL PAYS",x="[PAYS APP] OPEN NEW PAYS DIALOG",N="[PAYS APP] CLOSE NEW PAYS DIALOG",w="[PAYS APP] OPEN EDIT PAYS DIALOG",C="[PAYS APP] CLOSE EDIT PAYS DIALOG",T="[PAYS APP] ADD PAYS",D="[PAYS APP] SAVE ERROR",Y="[PAYS APP] UPDATE PAYS",I="[PAYS APP] REMOVE PAYS",L="[SOUS_SECTEURS APP] SET PARAMETRES DATA";function k(e){var a="";e.search.length>0&&e.search.map(function(e,t){a+="&"+e.id+"="+e.value});const t=h.a.get("/api/pays?page=".concat(e.page).concat(a,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return e=>(e({type:b}),t.then(a=>{e({type:A,payload:a.data})}))}function R(e,a){let t={del:!0,name:e.name+"_deleted-"+e.id};return n=>{return n({type:b}),h.a.put("/api/pays/".concat(e.id),t).then(e=>Promise.all([n({type:I}),n(Object(P.B)({message:"Pays bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>n(k(a)))).catch(e=>{n({type:D}),n(Object(P.B)({message:f.a.map(g.a.parseApiErrors(e),function(e,a){return e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function z(e){return{type:L,parametres:e}}const G="[DIALOG] OPEN",B="[DIALOG] CLOSE";function F(){return{type:B}}function H(e){return{type:G,options:e}}var M=function(e){const a=Object(l.b)(),t=Object(l.c)(e=>{let{paysApp:a}=e;return a.pays.entities}),s=Object(l.c)(e=>{let{paysApp:a}=e;return a.pays.pageCount}),h=Object(l.c)(e=>{let{paysApp:a}=e;return a.pays.loading}),g=Object(l.c)(e=>{let{paysApp:a}=e;return a.pays.parametres}),P=Object(l.c)(e=>{let{paysApp:a}=e;return a.pays.searchText}),[A,b]=Object(n.useState)(null);if(Object(n.useEffect)(()=>{t&&b(function(e,a){const t=Object.keys(e).map(a=>e[a]);return 0===a.length?t:i.y.filterArrayByString(t,a)}(t,P))},[t,P]),!A)return null;const O=f.a.debounce(e=>a(z(e)),700);return r.a.createElement(i.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(E.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:(e,t,n)=>({className:"cursor-pointer",onClick:(e,n)=>{t&&a(function(e){return{type:w,data:e}}(t.original))}}),data:A,columns:[{Header:"Pays",accessor:"name",filterable:!0},{Header:"",width:64,Cell:e=>r.a.createElement("div",{className:"flex items-center"},r.a.createElement(c.a,{className:"text-red text-20",onClick:t=>{t.stopPropagation(),a(H({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(p.a,null,r.a.createElement(m.a,{id:"alert-dialog-description"},"Voulez vous vraiment supprimer cet enregistrement ?")),r.a.createElement(u.a,null,r.a.createElement(d.a,{onClick:()=>a(F()),color:"primary"},"Non"),r.a.createElement(d.a,{onClick:t=>{a(R(e.original,g)),a(F())},color:"primary",autoFocus:!0},"Oui")))}))}},r.a.createElement(y.a,null,"delete")))}],manual:!0,pages:s,page:g.page-1,defaultPageSize:10,loading:h,showPageSizeOptions:!1,onPageChange:e=>{g.page=e+1,a(z(g))},onSortedChange:(e,t,n)=>{g.page=1,g.filter.id=e[0].id,g.filter.direction=e[0].desc?"desc":"asc",a(z(g))},onFilteredChange:e=>{g.page=1,g.search=e,O(g)},noDataText:"Aucun pays trouv\xe9",loadingText:"Chargement...",ofText:"sur"}))},V=t(89);var W=function(e){const a=Object(l.b)();return r.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(i.d,{animation:"transition.expandIn",delay:300},r.a.createElement(y.a,{className:"text-32 mr-0 sm:mr-12"},"public")),r.a.createElement(i.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(V.a,{className:"hidden sm:flex",variant:"h6"},"Gestion des Pays"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"}),r.a.createElement(i.d,{animation:"transition.slideRightIn",delay:300},r.a.createElement(d.a,{onClick:e=>a({type:x}),className:"whitespace-no-wrap",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Ajouter nouveau pays"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},U=t(1223),J=t(1218),_=t(1228),q=t(137),Q=t(51),X=t.n(Q);const K={name:""};var Z=function(e){const a=Object(l.b)(),t=Object(l.c)(e=>{let{paysApp:a}=e;return a.pays.paysDialog}),s=Object(l.c)(e=>{let{paysApp:a}=e;return a.pays.parametres}),{form:E,handleChange:A,setForm:b}=Object(q.b)(K),[O,v]=Object(n.useState)(!1),S=Object(n.useRef)(null),j=Object(n.useCallback)(()=>{"edit"===t.type&&t.data&&b({...t.data}),"new"===t.type&&b({...K,...t.data})},[t.data,t.type,b]);function x(){"edit"===t.type?a({type:C}):a({type:N})}function w(){a(R(E,s)),a(F()),x()}return Object(n.useEffect)(()=>{t.props.open&&j()},[t.props.open,j]),r.a.createElement(U.a,Object.assign({classes:{paper:"m-24"}},t.props,{onClose:x,fullWidth:!0,maxWidth:"xs"}),r.a.createElement(J.a,{position:"static",elevation:1},r.a.createElement(_.a,{className:"flex w-full"},r.a.createElement(V.a,{variant:"subtitle1",color:"inherit"},"new"===t.type?"Nouveau Pays":"Editer Pays"))),r.a.createElement(X.a,{onValidSubmit:function(e){"new"===t.type?a(function(e,a){return(t,n)=>h.a.post("/api/pays",e).then(e=>Promise.all([t({type:T}),t(Object(P.B)({message:"Pays bien ajout\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>t(k(a)))).catch(e=>{t({type:D}),t(Object(P.B)({message:f.a.map(g.a.parseApiErrors(e),function(e,a){return a+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}(E,s)):a(function(e,a){return(t,n)=>h.a.put(e["@id"],e).then(e=>Promise.all([t({type:Y}),t(Object(P.B)({message:"Pays bien modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>t(k(a)))).catch(e=>{t({type:D}),t(Object(P.B)({message:f.a.map(g.a.parseApiErrors(e),function(e,a){return a+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}(E,s)),x()},onValid:function(){v(!0)},onInvalid:function(){v(!1)},ref:S,className:"flex flex-col overflow-hidden"},r.a.createElement(p.a,{classes:{root:"p-24"}},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"min-w-48 pt-20"},r.a.createElement(y.a,{color:"action"},"public")),r.a.createElement(i.F,{className:"mb-24",label:"Nom",autoFocus:!0,id:"name",name:"name",value:E.name,onChange:A,variant:"outlined",validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},required:!0,fullWidth:!0}))),"new"===t.type?r.a.createElement(u.a,{className:"justify-between pl-16"},r.a.createElement(d.a,{variant:"contained",color:"primary",type:"submit",disabled:!O},"Ajouter")):r.a.createElement(u.a,{className:"justify-between pl-16"},r.a.createElement(d.a,{variant:"contained",color:"primary",type:"submit",disabled:!O},"Modifier"),r.a.createElement(c.a,{onClick:()=>a(H({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(p.a,null,r.a.createElement(m.a,{id:"alert-dialog-description"},"Voulez vous vraiment supprimer cet enregistrement ?")),r.a.createElement(u.a,null,r.a.createElement(d.a,{onClick:()=>a(F()),color:"primary"},"Non"),r.a.createElement(d.a,{onClick:w,color:"primary",autoFocus:!0},"Oui")))}))},r.a.createElement(y.a,null,"delete")))))},$=t(43);const ee={entities:null,parametres:{page:1,name:"",search:[],filter:{id:"id",direction:"asc"}},pageCount:null,loading:!1,searchText:"",selectedPaysIds:[],routeParams:{},paysDialog:{type:"new",props:{open:!1},data:null}};var ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case b:return{...e,loading:!0};case A:return{...e,entities:f.a.keyBy(a.payload["hydra:member"],"id"),pageCount:g.a.hydraPageCount(a.payload),loading:!1};case D:return{...e,loading:!1};case O:return{...e,searchText:a.searchText};case v:{const t=a.PaysId;let n=[...e.selectedPaysIds];return n=void 0!==n.find(e=>e===t)?n.filter(e=>e!==t):[...n,t],{...e,selectedPaysIds:n}}case S:{const a=Object.keys(e.entities).map(a=>e.entities[a]).map(e=>e.id);return{...e,selectedPaysIds:a}}case j:return{...e,selectedPaysIds:[]};case x:return{...e,paysDialog:{type:"new",props:{open:!0},data:null}};case N:return{...e,paysDialog:{type:"new",props:{open:!1},data:null}};case w:return{...e,paysDialog:{type:"edit",props:{open:!0},data:a.data}};case C:return{...e,paysDialog:{type:"edit",props:{open:!1},data:null}};case L:return{...e,parametres:{page:a.parametres.page,name:a.parametres.name,search:a.parametres.search,filter:{id:a.parametres.filter.id,direction:a.parametres.filter.direction}}};default:return e}};const te={state:!1,options:{children:"Hi"}};var ne=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case P.f:return{...e,state:!0,options:{...e.options,...a.options}};case P.a:return{...e,state:!1};default:return e}};var re=Object($.d)({pays:ae,dialog:ne}),ie=t(364);a.default=Object(s.a)("paysApp",re)(function(e){const a=Object(l.b)(),t=Object(n.useRef)(null),s=Object(l.c)(e=>{let{paysApp:a}=e;return a.pays.parametres});return Object(n.useEffect)(()=>{a(k(s))},[a,s]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.Helmet,null,r.a.createElement("title",null,"Pays | Les Achats Industriels"),r.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),r.a.createElement("meta",{name:"googlebot",content:"noindex"})),r.a.createElement(i.p,{classes:{contentWrapper:"p-0 sm:p-24 pb-80 sm:pb-80 h-full",content:"flex flex-col h-full",leftSidebar:"w-256 border-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(W,{pageLayout:t}),content:r.a.createElement(M,null),sidebarInner:!0,ref:t,innerScroll:!0}),r.a.createElement(Z,null))})}}]);