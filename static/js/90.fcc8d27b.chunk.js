(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{1071:function(e,t,a){"use strict";var n=a(54),r="[ABONNEMENTS FRS APP] REQUEST ABONNEMENTS",c="[ABONNEMENTS FRS APP] SET PARAMETRES DATA",l="[ABONNEMENTS FRS APP] GET ABONNEMENTS",i="[ABONNEMENTS FRS APP] SET ABONNEMENTS SEARCH TEXT",o="[ABONNEMENTS FRS APP] CLEAN_UP";function s(){return function(e){return e({type:o})}}function u(e){var t=n.a.get("/api/fournisseurs/".concat(e,"/abonnements?itemsPerPage=1&order[expired]=desc"));return function(e){return e({type:r}),t.then(function(t){return e({type:l,payload:t.data})})}}a(36),a(10);var d="[ABONNEMENT FRS APP] REQUEST ABONNEMENT",m="[ABONNEMENT FRS APP] GET ABONNEMENT",f="[ABONNEMENT FRS APP] GET SOUS_SECTEURS",E="[ABONNEMENT FRS APP] REQUEST OFFRES",p="[ABONNEMENT FRS APP] GET OFFRES",g="[ABONNEMENT FRS APP] REQUEST SAVE",b="[ABONNEMENT FRS APP] SAVE ABONNEMENT",N="[ABONNEMENT FRS APP] GET_PAIEMENT",h="[ABONNEMENT FRS APP] CLEAN_UP_FRS",S="[ABONNEMENT FRS APP] GET_DUREE",O="[ABONNEMENT FRS APP] REQUEST_FOURNISSEURS",A="[ABONNEMENT FRS APP] GET_FOURNISSEURS",T="[ABONNEMENT FRS APP] REQUEST_FOURNISSEUR",x="[ABONNEMENT FRS APP] GET_FOURNISSEUR";function P(e){var t=n.a.get("/api/abonnements/".concat(e));return function(e){return e({type:d}),t.then(function(t){return e({type:m,payload:t.data})})}}var v="[COMMANDES AB FRS APP] REQUEST COMMANDES",j="[COMMANDES AB FRS APP] GET COMMANDES",y="[COMMANDES AB FRS APP] SET COMMANDES SEARCH TEXT";function R(e){var t=n.a.get("/api/fournisseurs/".concat(e,"/demande_abonnements?itemsPerPage=1&statut=false&order[created]=desc"));return function(e){return e({type:v}),t.then(function(t){return e({type:j,payload:t.data})})}}a.d(t,"m",function(){return r}),a.d(t,"w",function(){return c}),a.d(t,"d",function(){return l}),a.d(t,"u",function(){return i}),a.d(t,"a",function(){return o}),a.d(t,"x",function(){return s}),a.d(t,"z",function(){return u}),a.d(t,"l",function(){return d}),a.d(t,"c",function(){return m}),a.d(t,"k",function(){return f}),a.d(t,"q",function(){return E}),a.d(t,"i",function(){return p}),a.d(t,"r",function(){return g}),a.d(t,"s",function(){return b}),a.d(t,"t",function(){return"[ABONNEMENT FRS APP] SAVE ERROR"}),a.d(t,"j",function(){return N}),a.d(t,"a",function(){}),a.d(t,"b",function(){return h}),a.d(t,"f",function(){return S}),a.d(t,"p",function(){return O}),a.d(t,"h",function(){return A}),a.d(t,"o",function(){return T}),a.d(t,"g",function(){return x}),a.d(t,"y",function(){return P}),a.d(t,"n",function(){return v}),a.d(t,"w",function(){}),a.d(t,"e",function(){return j}),a.d(t,"v",function(){return y}),a.d(t,"A",function(){return R})},1152:function(e,t,a){"use strict";var n=a(46),r=a(8),c=a(1071),l=a(107),i={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,reference:"",filter:{id:"created",direction:"desc"}}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.a:return Object(r.a)({},i);case c.m:return Object(r.a)({},e,{loading:!0});case c.d:return Object(r.a)({},e,{data:t.payload["hydra:member"],pageCount:l.a.hydraPageCount(t.payload),loading:!1});case c.u:return Object(r.a)({},e,{searchText:t.searchText});case c.w:return Object(r.a)({},e,{parametres:{page:t.parametres.page,reference:t.parametres.reference,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}});default:return e}},s={data:null,offres:null,sousSecteurs:null,error:null,loading:!1,loadingSS:!1,success:!1,paiements:null,durees:null,loadingFournisseurs:!1,fournisseurs:null,fournisseur:null},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.l:case c.q:case c.r:return Object(r.a)({},e,{loading:!0,loadingSS:!0});case c.p:case c.o:return Object(r.a)({},e,{loadingFournisseurs:!0});case c.h:return Object(r.a)({},e,{fournisseurs:t.payload,loadingFournisseurs:!1});case c.g:return Object(r.a)({},e,{fournisseur:t.payload,loadingFournisseurs:!1});case c.j:return Object(r.a)({},e,{paiements:t.payload});case c.f:return Object(r.a)({},e,{durees:t.payload});case c.s:return Object(r.a)({},e,{loading:!1,success:!0});case c.a:return Object(r.a)({},s);case c.b:return Object(r.a)({},e,{fournisseur:null});case c.c:return Object(r.a)({},e,{data:t.payload,loading:!1});case c.k:return Object(r.a)({},e,{sousSecteurs:t.payload,loadingSS:!1});case c.i:return Object(r.a)({},e,{offres:t.payload,loading:!1});case c.t:return Object(r.a)({},e,{error:t.payload,loading:!1});default:return e}},d=a(36),m={state:!1,options:{children:"Hi"}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.f:return Object(r.a)({},e,{state:!0,options:Object(r.a)({},e.options,t.options)});case d.a:return Object(r.a)({},e,{state:!1});default:return e}},E={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,reference:"",filter:{id:"created",direction:"desc"}}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.n:return Object(r.a)({},e,{loading:!0});case c.e:return Object(r.a)({},e,{data:t.payload["hydra:member"],pageCount:l.a.hydraPageCount(t.payload),loading:!1});case c.v:return Object(r.a)({},e,{searchText:t.searchText});case c.w:return Object(r.a)({},e,{parametres:{page:t.parametres.page,reference:t.parametres.reference,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}});default:return e}},g=Object(n.d)({abonnements:o,abonnement:u,commandes:p,dialog:f});t.a=g},1385:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a(0),c=a.n(r),l=a(40),i=a(140),o=a(98),s=a(974),u=a(1029),d=a(958),m=a(1013),f=a(78),E=a(6),p=a(64),g=a.n(p),b=a(107),N=a(347),h=a(1034),S=a(10),O=Object(h.a)(function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},chip:{marginLeft:e.spacing(1),background:"#ef5350",color:"white",fontWeight:"bold",fontSize:"11px"},chip2:{marginLeft:e.spacing(1),background:"#4caf50",color:"white",fontWeight:"bold",fontSize:"11px"},chipOrange:{marginLeft:e.spacing(1),background:"#ff9800",color:"white",fontWeight:"bold",fontSize:"11px"}}});var A=Object(f.g)(function(e){var t=O(),a=Object(E.c)(function(e){return e.abonnementFrsApp.abonnements.data}),i=Object(E.c)(function(e){return e.abonnementFrsApp.abonnements.loading}),f=Object(E.c)(function(e){return e.abonnementFrsApp.abonnements.searchText}),p=Object(r.useState)(null),h=Object(n.a)(p,2),A=h[0],T=h[1];return Object(r.useEffect)(function(){a&&T(function(e,t){var a=Object.keys(e).map(function(t){return e[t]});return 0===t.length?a:b.a.filterArrayByString(a,t)}(a,f))},[a,f]),A?c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{variant:"h6",className:"mb-16"}," Abonnement actuel"),c.a.createElement(l.d,{animation:"transition.slideUpIn",delay:300},c.a.createElement(N.b,{className:"-striped -highlight sm:rounded-16 overflow-hidden",getTrProps:function(e,t,a){return{className:"h-64"}},getTheadProps:function(e,t,a){return{className:"h-64 font-bold"}},data:A,columns:[{Header:"Offre",className:"font-bold",sortable:!1,id:"offre",accessor:function(e){return e.offre.name}},{Header:"Activit\xe9s",accessor:"sousSecteurs.name",className:"text-center",sortable:!1,filterable:!1,Cell:function(e){return S.a.truncate(S.a.join(S.a.map(e.original.sousSecteurs,"name"),", "),{length:150,separator:" "})}},{Header:"Date de cr\xe9ation",className:"text-center",accessor:"created",sortable:!1,filterable:!1,Cell:function(e){return g()(e.original.created).format("DD/MM/YYYY")}},{Header:"Date de renouvellement",className:"text-center",sortable:!1,accessor:"expired",filterable:!1,Cell:function(e){return e.original.expired&&g()(e.original.expired).format("DD/MM/YYYY")}},{Header:"Statut",sortable:!1,filterable:!1,Cell:function(e){return c.a.createElement("div",{className:"flex items-center"},!1===e.original.statut?e.original.expired&&void 0!==e.original.expired?g()(e.original.expired)>=g()()?c.a.createElement(s.a,{className:t.chip,label:"Annul\xe9e"}):c.a.createElement(s.a,{className:t.chip,label:"Expir\xe9"}):c.a.createElement(s.a,{className:t.chipOrange,label:"En attente"}):g()(e.original.expired)>=g()()?c.a.createElement(s.a,{className:t.chip2,label:"En cours"}):c.a.createElement(s.a,{className:t.chip,label:"Expir\xe9"}))}},{Header:"",Cell:function(t){return c.a.createElement("div",{className:"flex items-center"},c.a.createElement(u.a,{title:"D\xe9tails"},c.a.createElement(d.a,{onClick:function(){e.history.push("/abonnement/"+t.original.id)},className:"text-teal text-20"},c.a.createElement(m.a,null,"remove_red_eye"))),!0===t.original.statut&&g()(t.original.expired).diff(g()(),"month",!0)<=1&&c.a.createElement(u.a,{title:"Renouveler"},c.a.createElement(d.a,{onClick:function(){e.history.push("/renouveler/"+t.original.id)},className:"text-green text-20"},c.a.createElement(m.a,null,"autorenew"))))}}],showPagination:!1,defaultPageSize:1,loading:i,showPageSizeOptions:!1,noDataText:"Pas d'abonnement trouv\xe9",loadingText:"Chargement...",ofText:"sur"}))):null}),T=a(1035),x=a(18);var P=function(e){return c.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},c.a.createElement("div",{className:"flex items-center"},c.a.createElement(l.d,{animation:"transition.expandIn",delay:300},c.a.createElement(m.a,{className:"text-32 mr-0 sm:mr-12"},"cloud")),c.a.createElement(l.d,{animation:"transition.slideLeftIn",delay:300},c.a.createElement(o.a,{className:"hidden sm:flex",variant:"h6"},"Abonnements"))),c.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"}),c.a.createElement(l.d,{animation:"transition.slideRightIn",delay:300},c.a.createElement(T.a,{component:x.a,to:"/offres/commande/new",className:"whitespace-no-wrap",variant:"contained"},c.a.createElement("span",{className:"hidden sm:flex"},"Ajouter nouvelle commande"),c.a.createElement("span",{className:"flex sm:hidden"},"New"))))},v=a(1152),j=a(1071),y=a(346),R=a(1044),M=a(1027),F=Object(h.a)(function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},chip:{marginLeft:e.spacing(1),padding:2,background:"#ef5350",color:"white",fontWeight:"bold",fontSize:"11px",height:20},blue:{marginLeft:e.spacing(1),padding:2,background:"#3490dc",color:"white",fontWeight:"bold",fontSize:"11px",height:20},chip2:{marginLeft:e.spacing(1),padding:2,background:"#4caf50",color:"white",fontWeight:"bold",fontSize:"11px",height:20},chipOrange:{marginLeft:e.spacing(1),padding:2,background:"#ff9800",color:"white",fontWeight:"bold",fontSize:"11px",height:20}}});var w=Object(f.g)(function(e){var t=F(),a=Object(E.c)(function(e){return e.abonnementFrsApp.commandes.data}),i=Object(E.c)(function(e){return e.abonnementFrsApp.commandes.loading}),f=Object(E.c)(function(e){return e.abonnementFrsApp.commandes.searchText}),p=Object(r.useState)(null),h=Object(n.a)(p,2),O=h[0],A=h[1];return Object(r.useEffect)(function(){a&&A(function(e,t){var a=Object.keys(e).map(function(t){return e[t]});return 0===t.length?a:b.a.filterArrayByString(a,t)}(a,f))},[a,f]),i?c.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},c.a.createElement(o.a,{color:"textSecondary",variant:"h5"},"Chargement...")):O?0===O.length?c.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},c.a.createElement(o.a,{color:"textSecondary",variant:"h5"},"Aucune commande en attente !")):c.a.createElement(l.d,{animation:"transition.slideUpIn",delay:300},c.a.createElement(N.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(e,t,a){return{className:"h-64"}},getTheadProps:function(e,t,a){return{className:"h-64 font-bold"}},data:O,columns:[{Header:"R\xe9f\xe9rence",className:"font-bold",sortable:!1,id:"reference",accessor:function(e){return e.reference}},{Header:"Offre",className:"font-bold",sortable:!1,id:"offre",accessor:function(e){return e.offre.name}},{Header:"Activit\xe9s",accessor:"sousSecteurs.name",sortable:!1,filterable:!1,Cell:function(e){return S.a.truncate(S.a.join(S.a.map(e.original.sousSecteurs,"name"),", "),{length:25,separator:" "})}},{Header:"Dur\xe9e",sortable:!1,filterable:!1,Cell:function(e){return c.a.createElement("div",{className:"flex items-center"},e.original.duree?e.original.duree.name+" mois":"")}},{Header:"Date de cr\xe9ation",accessor:"created",sortable:!1,filterable:!1,Cell:function(e){return g()(e.original.created).format("DD/MM/YYYY")}},{Header:"Statut",sortable:!1,filterable:!1,Cell:function(e){return c.a.createElement("div",{className:"flex items-center"},!1===e.original.statut?c.a.createElement(s.a,{className:t.chipOrange,label:"En attente"}):c.a.createElement(s.a,{className:t.chip2,label:"Trait\xe9e"}))}},{Header:"",sortable:!1,filterable:!1,Cell:function(e){return c.a.createElement("div",{className:"flex items-center"},!1===e.original.type?c.a.createElement(s.a,{className:t.blue,label:"Nouvelle"}):c.a.createElement(s.a,{className:t.chip2,label:"Renouvellement"}))}},{Header:"",width:64,Cell:function(t){return c.a.createElement("div",{className:"flex items-center"},!1===t.original.statut?c.a.createElement(u.a,{title:"Editer"},c.a.createElement(d.a,{className:"text-orange text-20",onClick:function(){return e.history.push("/offres/commande/"+t.original.id)}},c.a.createElement(m.a,null,"edit"))):c.a.createElement(u.a,{title:"Editer"},c.a.createElement(d.a,{className:"text-grey text-20"},c.a.createElement(m.a,null,"edit"))))}}],showPagination:!1,defaultPageSize:1,loading:i,showPageSizeOptions:!1,noDataText:"Pas de commande trouv\xe9e",loadingText:"Chargement...",ofText:"sur"})):null});t.default=Object(i.a)("abonnementFrsApp",v.a)(function(){var e=Object(E.b)(),t=Object(E.c)(function(e){return e.auth.user}),a=Object(r.useState)(0),i=Object(n.a)(a,2),o=i[0],s=i[1];return Object(r.useEffect)(function(){t.id&&e(j.z(t.id))},[e,t]),Object(r.useEffect)(function(){t.id&&e(j.A(t.id))},[e,t]),c.a.createElement(c.a.Fragment,null,c.a.createElement(y.Helmet,null,c.a.createElement("title",null,"Abonnements | Les Achats Industriels"),c.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),c.a.createElement("meta",{name:"googlebot",content:"noindex"})),c.a.createElement(l.o,{classes:{content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:c.a.createElement(P,null),contentToolbar:c.a.createElement(R.a,{value:o,onChange:function(e,t){s(t)},indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},c.a.createElement(M.a,{className:"h-64 normal-case",label:"Abonnement"}),c.a.createElement(M.a,{className:"h-64 normal-case",label:"Commande"})),content:c.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl w-full"},0===o&&c.a.createElement(A,null),1===o&&c.a.createElement(w,null)),innerScroll:!0}))})}}]);