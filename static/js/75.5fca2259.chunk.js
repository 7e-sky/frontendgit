(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{1051:function(e,t,a){"use strict";var n=a(3),r=a.n(n),i=a(4),c=a.n(i),o=a(0),l=a.n(o),s=(a(1),a(2)),u=a(7),p=a(98),m=l.a.forwardRef(function(e,t){var a=e.children,n=e.classes,i=e.className,o=e.disableTypography,u=void 0!==o&&o,m=c()(e,["children","classes","className","disableTypography"]);return l.a.createElement("div",r()({className:Object(s.a)(n.root,i),ref:t},m),u?a:l.a.createElement(p.a,{variant:"h6"},a))});t.a=Object(u.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(m)},1052:function(e,t,a){"use strict";var n=a(3),r=a.n(n),i=a(0),c=a.n(i),o=(a(1),a(7)),l=a(98),s=c.a.forwardRef(function(e,t){return c.a.createElement(l.a,r()({component:"p",variant:"body1",color:"textSecondary",ref:t},e))});t.a=Object(o.a)({root:{marginBottom:16}},{name:"MuiDialogContentText"})(s)},1353:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(40),c=a(6),o=a(140),l=a(23),s=a(958),u=a(1051),p=a(1037),m=a(1052),d=a(1038),f=a(1035),y=a(1013),E=a(347),h=a(10),b=a(54),g=a(107),P=a(36),O="[PAYS APP] GET PAYS",A="[PAYS APP] REQUEST PAYS",v="[PAYS APP] SET SEARCH TEXT",j="[PAYS APP] TOGGLE IN SELECTED PAYS",S="[PAYS APP] SELECT ALL PAYS",x="[PAYS APP] DESELECT ALL PAYS",N="[PAYS APP] OPEN NEW PAYS DIALOG",w="[PAYS APP] CLOSE NEW PAYS DIALOG",C="[PAYS APP] OPEN EDIT PAYS DIALOG",T="[PAYS APP] CLOSE EDIT PAYS DIALOG",D="[PAYS APP] ADD PAYS",Y="[PAYS APP] SAVE ERROR",I="[PAYS APP] UPDATE PAYS",L="[PAYS APP] REMOVE PAYS",k="[SOUS_SECTEURS APP] SET PARAMETRES DATA";function R(e){var t="";e.search.length>0&&e.search.map(function(e,a){t+="&"+e.id+"="+e.value});var a=b.a.get("/api/pays?page=".concat(e.page).concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:A}),a.then(function(t){e({type:O,payload:t.data})})}}function z(e,t){var a={del:!0,name:e.name+"_deleted-"+e.id};return function(n){return n({type:A}),b.a.put("/api/pays/".concat(e.id),a).then(function(e){return Promise.all([n({type:L}),n(Object(P.B)({message:"Pays bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return n(R(t))})}).catch(function(e){n({type:Y}),n(Object(P.B)({message:h.a.map(g.a.parseApiErrors(e),function(e,t){return e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function G(e){return{type:k,parametres:e}}var B="[DIALOG] OPEN",F="[DIALOG] CLOSE";function H(){return{type:F}}function M(e){return{type:B,options:e}}var V=function(e){var t=Object(c.b)(),a=Object(c.c)(function(e){return e.paysApp.pays.entities}),o=Object(c.c)(function(e){return e.paysApp.pays.pageCount}),b=Object(c.c)(function(e){return e.paysApp.pays.loading}),g=Object(c.c)(function(e){return e.paysApp.pays.parametres}),P=Object(c.c)(function(e){return e.paysApp.pays.searchText}),O=Object(n.useState)(null),A=Object(l.a)(O,2),v=A[0],j=A[1];if(Object(n.useEffect)(function(){a&&j(function(e,t){var a=Object.keys(e).map(function(t){return e[t]});return 0===t.length?a:i.y.filterArrayByString(a,t)}(a,P))},[a,P]),!v)return null;var S=h.a.debounce(function(e){return t(G(e))},700);return r.a.createElement(i.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(E.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(e,a,n){return{className:"cursor-pointer",onClick:function(e,n){var r;a&&t((r=a.original,{type:C,data:r}))}}},data:v,columns:[{Header:"Pays",accessor:"name",filterable:!0},{Header:"",width:64,Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(s.a,{className:"text-red text-20",onClick:function(a){a.stopPropagation(),t(M({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(p.a,null,r.a.createElement(m.a,{id:"alert-dialog-description"},"Voulez vous vraiment supprimer cet enregistrement ?")),r.a.createElement(d.a,null,r.a.createElement(f.a,{onClick:function(){return t(H())},color:"primary"},"Non"),r.a.createElement(f.a,{onClick:function(a){t(z(e.original,g)),t(H())},color:"primary",autoFocus:!0},"Oui")))}))}},r.a.createElement(y.a,null,"delete")))}}],manual:!0,pages:o,page:g.page-1,defaultPageSize:10,loading:b,showPageSizeOptions:!1,onPageChange:function(e){g.page=e+1,t(G(g))},onSortedChange:function(e,a,n){g.page=1,g.filter.id=e[0].id,g.filter.direction=e[0].desc?"desc":"asc",t(G(g))},onFilteredChange:function(e){g.page=1,g.search=e,S(g)},noDataText:"Aucun pays trouv\xe9",loadingText:"Chargement...",ofText:"sur"}))},W=a(98);var U=function(e){var t=Object(c.b)();return r.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(i.d,{animation:"transition.expandIn",delay:300},r.a.createElement(y.a,{className:"text-32 mr-0 sm:mr-12"},"public")),r.a.createElement(i.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(W.a,{className:"hidden sm:flex",variant:"h6"},"Gestion des Pays"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"}),r.a.createElement(i.d,{animation:"transition.slideRightIn",delay:300},r.a.createElement(f.a,{onClick:function(e){return t({type:N})},className:"whitespace-no-wrap",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Ajouter nouveau pays"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},J=a(8),_=a(1031),q=a(1026),Q=a(1036),X=a(141),K=a(55),Z=a.n(K),$={name:""};var ee=function(e){var t=Object(c.b)(),a=Object(c.c)(function(e){return e.paysApp.pays.paysDialog}),o=Object(c.c)(function(e){return e.paysApp.pays.parametres}),E=Object(X.b)($),O=E.form,A=E.handleChange,v=E.setForm,j=Object(n.useState)(!1),S=Object(l.a)(j,2),x=S[0],N=S[1],C=Object(n.useRef)(null),L=Object(n.useCallback)(function(){"edit"===a.type&&a.data&&v(Object(J.a)({},a.data)),"new"===a.type&&v(Object(J.a)({},$,a.data))},[a.data,a.type,v]);function k(){"edit"===a.type?t({type:T}):t({type:w})}function G(){t(z(O,o)),t(H()),k()}return Object(n.useEffect)(function(){a.props.open&&L()},[a.props.open,L]),r.a.createElement(_.a,Object.assign({classes:{paper:"m-24"}},a.props,{onClose:k,fullWidth:!0,maxWidth:"xs"}),r.a.createElement(q.a,{position:"static",elevation:1},r.a.createElement(Q.a,{className:"flex w-full"},r.a.createElement(W.a,{variant:"subtitle1",color:"inherit"},"new"===a.type?"Nouveau Pays":"Editer Pays"))),r.a.createElement(Z.a,{onValidSubmit:function(e){"new"===a.type?t(function(e,t){return function(a,n){return b.a.post("/api/pays",e).then(function(e){return Promise.all([a({type:D}),a(Object(P.B)({message:"Pays bien ajout\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return a(R(t))})}).catch(function(e){a({type:Y}),a(Object(P.B)({message:h.a.map(g.a.parseApiErrors(e),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}(O,o)):t(function(e,t){return function(a,n){return b.a.put(e["@id"],e).then(function(e){return Promise.all([a({type:I}),a(Object(P.B)({message:"Pays bien modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return a(R(t))})}).catch(function(e){a({type:Y}),a(Object(P.B)({message:h.a.map(g.a.parseApiErrors(e),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}(O,o)),k()},onValid:function(){N(!0)},onInvalid:function(){N(!1)},ref:C,className:"flex flex-col overflow-hidden"},r.a.createElement(p.a,{classes:{root:"p-24"}},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"min-w-48 pt-20"},r.a.createElement(y.a,{color:"action"},"public")),r.a.createElement(i.F,{className:"mb-24",label:"Nom",autoFocus:!0,id:"name",name:"name",value:O.name,onChange:A,variant:"outlined",validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},required:!0,fullWidth:!0}))),"new"===a.type?r.a.createElement(d.a,{className:"justify-between pl-16"},r.a.createElement(f.a,{variant:"contained",color:"primary",type:"submit",disabled:!x},"Ajouter")):r.a.createElement(d.a,{className:"justify-between pl-16"},r.a.createElement(f.a,{variant:"contained",color:"primary",type:"submit",disabled:!x},"Modifier"),r.a.createElement(s.a,{onClick:function(){return t(M({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{id:"alert-dialog-title"},"Suppression"),r.a.createElement(p.a,null,r.a.createElement(m.a,{id:"alert-dialog-description"},"Voulez vous vraiment supprimer cet enregistrement ?")),r.a.createElement(d.a,null,r.a.createElement(f.a,{onClick:function(){return t(H())},color:"primary"},"Non"),r.a.createElement(f.a,{onClick:G,color:"primary",autoFocus:!0},"Oui")))}))}},r.a.createElement(y.a,null,"delete")))))},te=a(46),ae=a(21),ne={entities:null,parametres:{page:1,name:"",search:[],filter:{id:"id",direction:"asc"}},pageCount:null,loading:!1,searchText:"",selectedPaysIds:[],routeParams:{},paysDialog:{type:"new",props:{open:!1},data:null}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(J.a)({},e,{loading:!0});case O:return Object(J.a)({},e,{entities:h.a.keyBy(t.payload["hydra:member"],"id"),pageCount:g.a.hydraPageCount(t.payload),loading:!1});case Y:return Object(J.a)({},e,{loading:!1});case v:return Object(J.a)({},e,{searchText:t.searchText});case j:var a=t.PaysId,n=Object(ae.a)(e.selectedPaysIds);return n=void 0!==n.find(function(e){return e===a})?n.filter(function(e){return e!==a}):[].concat(Object(ae.a)(n),[a]),Object(J.a)({},e,{selectedPaysIds:n});case S:var r=Object.keys(e.entities).map(function(t){return e.entities[t]}).map(function(e){return e.id});return Object(J.a)({},e,{selectedPaysIds:r});case x:return Object(J.a)({},e,{selectedPaysIds:[]});case N:return Object(J.a)({},e,{paysDialog:{type:"new",props:{open:!0},data:null}});case w:return Object(J.a)({},e,{paysDialog:{type:"new",props:{open:!1},data:null}});case C:return Object(J.a)({},e,{paysDialog:{type:"edit",props:{open:!0},data:t.data}});case T:return Object(J.a)({},e,{paysDialog:{type:"edit",props:{open:!1},data:null}});case k:return Object(J.a)({},e,{parametres:{page:t.parametres.page,name:t.parametres.name,search:t.parametres.search,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}});default:return e}},ie={state:!1,options:{children:"Hi"}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.f:return Object(J.a)({},e,{state:!0,options:Object(J.a)({},e.options,t.options)});case P.a:return Object(J.a)({},e,{state:!1});default:return e}},oe=Object(te.d)({pays:re,dialog:ce}),le=a(346);t.default=Object(o.a)("paysApp",oe)(function(e){var t=Object(c.b)(),a=Object(n.useRef)(null),o=Object(c.c)(function(e){return e.paysApp.pays.parametres});return Object(n.useEffect)(function(){t(R(o))},[t,o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(le.Helmet,null,r.a.createElement("title",null,"Pays | Les Achats Industriels"),r.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),r.a.createElement("meta",{name:"googlebot",content:"noindex"})),r.a.createElement(i.p,{classes:{contentWrapper:"p-0 sm:p-24 pb-80 sm:pb-80 h-full",content:"flex flex-col h-full",leftSidebar:"w-256 border-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(U,{pageLayout:a}),content:r.a.createElement(V,null),sidebarInner:!0,ref:a,innerScroll:!0}),r.a.createElement(ee,null))})}}]);