(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{1074:function(e,t,a){"use strict";var n=a(36),r=a(54),c="[MESSAGES FOURNISSEUR APP] REQUEST MESSAGES",l="[MESSAGES FOURNISSEUR APP] REMOVE MESSAGES",s="[MESSAGES FOURNISSEUR APP] GET MESSAGES",i="[MESSAGES FOURNISSEUR APP] SET MESSAGES SEARCH TEXT";function o(e){var t=r.a.get("/api/fournisseurs/".concat(e,"/messages?statut=1"));return function(e){return e({type:c}),t.then(function(t){return e({type:s,payload:t.data})})}}function u(e,t){var a={del:!0};return function(c){return r.a.put("/api/contact_fournisseurs/".concat(e.id),a).then(function(e){return Promise.all([c({type:l}),c(Object(n.B)({message:"Message bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return c(o(t))})})}}function m(e){return{type:i,searchText:e.target.value}}var d=a(40),f=a(196),E="[MESSAGE FOURNISSEUR APP] REQUEST MESSAGE",g="[MESSAGE FOURNISSEUR APP] GET MESSAGE",p="[MESSAGE FOURNISSEUR APP] SAVE ERROR";function h(e){var t=r.a.get("/api/contact_fournisseurs/".concat(e));return function(e){return e({type:E}),t.then(function(t){return e(f.b("messages")),e({type:g,payload:t.data})}).catch(function(t){e({type:p,payload:d.y.parseApiErrors(t)})})}}a.d(t,"d",function(){return c}),a.d(t,"b",function(){return s}),a.d(t,"f",function(){return i}),a.d(t,"h",function(){return o}),a.d(t,"i",function(){return u}),a.d(t,"j",function(){return m}),a.d(t,"c",function(){return E}),a.d(t,"a",function(){return g}),a.d(t,"e",function(){return p}),a.d(t,"g",function(){return h})},1163:function(e,t,a){"use strict";var n=a(46),r=a(8),c=a(1074),l=a(107),s={data:[],pageCount:null,loading:!1,searchText:""},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.d:return Object(r.a)({},e,{loading:!0});case c.b:return Object(r.a)({},e,{data:t.payload["hydra:member"],pageCount:l.a.hydraPageCount(t.payload),loading:!1});case c.f:return Object(r.a)({},e,{searchText:t.searchText});default:return e}},o={data:null,error:null,loading:!1},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.c:return Object(r.a)({},e,{loading:!0});case c.a:return Object(r.a)({},e,{data:t.payload,loading:!1});case c.e:return Object(r.a)({},e,{error:t.payload,loading:!1});default:return e}},m=Object(n.d)({messages:i,message:u});t.a=m},1397:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),l=a(140),s=a(23),i=a(98),o=a(1029),u=a(958),m=a(1013),d=a(78),f=a(1074),E=a(6),g=a(64),p=a.n(g),h=a(107),S=a(347),b=a(10);var x=Object(d.g)(function(e){var t=Object(E.b)(),a=Object(E.c)(function(e){return e.messagesFrsApp.messages.data}),l=Object(E.c)(function(e){return e.messagesFrsApp.messages.loading}),d=Object(E.c)(function(e){return e.auth.user}),g=Object(E.c)(function(e){return e.messagesFrsApp.messages.searchText}),x=Object(n.useState)(null),v=Object(s.a)(x,2),O=v[0],y=v[1];return Object(n.useEffect)(function(){a&&y(function(e,t){var a=Object.keys(e).map(function(t){return e[t]});return 0===t.length?a:h.a.filterArrayByString(a,t)}(a,g))},[a,g]),O?0===O.length?r.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},r.a.createElement(i.a,{color:"textSecondary",variant:"h5"},"Il n'y a pas de message!")):r.a.createElement("div",{className:"w-full flex flex-col"},r.a.createElement(c.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(S.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(t,a,n){return{className:"h-64 cursor-pointer",onClick:function(t,n){a&&e.history.push("/messages/"+a.original.id)}}},getTheadProps:function(e,t,a){return{className:"h-64"}},data:O,columns:[{Header:"",filterable:!0,Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},e.original.isRead?r.a.createElement("p",{className:"text-green"},"Lu"):r.a.createElement("p",{className:"text-orange"},"No Lu"))}},{Header:"Nom Contact",accessor:"contact",filterable:!0,Cell:function(e){return e.original.contact?e.original.contact:""}},{Header:"T\xe9l\xe9phone",accessor:"phone",filterable:!0,Cell:function(e){return e.original.phone?e.original.phone:""}},{Header:"Email",accessor:"email",filterable:!0,Cell:function(e){return e.original.email?e.original.email:""}},{Header:"Message",accessor:"message",filterable:!0,Cell:function(e){return b.a.truncate(e.original.message,{length:36,separator:" "})}},{Header:"Date de cr\xe9ation",accessor:"created",filterable:!1,Cell:function(e){return p()(e.original.created).format("DD/MM/YYYY HH:mm")}},{Header:"",Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},1!==e.original.statut?r.a.createElement(o.a,{title:"Supprimer"},r.a.createElement(u.a,{className:"text-red text-20",onClick:function(a){a.stopPropagation(),t(f.i(e.original,d.id))}},r.a.createElement(m.a,null,"delete"))):r.a.createElement(o.a,{title:"Interdit!"},r.a.createElement(u.a,{className:"text-20 cursor-not-allowed disable",onClick:function(e){e.stopPropagation()}},r.a.createElement(m.a,null,"delete"))),r.a.createElement(o.a,{title:"D\xe9tails"},r.a.createElement(u.a,{className:"text-teal text-20"},r.a.createElement(m.a,null,"remove_red_eye"))))}}],defaultPageSize:10,noDataText:"Aucun message trouv\xe9",loading:l,loadingText:"Chargement...",ofText:"sur"}))):null}),v=a(139),O=a(957),y=a(1014);var A=function(e){var t=Object(E.b)(),a=Object(E.c)(function(e){return e.fuse.settings.mainTheme}),n=Object(E.c)(function(e){return e.messagesFrsApp.messages.searchText});return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(c.d,{animation:"transition.expandIn",delay:300},r.a.createElement(m.a,{className:"text-32 mr-0 sm:mr-12"},"email")),r.a.createElement(c.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(i.a,{className:"hidden sm:flex",variant:"h6"},"Liste des messages"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},r.a.createElement(y.a,{theme:a},r.a.createElement(c.d,{animation:"transition.slideDownIn",delay:300},r.a.createElement(v.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},r.a.createElement(m.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(O.a,{placeholder:"Rechercher dans les messages",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:n,inputProps:{"aria-label":"Rechercher"},onChange:function(e){return t(f.j(e))}}))))))},j=a(1163),N=a(346);t.default=Object(l.a)("messagesFrsApp",j.a)(function(){var e=Object(E.b)(),t=Object(E.c)(function(e){return e.auth.user});return Object(n.useEffect)(function(){t&&e(f.h(t.id))},[e,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(N.Helmet,null,r.a.createElement("title",null,"Messages | Les Achats Industriels"),r.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),r.a.createElement("meta",{name:"googlebot",content:"noindex"})),r.a.createElement(c.o,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(A,null),content:r.a.createElement(x,null),innerScroll:!0}))})}}]);