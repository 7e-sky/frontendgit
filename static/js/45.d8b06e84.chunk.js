(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1049:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};t.default=n},1075:function(e,t,a){"use strict";var n=a(36),r=a(54),i="[ACTUALITES APP] REQUEST ACTUALITES",c="[ACTUALITES APP] REMOVE ACTUALITES",l="[ACTUALITES APP] STATUT ACTUALITES",o="[ACTUALITES APP] SET PARAMETRES DATA",u="[ACTUALITES APP] CLEAN_UP",s="[USERS APP] GET ACTUALITES",d="[USERS APP] SET ACTUALITES SEARCH TEXT";function m(){return function(e){return e({type:u})}}function p(e){var t=e.description?"=".concat(e.description):"",a=r.a.get("/api/actualites?page=".concat(e.page,"&description").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:i}),a.then(function(t){return e({type:s,payload:t.data})})}}function f(e,t){return function(a){return r.a.delete("/api/actualites/".concat(e.id)).then(function(e){return Promise.all([a({type:c}),a(Object(n.B)({message:"Actualite bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return a(p(t))})})}}function g(e,t,a){var i={isActive:t};return function(c,o){return r.a.put("/api/actualites/".concat(e.id),i).then(function(e){return Promise.all([c({type:l}),c(Object(n.B)({message:t?"Cette actualit\xe9 est publi\xe9e aux publics":"Cette actualit\xe9 est priv\xe9e",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return c(p(a))})})}}function b(e){return{type:o,parametres:e}}var E=a(40),h=a(10),A="[ACTUALITE APP] REQUEST ACTUALITE",v="[ACTUALITE APP] GET ACTUALITE",T="[ACTUALITE APP] REQUEST SAVE",y="[ACTUALITE APP] SAVE ACTUALITE",I="[ACTUALITE APP] SAVE ERROR",O="[ACTUALITE APP] UPLOAD ATTACHEMENT",P="[ACTUALITE APP] UPLOAD REQUEST",j="[ACTUALITE APP] UPLOAD ERROR",C="[ACTUALITE APP] REQUEST DELETE",L="[ACTUALITE APP] DELETE SUCCESS";function w(e){var t=r.a.get("/api/actualites?slug=".concat(e));return function(e){return e({type:A}),t.then(function(t){e({type:v,payload:t.data["hydra:member"]})}).catch(function(t){e({type:I,payload:E.y.parseApiErrors(t)})})}}function S(e){e.image&&(e.image=e.image["@id"]);var t=r.a.post("/api/actualites",e);return function(e){return e({type:T}),t.then(function(t){return e(Object(n.B)({message:"Actualit\xe9 enregistr\xe9 avec succ\xe8s"})),e({type:y,payload:t.data})}).catch(function(t){e({type:I,payload:E.y.parseApiErrors(t)})})}}function U(e,t){e.image&&(e.image=e.image["@id"]);var a=r.a.put("/api/actualites/".concat(t),e);return function(e){return e({type:T}),a.then(function(t){return e(Object(n.B)({message:"Actualit\xe9 modifi\xe9 avec succ\xe8s"})),e({type:y,payload:t.data})}).catch(function(t){e({type:I,payload:E.y.parseApiErrors(t)})})}}function x(e){return function(t,a){var i=new FormData;i.append("file",e);var c=r.a.post("/api/actualite_images",i,{headers:{"Content-Type":"multipart/form-data"}});return t({type:P}),c.then(function(e){return Promise.all([e,t({type:O,payload:e.data}),t(Object(n.B)({message:"Document t\xe9l\xe9charg\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])}).catch(function(e){t({type:j}),t(Object(n.B)({message:h.a.map(E.y.parseApiErrors(e),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function R(){return{type:v,payload:{titre:"",description:"",source:"",image:null}}}a.d(t,"g",function(){return i}),a.d(t,"m",function(){return o}),a.d(t,"a",function(){return u}),a.d(t,"d",function(){return s}),a.d(t,"l",function(){return d}),a.d(t,"q",function(){return m}),a.d(t,"s",function(){return p}),a.d(t,"v",function(){return f}),a.d(t,"e",function(){return g}),a.d(t,"x",function(){return b}),a.d(t,"f",function(){return A}),a.d(t,"c",function(){return v}),a.d(t,"i",function(){return T}),a.d(t,"j",function(){return y}),a.d(t,"k",function(){return I}),a.d(t,"n",function(){return O}),a.d(t,"p",function(){return P}),a.d(t,"o",function(){return j}),a.d(t,"h",function(){return C}),a.d(t,"b",function(){return L}),a.d(t,"r",function(){return w}),a.d(t,"w",function(){return S}),a.d(t,"u",function(){return U}),a.d(t,"y",function(){return x}),a.d(t,"t",function(){return R})},1133:function(e,t){var a;(a=window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})).fr=Object.assign(a.fr||{},{a:"Envoi du fichier \xe9chou\xe9 :",b:"Barre d'outils des images",c:"Barre d'outils des tableaux",d:"Italique",e:"Choisir l'en-t\xeate",f:"En-t\xeate",g:"Ins\xe9rer une image ou un fichier",h:"Citation",i:"Objet image",j:"Ins\xe9rer une image",k:"Augmenter le retrait",l:"Diminuer le retrait",m:"Ins\xe9rer un tableau",n:"Colonne d'ent\xeate",o:"Ins\xe9rer une colonne \xe0 gauche",p:"Ins\xe9rer une colonne \xe0 droite",q:"Supprimer la colonne",r:"Colonne",s:"Ligne d'ent\xeate",t:"Ins\xe9rer une ligne en-dessous",u:"Ins\xe9rer une ligne au-dessus",v:"Supprimer la ligne",w:"Ligne",x:"Fusionner la cellule au-dessus",y:"Fusionner la cellule \xe0 droite",z:"Fusionner la cellule en-dessous",aa:"Fusionner la cellule \xe0 gauche",ab:"Scinder la cellule verticalement",ac:"Scinder la cellule horizontalement",ad:"Fusionner les cellules",ae:"Liste num\xe9rot\xe9e",af:"Liste \xe0 puces",ag:"Gras",ah:"Image taille r\xe9elle",ai:"Image lat\xe9rale",aj:"Image align\xe9e \xe0 gauche",ak:"Image centr\xe9e",al:"Image align\xe9e \xe0 droite",am:"Saisir la l\xe9gende de l\u2019image",an:"\xc9chec de l'envoi",ao:"Ins\xe9rer un m\xe9dia",ap:"L'URL ne doit pas \xeatre vide.",aq:"Cette URL de m\xe9dia n'est pas support\xe9e.",ar:"widget m\xe9dia",as:"Lien",at:"Impossible d'obtenir l'image redimensionn\xe9e",au:"La s\xe9lection de l'image redimensionn\xe9e a \xe9chou\xe9.",av:"Impossible d'ins\xe9rer l'image \xe0 la position courante.",aw:"L'insertion d'image a \xe9chou\xe9.",ax:"Barre d'outils du widget",ay:"T\xe9l\xe9chargement en cours",az:"Ouvrir dans un nouvel onglet",ba:"Fichier t\xe9l\xe9chargeable",bb:"Supprimer le lien",bc:"Modifier le lien",bd:"Ouvrir le lien dans un nouvel onglet",be:"Ce lien n'a pas d'URL",bf:"Enregistrer",bg:"Annuler",bh:"Coller l'URL du m\xe9dia",bi:"Astuce : Copier l'URL du m\xe9dia dans le contenu pour l'ins\xe9rer plus rapidement",bj:"URL de m\xe9dia",bk:"URL du lien",bl:"\xc9diteur de texte enrichi",bm:"Barre d'outils dans un menu d\xe9roulant",bn:"%0 sur %1",bo:"Pr\xe9cedent",bp:"Suivant",bq:"Barre d'outils de l'\xe9diteur",br:"Montrer plus d'\xe9l\xe9ments",bs:"Annuler",bt:"Restaurer",bu:"\xc9diteur de texte enrichi, %0",bv:"Changer le texte alternatif \xe0 l\u2019image",bw:"Paragraphe",bx:"Titre 1",by:"Titre 2",bz:"Titre 3",ca:"Titre 4",cb:"Titre 5",cc:"Titre 6",cd:"Texte alternatif"})},1166:function(e,t,a){"use strict";var n=a(46),r=a(8),i=a(1075),c=a(107),l={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,description:"",filter:{id:"created",direction:"desc"}}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a:return Object(r.a)({},e,{data:[]});case i.g:return Object(r.a)({},e,{loading:!0});case i.d:return Object(r.a)({},e,{data:t.payload["hydra:member"],pageCount:c.a.hydraPageCount(t.payload),loading:!1});case i.l:return Object(r.a)({},e,{searchText:t.searchText});case i.m:return Object(r.a)({},e,{parametres:{page:t.parametres.page,description:t.parametres.description,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}});default:return e}},u={data:null,error:null,loading:!1,success:!1,imageReqInProgress:!1,deleteReqInProgress:!1,image:null,image_deleted:null},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.f:case i.i:return Object(r.a)({},e,{loading:!0});case i.p:return Object(r.a)({},e,{imageReqInProgress:!0});case i.h:return Object(r.a)({},e,{deleteReqInProgress:!0});case i.n:return Object(r.a)({},e,{image:t.payload,imageReqInProgress:!1});case i.b:return Object(r.a)({},e,{deleteReqInProgress:!1,image_deleted:t.id});case i.o:return Object(r.a)({},e,{imageReqInProgress:!1});case i.c:return Object(r.a)({},e,{data:t.payload[0]?t.payload[0]:t.payload,loading:!1});case i.j:return Object(r.a)({},e,{loading:!1,success:!0});case i.k:return Object(r.a)({},e,{error:t.payload,loading:!1,success:!1});default:return e}},d=Object(n.d)({actualites:o,actualite:s});t.a=d},1325:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(23),i=a(0),c=a.n(i),l=a(98),o=a(1013),u=a(1032),s=a(1044),d=a(1027),m=a(1035),p=a(1041),f=a(345),g=a(40),b=a(141),E=a(18),h=a(2),A=a(10),v=a(6),T=a(140),y=a(1075),I=a(1166),O=a(55),P=a.n(O),j=a(1049),C=a.n(j),L=a(1126),w=a.n(L),S=a(1128),U=a.n(S),x=(a(1133),Object(f.a)(function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},buttonProgress:{color:C.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));t.default=Object(T.a)("actualiteApp",I.a)(function(e){var t=Object(v.b)(),a=Object(v.c)(function(e){return e.actualiteApp.actualite}),f=Object(i.useState)(!1),T=Object(r.a)(f,2),I=T[0],O=T[1],j=Object(i.useRef)(null),C=Object(b.b)(null),L=C.form,S=C.handleChange,R=C.setForm,N=x(e),q=Object(i.useState)(0),B=Object(r.a)(q,2),D=B[0],k=B[1];function F(){O(!1)}return Object(i.useEffect)(function(){!function(){var a=e.match.params.actualiteId;t("new"===a?y.t():y.r(a))}()},[t,e.match.params]),Object(i.useEffect)(function(){a.image&&(R(A.a.set(Object(n.a)({},L),"image",a.image)),a.image=null)},[L,R,a.image]),Object(i.useEffect)(function(){a.error&&(a.error.titre||a.error.source)&&(j.current.updateInputsWithError(Object(n.a)({},a.error)),F(),a.error=null)},[a.error]),Object(i.useEffect)(function(){a.success&&(a.success=!1,a.data=null,a.error=null,a.image_deleted=null,e.history.push("/admin/actualites"))},[a.success]),Object(i.useEffect)(function(){(a.data&&!L||a.data&&L&&a.data.id!==L.id)&&R(Object(n.a)({},a.data))},[L,a.data,R]),c.a.createElement(g.o,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:a.loading?"":L&&c.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},c.a.createElement("div",{className:"flex flex-col items-start max-w-full"},c.a.createElement(g.d,{animation:"transition.slideRightIn",delay:300},c.a.createElement(l.a,{className:"normal-case flex items-center sm:mb-12",component:E.a,role:"button",to:"/admin/actualites",color:"inherit"},c.a.createElement(o.a,{className:"mr-4 text-20"},"arrow_back"),"Retour")),c.a.createElement("div",{className:"flex items-center max-w-full"},c.a.createElement("div",{className:"flex flex-col min-w-0"},c.a.createElement(g.d,{animation:"transition.slideLeftIn",delay:300},c.a.createElement(l.a,{className:"text-16 sm:text-20 truncate"},L.titre?L.titre:"Nouvelle Actualit\xe9")),c.a.createElement(g.d,{animation:"transition.slideLeftIn",delay:300},c.a.createElement(l.a,{variant:"caption"},"D\xe9tails de l'actualit\xe9"," ")))))),contentToolbar:a.loading?c.a.createElement("div",{className:N.root},c.a.createElement(u.a,{color:"secondary"})):c.a.createElement(s.a,{value:D,onChange:function(e,t){k(t)},indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},c.a.createElement(d.a,{className:"h-64 normal-case",label:"Infos g\xe9n\xe9rales"}),c.a.createElement(d.a,{className:"h-64 normal-case",label:"Image"})),content:a.loading?"":L&&c.a.createElement("div",{className:"p-10  sm:p-24 max-w-2xl"},0===D&&c.a.createElement(P.a,{onValidSubmit:function(a){var n=e.match.params.actualiteId;t("new"===n?y.w(L):y.u(L,L.id))},onValid:function(){O(!0)},onInvalid:F,ref:j,className:"flex flex-col "},c.a.createElement("div",{className:"flex pt-10 "},c.a.createElement(g.F,{className:"mb-16",label:"Titre",autoFocus:!0,id:"titre",name:"titre",value:L.titre,onChange:S,variant:"outlined",validations:{minLength:6},validationErrors:{minLength:"La longueur minimale des caract\xe8res est de 6"},required:!0,fullWidth:!0})),c.a.createElement("div",{className:"flex"},c.a.createElement(g.F,{className:"mb-16 mt-16  w-full",type:"text",name:"apercu",value:L.apercu,onChange:S,label:"Aper\xe7u",validations:{minLength:20},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 20"},required:!0,variant:"outlined",multiline:!0,rows:"2"})),c.a.createElement("div",{className:"flex"},c.a.createElement(g.F,{className:"mb-16",type:"text",name:"source",value:L.source,onChange:S,autoComplete:"website",label:"Source",validations:"isUrl",validationErrors:{isUrl:"Exemple : http://www.exemple.com"},variant:"outlined",required:!0,fullWidth:!0})),c.a.createElement(w.a,{editor:U.a,data:L.description,config:{language:"fr",ckfinder:{uploadUrl:"http://localhost:8080/ProjectlesHA/public/ckfinder/connector?command=QuickUpload&CKEditor=editor1&type=Images&responseType=json"}},onInit:function(e){console.log("Editor is ready to use!",e)},onChange:function(e,t){var a=t.getData();R(A.a.set(Object(n.a)({},L),"description",a))},onBlur:function(e){console.log("Blur.",e)}}),a.error&&a.error.description?c.a.createElement("span",{className:"text-red"}," ",a.error.description):"",c.a.createElement(m.a,{type:"submit",variant:"contained",color:"primary",className:"w-200 pr-auto mt-16 normal-case","aria-label":"Suivant",disabled:!I||a.loading||!L.description||!L.image,value:"legacy"},"Sauvegarder",a.loading&&c.a.createElement(p.a,{size:24,className:N.buttonProgress}))),1===D&&c.a.createElement("div",null,c.a.createElement("input",{accept:"image/jpeg,image/gif,image/png",className:"hidden",id:"button-file",type:"file",disabled:a.imageReqInProgress,onChange:function(e){var a=e.target.files[0];a&&t(y.y(a))}}),c.a.createElement("div",{className:"flex justify-center sm:justify-start flex-wrap"},c.a.createElement("label",{htmlFor:"button-file",className:Object(h.a)(N.imageImageUpload,"flex items-center justify-center relative w-128 h-128 rounded-4 mr-16 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5")},a.imageReqInProgress?c.a.createElement(p.a,{size:24,className:N.buttonProgress}):c.a.createElement(o.a,{fontSize:"large",color:"action"},"arrow_upward")),L.image?c.a.createElement("div",{className:Object(h.a)(N.imageImageItem,"flex items-center cursor-pointer justify-center relative w-128 h-128 rounded-4 mr-16 mb-16 overflow-hidden  shadow-1 hover:shadow-5"),onClick:L.image?function(){return window.open(g.G+L.image.url,"_blank")}:""},c.a.createElement("img",{className:"max-w-none w-auto h-full",src:g.G+L.image.url,alt:L.titre})):""))),innerScroll:!0})})}}]);