(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1075:function(e,t,a){"use strict";var n=a(36),r=a(54),i="[ACTUALITES APP] REQUEST ACTUALITES",c="[ACTUALITES APP] REMOVE ACTUALITES",l="[ACTUALITES APP] STATUT ACTUALITES",u="[ACTUALITES APP] SET PARAMETRES DATA",o="[ACTUALITES APP] CLEAN_UP",s="[USERS APP] GET ACTUALITES",d="[USERS APP] SET ACTUALITES SEARCH TEXT";function p(){return function(e){return e({type:o})}}function m(e){var t=e.description?"=".concat(e.description):"",a=r.a.get("/api/actualites?page=".concat(e.page,"&description").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:i}),a.then(function(t){return e({type:s,payload:t.data})})}}function f(e,t){return function(a){return r.a.delete("/api/actualites/".concat(e.id)).then(function(e){return Promise.all([a({type:c}),a(Object(n.B)({message:"Actualite bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return a(m(t))})})}}function g(e,t,a){var i={isActive:t};return function(c,u){return r.a.put("/api/actualites/".concat(e.id),i).then(function(e){return Promise.all([c({type:l}),c(Object(n.B)({message:t?"Cette actualit\xe9 est publi\xe9e aux publics":"Cette actualit\xe9 est priv\xe9e",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return c(m(a))})})}}function E(e){return{type:u,parametres:e}}var A=a(40),h=a(10),T="[ACTUALITE APP] REQUEST ACTUALITE",b="[ACTUALITE APP] GET ACTUALITE",P="[ACTUALITE APP] REQUEST SAVE",y="[ACTUALITE APP] SAVE ACTUALITE",v="[ACTUALITE APP] SAVE ERROR",O="[ACTUALITE APP] UPLOAD ATTACHEMENT",C="[ACTUALITE APP] UPLOAD REQUEST",j="[ACTUALITE APP] UPLOAD ERROR",x="[ACTUALITE APP] REQUEST DELETE",S="[ACTUALITE APP] DELETE SUCCESS";function U(e){var t=r.a.get("/api/actualites?slug=".concat(e));return function(e){return e({type:T}),t.then(function(t){e({type:b,payload:t.data["hydra:member"]})}).catch(function(t){e({type:v,payload:A.y.parseApiErrors(t)})})}}function I(e){e.image&&(e.image=e.image["@id"]);var t=r.a.post("/api/actualites",e);return function(e){return e({type:P}),t.then(function(t){return e(Object(n.B)({message:"Actualit\xe9 enregistr\xe9 avec succ\xe8s"})),e({type:y,payload:t.data})}).catch(function(t){e({type:v,payload:A.y.parseApiErrors(t)})})}}function L(e,t){e.image&&(e.image=e.image["@id"]);var a=r.a.put("/api/actualites/".concat(t),e);return function(e){return e({type:P}),a.then(function(t){return e(Object(n.B)({message:"Actualit\xe9 modifi\xe9 avec succ\xe8s"})),e({type:y,payload:t.data})}).catch(function(t){e({type:v,payload:A.y.parseApiErrors(t)})})}}function N(e){return function(t,a){var i=new FormData;i.append("file",e);var c=r.a.post("/api/actualite_images",i,{headers:{"Content-Type":"multipart/form-data"}});return t({type:C}),c.then(function(e){return Promise.all([e,t({type:O,payload:e.data}),t(Object(n.B)({message:"Document t\xe9l\xe9charg\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])}).catch(function(e){t({type:j}),t(Object(n.B)({message:h.a.map(A.y.parseApiErrors(e),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function R(){return{type:b,payload:{titre:"",description:"",source:"",image:null}}}a.d(t,"g",function(){return i}),a.d(t,"m",function(){return u}),a.d(t,"a",function(){return o}),a.d(t,"d",function(){return s}),a.d(t,"l",function(){return d}),a.d(t,"q",function(){return p}),a.d(t,"s",function(){return m}),a.d(t,"v",function(){return f}),a.d(t,"e",function(){return g}),a.d(t,"x",function(){return E}),a.d(t,"f",function(){return T}),a.d(t,"c",function(){return b}),a.d(t,"i",function(){return P}),a.d(t,"j",function(){return y}),a.d(t,"k",function(){return v}),a.d(t,"n",function(){return O}),a.d(t,"p",function(){return C}),a.d(t,"o",function(){return j}),a.d(t,"h",function(){return x}),a.d(t,"b",function(){return S}),a.d(t,"r",function(){return U}),a.d(t,"w",function(){return I}),a.d(t,"u",function(){return L}),a.d(t,"y",function(){return N}),a.d(t,"t",function(){return R})},1166:function(e,t,a){"use strict";var n=a(46),r=a(8),i=a(1075),c=a(107),l={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,description:"",filter:{id:"created",direction:"desc"}}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a:return Object(r.a)({},e,{data:[]});case i.g:return Object(r.a)({},e,{loading:!0});case i.d:return Object(r.a)({},e,{data:t.payload["hydra:member"],pageCount:c.a.hydraPageCount(t.payload),loading:!1});case i.l:return Object(r.a)({},e,{searchText:t.searchText});case i.m:return Object(r.a)({},e,{parametres:{page:t.parametres.page,description:t.parametres.description,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}});default:return e}},o={data:null,error:null,loading:!1,success:!1,imageReqInProgress:!1,deleteReqInProgress:!1,image:null,image_deleted:null},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.f:case i.i:return Object(r.a)({},e,{loading:!0});case i.p:return Object(r.a)({},e,{imageReqInProgress:!0});case i.h:return Object(r.a)({},e,{deleteReqInProgress:!0});case i.n:return Object(r.a)({},e,{image:t.payload,imageReqInProgress:!1});case i.b:return Object(r.a)({},e,{deleteReqInProgress:!1,image_deleted:t.id});case i.o:return Object(r.a)({},e,{imageReqInProgress:!1});case i.c:return Object(r.a)({},e,{data:t.payload[0]?t.payload[0]:t.payload,loading:!1});case i.j:return Object(r.a)({},e,{loading:!1,success:!0});case i.k:return Object(r.a)({},e,{error:t.payload,loading:!1,success:!1});default:return e}},d=Object(n.d)({actualites:u,actualite:s});t.a=d},1407:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(40),c=a(140),l=a(23),u=a(1029),o=a(958),s=a(1013),d=a(78),p=a(1075),m=a(6),f=a(64),g=a.n(f),E=a(347),A=a(10);var h=Object(d.g)(function(e){var t=Object(m.b)(),a=Object(m.c)(function(e){return e.actualiteApp.actualites.data}),c=Object(m.c)(function(e){return e.actualiteApp.actualites.loading}),d=Object(m.c)(function(e){return e.actualiteApp.actualites.pageCount}),f=Object(m.c)(function(e){return e.actualiteApp.actualites.parametres}),h=Object(m.c)(function(e){return e.actualiteApp.actualites.searchText}),T=Object(n.useState)(null),b=Object(l.a)(T,2),P=b[0],y=b[1];return Object(n.useEffect)(function(){a&&y(function(e,t){var a=Object.keys(e).map(function(t){return e[t]});return 0===t.length?a:i.y.filterArrayByString(a,t)}(a,h))},[a,h]),P?r.a.createElement(i.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(E.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(t,a,n){return{className:"h-64 cursor-pointer",onClick:function(t,n){a&&e.history.push("/admin/actualites/"+a.original.slug)}}},getTheadProps:function(e,t,a){return{className:"h-64 font-bold"}},data:P,columns:[{Header:"",accessor:"image",Cell:function(e){return e.original.image?r.a.createElement("img",{className:"w-full block rounded",src:i.G+e.original.image.url,alt:e.original.titre}):r.a.createElement("img",{className:"w-full block rounded",src:"assets/images/ecommerce/product-image-placeholder.png",alt:e.original.titre})},className:"justify-center",width:64,sortable:!1,filterable:!1},{Header:"Titre",accessor:"titre",filterable:!1,Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},A.a.capitalize(A.a.truncate(e.original.titre,{length:20})))}},{Header:"Description",accessor:"description",filterable:!1,Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},A.a.capitalize(A.a.truncate(e.original.description,{length:50})))}},{Header:"Date de cr\xe9ation",accessor:"created",filterable:!1,Cell:function(e){return g()(e.original.created).format("DD/MM/YYYY HH:mm")}},{Header:"Publi\xe9e",accessor:"isActive",Cell:function(e){return e.original.isActive?r.a.createElement(u.a,{title:"Publi\xe9e"},r.a.createElement(o.a,{className:"text-green text-20",onClick:function(a){a.stopPropagation(),t(p.e(e.original,!1,f))}},r.a.createElement(s.a,null,"check_circle"))):r.a.createElement(u.a,{title:"Priv\xe9e"},r.a.createElement(o.a,{className:"text-red text-20",onClick:function(a){a.stopPropagation(),t(p.e(e.original,!0,f))}},r.a.createElement(s.a,null,"remove_circle")))}},{Header:"",Cell:function(e){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(u.a,{title:"Supprimer"},r.a.createElement(o.a,{className:"text-red text-20",onClick:function(a){a.stopPropagation(),t(p.v(e.original,f))}},r.a.createElement(s.a,null,"delete"))),r.a.createElement(u.a,{title:"Editer"},r.a.createElement(o.a,{className:"text-teal text-20"},r.a.createElement(s.a,null,"edit"))))}}],manual:!0,defaultSortDesc:!0,pages:d,page:f.page-1,defaultPageSize:10,loading:c,showPageSizeOptions:!1,onPageChange:function(e){f.page=e+1,t(p.x(f))},onSortedChange:function(e,a,n){f.page=1,f.filter.id=e[0].id,f.filter.direction=e[0].desc?"desc":"asc",t(p.x(f))},noDataText:"No Actualite found",loadingText:"Chargement...",ofText:"sur"})):null}),T=a(98),b=a(139),P=a(957),y=a(1035),v=a(1014),O=a(18);var C=function(e){var t=Object(m.b)(),a=Object(m.c)(function(e){return e.fuse.settings.mainTheme}),n=Object(m.c)(function(e){return e.actualiteApp.actualites.parametres});return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(i.d,{animation:"transition.expandIn",delay:300},r.a.createElement(s.a,{className:"text-32 mr-0 sm:mr-12"},"inbox")),r.a.createElement(i.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(T.a,{className:"hidden sm:flex",variant:"h6"},"Gestion des actualit\xe9s"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},r.a.createElement(v.a,{theme:a},r.a.createElement(i.d,{animation:"transition.slideDownIn",delay:300},r.a.createElement(b.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},r.a.createElement(s.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(P.a,{placeholder:"Rechercher dans la description",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:n.description,inputProps:{"aria-label":"Rechercher"},onChange:function(e){n.page=1,n.description=e.target.value,t(p.x(n))}}))))),r.a.createElement(i.d,{animation:"transition.slideRightIn",delay:300},r.a.createElement(y.a,{component:O.a,to:"/admin/actualites/new",className:"whitespace-no-wrap",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Ajouter nouvelle actualit\xe9"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},j=a(1166);t.default=Object(c.a)("actualiteApp",j.a)(function(){var e=Object(m.b)(),t=Object(m.c)(function(e){return e.actualiteApp.actualites.parametres});return Object(n.useEffect)(function(){return e(p.s(t)),function(){e(p.q())}},[e,t]),r.a.createElement(i.o,{classes:{content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(C,null),content:r.a.createElement(h,null),innerScroll:!0})})}}]);