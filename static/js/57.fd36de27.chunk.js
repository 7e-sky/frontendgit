(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1056:function(e,t,n){"use strict";var r=n(36),a=n(54),i=n(196),c=(n(1069),"[DEMANDES APP] REQUEST DEMANDES"),o="[DEMANDES APP] REMOVE DEMANDES",u="[DEMANDES APP] SET PARAMETRES DATA",d="[DEMANDES APP] CLEAN_UP",s="[DEMANDES APP] GET DEMANDES",l="[DEMANDES APP] SET DEMANDES SEARCH TEXT";function f(){return function(e){return e({type:d})}}function p(e){var t="";e.search.length>0&&e.search.map(function(e){return e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value)});var n=a.a.get("/api/demande_devis?page=".concat(e.page,"&del=0&statut=false").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:c}),n.then(function(t){return e({type:s,payload:t.data})})}}function m(e){var t="";e.search.length>0&&e.search.map(function(e){return e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value)});var n=a.a.get("/api/demande_devis?page=".concat(e.page,"&del=0&statut=1").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:c}),n.then(function(t){return e({type:s,payload:t.data})})}}function g(e){var t="";e.search.length>0&&e.search.map(function(e){return e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value)});var n=a.a.get("/api/demande_devis?page=".concat(e.page,"&del=1").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:c}),n.then(function(t){return e({type:s,payload:t.data})})}}function E(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c={del:n};return function(u,d){return a.a.put("/api/demande_devis/".concat(e.id),c).then(function(e){return Promise.all([u({type:o}),u(i.b("demandes-devis")),u(!1===n?Object(r.B)({message:"Demande bien recup\xe9r\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}):Object(r.B)({message:"Demande bien supprim\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return u(!1===n?g(t):p(t))})})}}function h(e){return{type:u,parametres:e}}var A=n(40),v="[DEMANDE APP] REQUEST DEMANDE",P="[DEMANDE APP] GET DEMANDE",D="[DEMANDE APP] REQUEST SAVE",b="[DEMANDE APP] SAVE DEMANDE",y="[DEMANDE APP] SAVE ERROR";function O(e){var t=a.a.get("/api/demande_devis/".concat(e));return function(e){return e({type:v}),t.then(function(t){e({type:P,payload:t.data})}).catch(function(t){e({type:y,payload:A.y.parseApiErrors(t)})})}}function T(e,t){var n=a.a.put("/api/demande_devis/".concat(t),e);return function(e){return e({type:D}),n.then(function(t){return e(Object(r.B)({message:"Demande Modifi\xe9e"})),e(i.b("demandes-devis")),e({type:b,payload:t.data})}).catch(function(t){e({type:y,payload:A.y.parseApiErrors(t)})})}}var S="[DIALOG] OPEN",N="[DIALOG] CLOSE";function C(){return{type:N}}function j(e){return{type:S,options:e}}n.d(t,"e",function(){return c}),n.d(t,"j",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return s}),n.d(t,"i",function(){return l}),n.d(t,"k",function(){return f}),n.d(t,"o",function(){return p}),n.d(t,"p",function(){return m}),n.d(t,"n",function(){return g}),n.d(t,"s",function(){return E}),n.d(t,"t",function(){return h}),n.d(t,"d",function(){return v}),n.d(t,"b",function(){return P}),n.d(t,"f",function(){return D}),n.d(t,"g",function(){return b}),n.d(t,"h",function(){return y}),n.d(t,"m",function(){return O}),n.d(t,"r",function(){return T}),n.d(t,"l",function(){return C}),n.d(t,"q",function(){return j})},1069:function(e,t,n){"use strict";var r=n(54),a="[PORTAIL APP] REQUEST_DEMANDE_DEVIS",i="[PORTAIL APP] GET_DEMANDE_DEVIS",c="[PORTAIL APP] REQUEST_ACTUALITE",o="[PORTAIL APP] GET_ACTUALITE",u="[PORTAIL APP] REQUEST_FOCUS_PRODUITS",d="[PORTAIL APP] GET_FOCUS_PRODUITS",s="[PORTAIL APP] REQUEST_CATEGORIES",l="[PORTAIL APP] GET_CATEGORIES",f="[PORTAIL APP] CLEAN_UP_DEVIS",p="[PORTAIL APP] CLEAN_UP_PRODUCT",m="[PORTAIL APP] CLEAN_UP_NEW",g="[PORTAIL APP] CLEAN_UP_NEW";function E(){return function(e){return e({type:g})}}function h(){return function(e){return e({type:f})}}function A(){return function(e){return e({type:p})}}function v(){return function(e){return e({type:m})}}function P(){var e=r.a.get("/api/focus_categories_mobile");return function(t){return t({type:s}),e.then(function(e){return t({type:l,payload:e.data})})}}function D(){var e=r.a.get("/api/select_produits?produit[exists]=true");return function(t){return t({type:u}),e.then(function(e){return t({type:d,payload:e.data["hydra:member"]})})}}function b(){var e=r.a.get("/api/demande_achats?itemsPerPage=4&statut=1&isPublic=1&order[created]=desc&props[]=id&props[]=reference&props[]=titre&props[]=description&props[]=pays&props[]=ville&props[]=dateExpiration&props[]=created&props[]=slug");return function(t){return t({type:a}),e.then(function(e){return t({type:i,payload:e.data["hydra:member"]})})}}function y(){var e=r.a.get("/api/actualites?itemsPerPage=4&isActive=true&order[created]=desc");return function(t){return t({type:c}),e.then(function(e){return t({type:o,payload:e.data["hydra:member"]})})}}n.d(t,"k",function(){return a}),n.d(t,"g",function(){return i}),n.d(t,"i",function(){return c}),n.d(t,"e",function(){return o}),n.d(t,"l",function(){return u}),n.d(t,"h",function(){return d}),n.d(t,"j",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"b",function(){return f}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return m}),n.d(t,"a",function(){return g}),n.d(t,"m",function(){return E}),n.d(t,"n",function(){return h}),n.d(t,"p",function(){return A}),n.d(t,"o",function(){return v}),n.d(t,"q",function(){return P}),n.d(t,"r",function(){return D}),n.d(t,"t",function(){return b}),n.d(t,"s",function(){return y})},1093:function(e,t,n){"use strict";var r=n(46),a=n(8),i=n(1056),c=n(107),o={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,search:[],filter:{id:"created",direction:"desc"}},demandesDialog:{props:{open:!1}}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a:return Object(a.a)({},o);case i.e:return Object(a.a)({},e,{loading:!0});case i.c:return Object(a.a)({},e,{data:t.payload["hydra:member"],pageCount:c.a.hydraPageCount(t.payload),loading:!1});case i.i:return Object(a.a)({},e,{searchText:t.searchText});case i.j:return Object(a.a)({},e,{parametres:{page:t.parametres.page,search:t.parametres.search,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}});default:return e}},d={data:null,error:null,loading:!1,success:!1},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.d:case i.f:return Object(a.a)({},e,{loading:!0});case i.b:return Object(a.a)({},e,{data:t.payload,loading:!1});case i.g:return Object(a.a)({},e,{loading:!1,success:!0});case i.h:return Object(a.a)({},e,{error:t.payload,loading:!1,success:!1});default:return e}},l=n(36),f={state:!1,options:{children:"Hi"}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.f:return Object(a.a)({},e,{state:!0,options:Object(a.a)({},e.options,t.options)});case l.a:return Object(a.a)({},e,{state:!1});default:return e}},m=Object(r.d)({demandesDevis:u,demandeDevis:s,dialog:p});t.a=m},1388:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(40),c=n(140),o=n(23),u=n(967),d=n(1029),s=n(958),l=n(1013),f=n(78),p=n(1056),m=n(6),g=n(64),E=n.n(g),h=n(107),A=n(347),v=n(1034),P=n(10),D=Object(v.a)(function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},chip:{marginLeft:e.spacing(1),padding:2,background:"#ef5350",color:"white",fontWeight:"bold",fontSize:"11px",height:20},chip2:{marginLeft:e.spacing(1),padding:2,background:"#4caf50",color:"white",fontWeight:"bold",fontSize:"11px",height:20},chipOrange:{marginLeft:e.spacing(1),padding:2,background:"#ff9800",color:"white",fontWeight:"bold",fontSize:"11px",height:20}}});var b=Object(f.g)(function(e){D();var t=Object(m.b)(),n=Object(m.c)(function(e){return e.demandesDevistraitesApp.demandesDevis.data}),c=Object(m.c)(function(e){return e.demandesDevistraitesApp.demandesDevis.loading}),f=Object(m.c)(function(e){return e.demandesDevistraitesApp.demandesDevis.pageCount}),g=Object(m.c)(function(e){return e.demandesDevistraitesApp.demandesDevis.parametres}),v=Object(m.c)(function(e){return e.demandesDevistraitesApp.demandesDevis.searchText}),b=Object(r.useState)(null),y=Object(o.a)(b,2),O=y[0],T=y[1],S=P.a.debounce(function(e){return t(p.t(e))},1e3);return Object(r.useEffect)(function(){n&&T(function(e,t){var n=Object.keys(e).map(function(t){return e[t]});return 0===t.length?n:h.a.filterArrayByString(n,t)}(n,v))},[n,v]),O?a.a.createElement("div",{className:"w-full flex flex-col"},a.a.createElement(i.d,{animation:"transition.slideUpIn",delay:300},a.a.createElement(A.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(t,n,r){return{className:"h-64 cursor-pointer",onClick:function(t,r){n&&e.history.push("/demandes_devis/"+n.original.id)}}},getTheadProps:function(e,t,n){return{className:"h-64"}},data:O,columns:[{Header:"Fournisseur",className:"font-bold",accessor:"fournisseur",filterable:!0,Cell:function(e){return e.original.fournisseur?e.original.fournisseur.societe:""}},{Header:"Produit r\xe9f.",className:"font-bold",accessor:"produit.reference",filterable:!0,Cell:function(e){return e.original.produit?e.original.produit.reference:""}},{Header:"Quantit\xe9",accessor:"quantity",filterable:!0,Cell:function(e){return e.original.quantity?e.original.quantity:""}},{Header:"Nom Contact",accessor:"contact",filterable:!0,Cell:function(e){return e.original.contact?e.original.contact:""}},{Header:"Soci\xe9t\xe9",accessor:"societe",filterable:!0,Cell:function(e){return e.original.societe?e.original.societe:""}},{Header:"T\xe9l\xe9phone",accessor:"phone",filterable:!0,Cell:function(e){return e.original.phone?e.original.phone:""}},{Header:"Email",accessor:"email",filterable:!0,Cell:function(e){return e.original.email?e.original.email:""}},{Header:"Adresse",accessor:"adresse",filterable:!0,Cell:function(e){return e.original.adresse?e.original.adresse:""}},{Header:"Message",accessor:"message",filterable:!0,Cell:function(e){return P.a.truncate(e.original.message,{length:36,separator:" "})}},{Header:"Date de cr\xe9ation",accessor:"created",filterable:!0,Cell:function(e){return E()(e.original.created).format("DD/MM/YYYY HH:mm")},Filter:function(e){var t=e.filter,n=e.onChange;return a.a.createElement(u.a,{onChange:function(e){return n(e.target.value)},style:{width:"100%"},value:t?t.value:"",type:"date",InputLabelProps:{shrink:!0}})}},{Header:"",Cell:function(e){return a.a.createElement("div",{className:"flex items-center"},a.a.createElement(d.a,{title:"D\xe9tails"},a.a.createElement(s.a,{className:"text-teal text-20"},a.a.createElement(l.a,null,"remove_red_eye"))))}}],manual:!0,defaultSortDesc:!0,pages:f,page:g.page-1,defaultPageSize:10,loading:c,showPageSizeOptions:!1,onPageChange:function(e){g.page=e+1,t(p.t(g))},onSortedChange:function(e,n,r){g.page=1,g.filter.id=e[0].id,g.filter.direction=e[0].desc?"desc":"asc",t(p.t(g))},onFilteredChange:function(e){g.page=1,g.search=e,S(g)},noDataText:"Aucune demande trouv\xe9e",loadingText:"Chargement...",ofText:"sur"}))):null}),y=n(98);var O=function(e){return a.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},a.a.createElement("div",{className:"flex items-center"},a.a.createElement(i.d,{animation:"transition.expandIn",delay:300},a.a.createElement(l.a,{className:"text-32 mr-0 sm:mr-12"},"inbox")),a.a.createElement(i.d,{animation:"transition.slideLeftIn",delay:300},a.a.createElement(y.a,{className:"hidden sm:flex",variant:"h6"},"Demandes de devis trait\xe9es"))))},T=n(1093),S=n(346);t.default=Object(c.a)("demandesDevistraitesApp",T.a)(function(){var e=Object(m.b)(),t=Object(m.c)(function(e){return e.demandesDevistraitesApp.demandesDevis.parametres});return Object(r.useEffect)(function(){return e(p.p(t)),function(){e(p.k())}},[e,t]),a.a.createElement(a.a.Fragment,null,a.a.createElement(S.Helmet,null,a.a.createElement("title",null,"Demandes devis trait\xe9es | Les Achats Industriels"),a.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),a.a.createElement("meta",{name:"googlebot",content:"noindex"})),a.a.createElement(i.o,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:a.a.createElement(O,null),content:a.a.createElement(b,null),innerScroll:!0}))})}}]);