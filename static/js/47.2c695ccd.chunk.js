(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1051:function(e,t,a){"use strict";var n=a(3),r=a.n(n),c=a(4),i=a.n(c),o=a(0),u=a.n(o),l=(a(1),a(2)),s=a(7),d=a(98),p=u.a.forwardRef(function(e,t){var a=e.children,n=e.classes,c=e.className,o=e.disableTypography,s=void 0!==o&&o,p=i()(e,["children","classes","className","disableTypography"]);return u.a.createElement("div",r()({className:Object(l.a)(n.root,c),ref:t},p),s?a:u.a.createElement(d.a,{variant:"h6"},a))});t.a=Object(s.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(p)},1052:function(e,t,a){"use strict";var n=a(3),r=a.n(n),c=a(0),i=a.n(c),o=(a(1),a(7)),u=a(98),l=i.a.forwardRef(function(e,t){return i.a.createElement(u.a,r()({component:"p",variant:"body1",color:"textSecondary",ref:t},e))});t.a=Object(o.a)({root:{marginBottom:16}},{name:"MuiDialogContentText"})(l)},1063:function(e,t,a){"use strict";var n=a(36),r=a(54),c="[ACHETEURS ADMIN APP] REQUEST ACHETEURS",i="[ACHETEURS ADMIN APP] SET PARAMETRES DATA",o="[ACHETEURS ADMIN APP] GET ACHETEURS",u="[ACHETEURS ADMIN APP] OPEN NEW ACHETEURS DIALOG",l="[ACHETEURS ADMIN APP] SET ACHETEURS SEARCH TEXT";function s(){return{type:u}}function d(e){var t="";e.search.length>0&&e.search.map(function(e){return e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value)});var a=r.a.get("/api/acheteurs?page=".concat(e.page).concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return function(e){return e({type:c}),a.then(function(t){return e({type:o,payload:t.data})})}}function p(e,t,a){var i={isactif:t};return function(t){return t({type:c}),r.a.put(e["@id"],i).then(function(e){return Promise.all([t(Object(n.B)({message:"Statut modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(function(){return t(d(a))})})}}function f(e){return{type:i,parametres:e}}var m=a(8),E=a(107),h=a(10),A=a(196),g=a(64),v=a.n(g),y="[ACHETEURS ADMIN APP] REQUEST ACHETEUR",b="[ACHETEURS ADMIN APP] GET ACHETEUR",P="[ACHETEURS ADMIN APP] REQUEST ACHETEUR DEMANDES",T="[ACHETEURS ADMIN APP] GET ACHETEUR DEMANDES",O="[ACHETEURS ADMIN APP] REQUEST ACHETEUR BL",R="[ACHETEURS ADMIN APP] GET ACHETEUR BL",C="[ACHETEURS ADMIN APP] GET PAYS",D="[ACHETEURS ADMIN APP] GET VILLES",N="[ACHETEURS ADMIN APP] REQUEST PAYS",S="[ACHETEURS ADMIN APP] REQUEST VILLES",j="[ACHETEURS ADMIN APP] SAVE ERROR",H="[ACHETEURS ADMIN APP] UPDATE ACHETEUR",U="[ACHETEURS ADMIN APP] REQUEST UPDATE_ACHETEUR",I="[ACHETEURS ADMIN APP] GET_SECTEURS",x="[ACHETEURS ADMIN APP] REQUEST_ADD_VILLE",M="[ACHETEURS ADMIN APP] SAVE_ADD_VILLE",w="[ACHETEURS ADMIN APP] SAVE_ERROR_ADD_VILLE",L="[ACHETEURS ADMIN APP] CLEAN_UP_VILLE",_="[ACHETEURS ADMIN APP] UPLOAD AVATAR",Y="[ACHETEURS ADMIN APP] UPLOAD REQUEST",B="[ACHETEURS ADMIN APP] UPLOAD ERROR",k="[ACHETEURS ADMIN APP] SET PARAMETRES DETAIL",V="[ACHETEUR ADMIN APP] CLEAN_UP_ACHETEUR";function G(e){return{type:k,parametres:e}}function z(){return function(e){return e({type:V})}}function q(){return function(e){return e({type:L})}}function Q(e){var t=r.a.get("/api/acheteurs/".concat(e));return function(e){return e({type:y}),t.then(function(t){e({type:b,payload:t.data})})}}function F(e){var t=r.a.get("/api/acheteurs/".concat(e,"/blacklistes"));return function(e){return e({type:O}),t.then(function(t){e({type:R,payload:t.data})})}}function J(e,t){var a="";t.search.length>0&&t.search.map(function(e,t){e.value&&("created"===e.id||"dateExpiration"===e.id?a+="&"+e.id+"[after]="+e.value:"statut"===e.id?"0"===e.value?a+="&statut=0&dateExpiration[strictly_after]=".concat(v()().format("YYYY-MM-DDTHH:mm:ss")):"1"===e.value?a+="&statut=1&dateExpiration[strictly_after]=".concat(v()().format("YYYY-MM-DDTHH:mm:ss")):"2"===e.value?a+="&statut=2&dateExpiration[strictly_after]=".concat(v()().format("YYYY-MM-DDTHH:mm:ss")):"3"===e.value?a+="&statut=3":"4"===e.value&&(a+="&dateExpiration[strictly_before]=".concat(v()().format("YYYY-MM-DDTHH:mm:ss"))):a+="&"+e.id+"="+e.value)});var n=r.a.get("/api/acheteurs/".concat(e,"/demandes?page=").concat(t.page).concat(a,"&order[").concat(t.filter.id,"]=").concat(t.filter.direction));return function(e){return e({type:P}),n.then(function(t){e({type:T,payload:t.data})})}}function W(){var e=r.a.get("/api/pays?pagination=false&props[]=id&props[]=name");return function(t){return t({type:N}),e.then(function(e){t({type:C,payload:e.data["hydra:member"]})})}}function K(e){var t=r.a.get("".concat(e,"/villes?pagination=false&props[]=id&props[]=name"));return function(e){return e({type:S}),t.then(function(t){e({type:D,payload:t.data["hydra:member"]})})}}function X(e,t,a){var c={name:e,pays:"/api/pays/".concat(t)},i=r.a.post("/api/villes",c);return function(e){return e({type:x}),e({type:U}),i.then(function(n){e(K("/api/pays/".concat(t)));var c={ville:n.data["@id"],autreVille:null};return r.a.put("/api/acheteurs/".concat(a),c).then(function(t){e(A.b("acheteur-admin")),e({type:H,payload:t.data}),e({type:M})})}).catch(function(t){e({type:w}),e(Object(n.B)({message:h.a.map(E.a.parseApiErrors(t),function(e,t){return e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function Z(){var e=r.a.get("/api/secteurs?pagination=false&props[]=id&props[]=name");return function(t){return e.then(function(e){t({type:I,payload:e.data["hydra:member"]})})}}function $(e,t){var a=Object(m.a)({},e,{ice:"Maroc"!==e.pays.label?null:e.ice,pays:e.pays.value,ville:e.ville.value,secteur:e.secteur.value,codepostal:e.codepostal?parseInt(e.codepostal):null});return null===a.codepostal&&delete a.codepostal,function(e){var c=r.a.put("/api/acheteurs/".concat(t),a);return e({type:U}),c.then(function(t){return Promise.all([e({type:H,payload:t.data}),e(Object(n.B)({message:"Bien modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])}).catch(function(t){e({type:j,payload:E.a.parseApiErrors(t)})})}}function ee(e,t){var a={isactif:t};return function(t){return t({type:U}),r.a.put(e["@id"],a).then(function(e){return Promise.all([t({type:H,payload:e.data}),t(Object(n.B)({message:"Statut modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])})}}function te(e,t){return function(a){var c=r.a.put("/api/acheteurs/".concat(t),e);return a({type:U}),c.then(function(e){return Promise.all([a({type:H,payload:e.data}),a(Object(n.B)({message:"Bien modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])}).catch(function(e){a({type:j,payload:E.a.parseApiErrors(e)})})}}function ae(e,t){return function(a){var c=new FormData;c.append("file",e);var i=r.a.post("/api/avatars",c,{headers:{"Content-Type":"multipart/form-data"}});return a({type:Y}),i.then(function(e){return Promise.all([e,a({type:_,payload:e.data}),a(ne({avatar:e.data["@id"]},t))])}).catch(function(e){a({type:B}),a(Object(n.B)({message:h.a.map(E.a.parseApiErrors(e),function(e,t){return t+": "+e}),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}))})}}function ne(e,t){return function(a){var c=r.a.put("/api/acheteurs/".concat(t),e);return a({type:U}),c.then(function(e){return Promise.all([a({type:H,payload:e.data}),a(Object(n.B)({message:"Bien modifi\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))])}).catch(function(e){a({type:j,payload:E.a.parseApiErrors(e)})})}}var re="[DIALOG] OPEN",ce="[DIALOG] CLOSE";function ie(){return{type:ce}}function oe(e){return{type:re,options:e}}a.d(t,"l",function(){return c}),a.d(t,"w",function(){return i}),a.d(t,"d",function(){return o}),a.d(t,"j",function(){return u}),a.d(t,"v",function(){return l}),a.d(t,"Q",function(){return s}),a.d(t,"J",function(){return d}),a.d(t,"C",function(){return p}),a.d(t,"R",function(){return f}),a.d(t,"k",function(){return y}),a.d(t,"c",function(){return b}),a.d(t,"n",function(){return P}),a.d(t,"f",function(){return T}),a.d(t,"m",function(){return O}),a.d(t,"e",function(){return R}),a.d(t,"g",function(){return C}),a.d(t,"i",function(){return D}),a.d(t,"p",function(){return N}),a.d(t,"r",function(){return S}),a.d(t,"t",function(){return j}),a.d(t,"y",function(){return H}),a.d(t,"q",function(){return U}),a.d(t,"h",function(){return I}),a.d(t,"o",function(){return x}),a.d(t,"s",function(){return M}),a.d(t,"u",function(){return w}),a.d(t,"b",function(){return L}),a.d(t,"z",function(){return _}),a.d(t,"B",function(){return Y}),a.d(t,"A",function(){return B}),a.d(t,"x",function(){return k}),a.d(t,"a",function(){return V}),a.d(t,"S",function(){return G}),a.d(t,"E",function(){return z}),a.d(t,"F",function(){return q}),a.d(t,"I",function(){return Q}),a.d(t,"K",function(){return F}),a.d(t,"L",function(){return J}),a.d(t,"M",function(){return W}),a.d(t,"O",function(){return K}),a.d(t,"D",function(){return X}),a.d(t,"N",function(){return Z}),a.d(t,"T",function(){return $}),a.d(t,"H",function(){return ee}),a.d(t,"U",function(){return te}),a.d(t,"V",function(){return ae}),a.d(t,"G",function(){return ie}),a.d(t,"P",function(){return oe})},1107:function(e,t,a){"use strict";var n=a(46),r=a(8),c=a(1063),i=a(107),o={data:[],pageCount:null,loading:!1,searchText:"",acheteursDialog:{type:"new",props:{open:!1},data:null},parametres:{page:1,societe:"",search:[],filter:{id:"created",direction:"desc"}}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.l:return Object(r.a)({},e,{loading:!0});case c.d:return Object(r.a)({},e,{data:t.payload["hydra:member"],pageCount:i.a.hydraPageCount(t.payload),loading:!1});case c.j:return Object(r.a)({},e,{acheteursDialog:{type:"new",props:{open:!0},data:null}});case c.v:return Object(r.a)({},e,{searchText:t.searchText});case c.w:return Object(r.a)({},e,{parametres:{page:t.parametres.page,societe:t.parametres.societe,search:t.parametres.search,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}});default:return e}},l=a(21),s={pays:null,secteurs:null,loading:!1,requestAcheteur:!1,villes:null,error:null,data:null,acheteurReqInProgress:!1,avatar:null,acheteur_deleted:null,loadingAddVille:!1,villeAdded:!1,demandes:[],totalItems:0,pageCount:null,loadingDmd:!1,parametres:{page:1,search:[],description:"",filter:{id:"created",direction:"desc"}},blacklistes:[],totalItemsBl:0,loadingBL:!1},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.m:return Object(r.a)({},e,{loadingBL:!0});case c.e:return Object(r.a)({},e,{totalItemsBl:t.payload["hydra:totalItems"],blacklistes:t.payload["hydra:member"],loadingBL:!1});case c.n:return Object(r.a)({},e,{loadingDmd:!0});case c.f:return Object(r.a)({},e,{demandes:t.payload["hydra:member"],totalItems:t.payload["hydra:totalItems"],pageCount:i.a.hydraPageCount(t.payload),loadingDmd:!1});case c.o:return Object(r.a)({},e,{loadingAddVille:!0});case c.s:return Object(r.a)({},e,{loadingAddVille:!1,villeAdded:!0});case c.u:return Object(r.a)({},e,{loadingAddVille:!1});case c.b:return Object(r.a)({},e,{villeAdded:!1});case c.a:return Object(r.a)({},e,{pays:null,secteurs:null,loading:!1,requestAcheteur:!1,villes:null,error:null,data:null,acheteurReqInProgress:!1,avatar:null,acheteur_deleted:null});case c.q:case c.p:return Object(r.a)({},e,{loading:!0});case c.k:return Object(r.a)({},e,{requestAcheteur:!0});case c.r:return Object(r.a)({},e,{villes:null});case c.c:return Object(r.a)({},e,{data:t.payload,requestAcheteur:!1,error:null});case c.h:return Object(r.a)({},e,{secteurs:t.payload});case c.g:return Object(r.a)({},e,{pays:t.payload,loading:!1});case c.i:return Object(r.a)({},e,{villes:[].concat(Object(l.a)(t.payload),[{"@id":"/api/villes/113",name:"Autre"}])});case c.y:return Object(r.a)({},e,{loading:!1,data:t.payload,error:null});case c.t:return Object(r.a)({},e,{loading:!1,error:t.payload,success:!1,redirect_success:""});case c.B:return Object(r.a)({},e,{acheteurReqInProgress:!0});case c.z:return Object(r.a)({},e,{avatar:t.payload,acheteurReqInProgress:!1});case c.A:return Object(r.a)({},e,{acheteurReqInProgress:!1});case c.x:return Object(r.a)({},e,{parametres:{page:t.parametres.page,search:t.parametres.search,description:t.parametres.description,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}});default:return e}},p=a(36),f={state:!1,options:{children:"Hi"}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.f:return Object(r.a)({},e,{state:!0,options:Object(r.a)({},e.options,t.options)});case p.a:return Object(r.a)({},e,{state:!1});default:return e}},E=Object(n.d)({acheteurs:u,dialog:m,acheteur:d});t.a=E},1404:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),i=a(140),o=a(23),u=a(945),l=a(967),s=a(1029),d=a(958),p=a(1051),f=a(1037),m=a(1052),E=a(1038),h=a(1035),A=a(1013),g=a(78),v=a(1063),y=a(6),b=a(64),P=a.n(b),T=a(347),O=a(10);var R=Object(g.g)(function(e){var t=Object(y.b)(),a=Object(y.c)(function(e){return e.acheteursAdminApp.acheteurs.data}),i=Object(y.c)(function(e){return e.acheteursAdminApp.acheteurs.loading}),g=Object(y.c)(function(e){return e.acheteursAdminApp.acheteurs.pageCount}),b=Object(y.c)(function(e){return e.acheteursAdminApp.acheteurs.parametres}),R=Object(y.c)(function(e){return e.acheteursAdminApp.acheteurs.searchText}),C=Object(n.useState)(null),D=Object(o.a)(C,2),N=D[0],S=D[1];if(Object(n.useEffect)(function(){a&&S(function(e,t){var a=Object.keys(e).map(function(t){return e[t]});return 0===t.length?a:c.y.filterArrayByString(a,t)}(a,R))},[a,R]),!N)return null;var j=O.a.debounce(function(e){return t(v.R(e))},1e3);return r.a.createElement("div",{className:"w-full flex flex-col"},r.a.createElement(c.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(T.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTheadProps:function(e,t,a){return{className:"h-64"}},data:N,columns:[{Header:"",Cell:function(e){return e.original.avatar?r.a.createElement(u.a,{className:"mr-8",alt:e.original.firstName,src:c.G+e.original.avatar.url}):r.a.createElement(u.a,{className:"mr-8",alt:e.original.firstName,src:"assets/images/avatars/images.png"})},className:"justify-center",width:64,sortable:!1},{Header:"Soci\xe9t\xe9",accessor:"societe",filterable:!0,getProps:function(e,t,a){return{style:{color:t&&t.original.ville&&113===t.original.ville.id?"orange":null}}}},{Header:"Nom",accessor:"lastName",filterable:!0},{Header:"Pr\xe9nom",accessor:"firstName",filterable:!0},{Header:"Email",accessor:"email",filterable:!0},{Header:"T\xe9l\xe9phone",accessor:"phone",filterable:!0},{Header:"Date de cr\xe9ation",accessor:"created",filterable:!0,Cell:function(e){return P()(e.original.created).format("DD/MM/YYYY HH:mm")},Filter:function(e){var t=e.filter,a=e.onChange;return r.a.createElement(l.a,{onChange:function(e){return a(e.target.value)},style:{width:"100%"},value:t?t.value:"",type:"date",InputLabelProps:{shrink:!0}})}},{Header:"Statut",accessor:"isactif",filterable:!0,Cell:function(e){return e.original.isactif?r.a.createElement(s.a,{title:"Activ\xe9"},r.a.createElement(d.a,{className:"text-green text-20",onClick:function(a){a.stopPropagation(),t(v.P({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{id:"alert-dialog-title"},"D\xe9sactivation"),r.a.createElement(f.a,null,r.a.createElement(m.a,{id:"alert-dialog-description"},"Voulez vous vraiment d\xe9sactiv\xe9 ce compte ?")),r.a.createElement(E.a,null,r.a.createElement(h.a,{onClick:function(){return t(v.G())},variant:"contained",color:"primary"},"Non"),r.a.createElement(h.a,{onClick:function(a){t(v.C(e.original,!1,b)),t(v.G())},color:"primary",variant:"outlined",autoFocus:!0},"Oui")))}))}},r.a.createElement(A.a,null,"check_circle"))):r.a.createElement(s.a,{title:"D\xe9sactiv\xe9"},r.a.createElement(d.a,{className:"text-red text-20",onClick:function(a){a.stopPropagation(),t(v.P({children:r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{id:"alert-dialog-title"},"Activation"),r.a.createElement(f.a,null,r.a.createElement(m.a,{id:"alert-dialog-description"},"Voulez vous vraiment activ\xe9 ce compte ?")),r.a.createElement(E.a,null,r.a.createElement(h.a,{onClick:function(){return t(v.G())},variant:"contained",color:"primary"},"Non"),r.a.createElement(h.a,{onClick:function(a){t(v.C(e.original,!0,b)),t(v.G())},color:"primary",variant:"outlined",autoFocus:!0},"Oui")))}))}},r.a.createElement(A.a,null,"remove_circle")))},Filter:function(e){var t=e.filter,a=e.onChange;return r.a.createElement("select",{onChange:function(e){return a(e.target.value)},style:{width:"100%"},value:t?t.value:""},r.a.createElement("option",{value:""},"Tous"),r.a.createElement("option",{value:"true"},"Actif"),r.a.createElement("option",{value:"false"},"Inactif"))}},{Header:"",Cell:function(t){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(s.a,{title:"D\xe9tails",onClick:function(a){a.stopPropagation(),e.history.push("/users/acheteur/show/"+t.original.id)}},r.a.createElement(d.a,{className:"text-teal text-20"},r.a.createElement(A.a,null,"remove_red_eye"))),r.a.createElement(s.a,{title:"Editer",onClick:function(a){a.stopPropagation(),e.history.push("/users/acheteurs/"+t.original.id)}},r.a.createElement(d.a,{className:"text-orange text-20"},r.a.createElement(A.a,null,"edit"))))}}],manual:!0,pages:g,page:b.page-1,defaultPageSize:10,loading:i,showPageSizeOptions:!1,onPageChange:function(e){b.page=e+1,t(v.R(b))},onSortedChange:function(e,a,n){b.page=1,b.filter.id=e[0].id,b.filter.direction=e[0].desc?"desc":"asc",t(v.R(b))},onFilteredChange:function(e){b.page=1,b.search=e,j(b)},noDataText:"No Acheteur found",loadingText:"Chargement...",ofText:"sur"})))}),C=a(98),D=a(139),N=a(957),S=a(1014);var j=function(e){var t=Object(y.b)(),a=Object(y.c)(function(e){return e.fuse.settings.mainTheme}),n=Object(y.c)(function(e){return e.acheteursAdminApp.acheteurs.parametres});return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(c.d,{animation:"transition.expandIn",delay:300},r.a.createElement(A.a,{className:"text-32 mr-0 sm:mr-12"},"supervisor_account")),r.a.createElement(c.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(C.a,{className:"hidden sm:flex",variant:"h6"},"Gestion des acheteurs"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},r.a.createElement(S.a,{theme:a},r.a.createElement(c.d,{animation:"transition.slideDownIn",delay:300},r.a.createElement(D.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},r.a.createElement(A.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(N.a,{placeholder:"Rechercher",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:n.societe,inputProps:{"aria-label":"Rechercher"},onChange:function(e){n.page=1,n.societe=e.target.value,t(v.R(n))}}))))),r.a.createElement(c.d,{animation:"transition.slideRightIn",delay:300},r.a.createElement(h.a,{onClick:function(e){return t(v.Q())},className:"whitespace-no-wrap",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Ajouter un Acheteur"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},H=a(1107);t.default=Object(i.a)("acheteursAdminApp",H.a)(function(){var e=Object(y.b)(),t=Object(y.c)(function(e){return e.acheteursAdminApp.acheteurs.parametres});return Object(n.useEffect)(function(){e(v.J(t))},[e,t]),r.a.createElement(c.o,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(j,null),content:r.a.createElement(R,null),innerScroll:!0})})}}]);