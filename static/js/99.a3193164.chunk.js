(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{1269:function(e,t,a){"use strict";var n=a(33),r=a(50);const l="[MESSAGES FOURNISSEUR APP] REQUEST MESSAGES",s="[MESSAGES FOURNISSEUR APP] REMOVE MESSAGES",c="[MESSAGES FOURNISSEUR APP] GET MESSAGES",i="[MESSAGES FOURNISSEUR APP] SET MESSAGES SEARCH TEXT";function o(e){const t=r.a.get("/api/fournisseurs/".concat(e,"/messages?statut=1"));return e=>(e({type:l}),t.then(t=>e({type:c,payload:t.data})))}function m(e,t){let a={del:!0};return l=>{return r.a.put("/api/contact_fournisseurs/".concat(e.id),a).then(e=>Promise.all([l({type:s}),l(Object(n.B)({message:"Message bien supprim\xe9!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>l(o(t))))}}function u(e){return{type:i,searchText:e.target.value}}var d=a(39),E=a(200);const g="[MESSAGE FOURNISSEUR APP] REQUEST MESSAGE",f="[MESSAGE FOURNISSEUR APP] GET MESSAGE",p="[MESSAGE FOURNISSEUR APP] SAVE ERROR";function h(e){const t=r.a.get("/api/contact_fournisseurs/".concat(e));return e=>(e({type:g}),t.then(t=>(e(E.b("messages")),e({type:f,payload:t.data}))).catch(t=>{e({type:p,payload:d.y.parseApiErrors(t)})}))}a.d(t,"d",function(){return l}),a.d(t,"b",function(){return c}),a.d(t,"f",function(){return i}),a.d(t,"h",function(){return o}),a.d(t,"i",function(){return m}),a.d(t,"j",function(){return u}),a.d(t,"c",function(){return g}),a.d(t,"a",function(){return f}),a.d(t,"e",function(){return p}),a.d(t,"g",function(){return h})},1352:function(e,t,a){"use strict";var n=a(43),r=a(1269),l=a(102);const s={data:[],pageCount:null,loading:!1,searchText:""};var c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.d:return{...e,loading:!0};case r.b:return{...e,data:t.payload["hydra:member"],pageCount:l.a.hydraPageCount(t.payload),loading:!1};case r.f:return{...e,searchText:t.searchText};default:return e}};const i={data:null,error:null,loading:!1};var o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.c:return{...e,loading:!0};case r.a:return{...e,data:t.payload,loading:!1};case r.e:return{...e,error:t.payload,loading:!1};default:return e}};const m=Object(n.d)({messages:c,message:o});t.a=m},1581:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(39),s=a(136),c=a(89),i=a(1221),o=a(1140),m=a(1204),u=a(71),d=a(1269),E=a(7),g=a(59),f=a.n(g),p=a(102),h=a(365),S=a(10);var b=Object(u.g)(function(e){const t=Object(E.b)(),a=Object(E.c)(e=>{let{messagesFrsApp:t}=e;return t.messages.data}),s=Object(E.c)(e=>{let{messagesFrsApp:t}=e;return t.messages.loading}),u=Object(E.c)(e=>{let{auth:t}=e;return t.user}),g=Object(E.c)(e=>{let{messagesFrsApp:t}=e;return t.messages.searchText}),[b,x]=Object(n.useState)(null);return Object(n.useEffect)(()=>{a&&x(function(e,t){const a=Object.keys(e).map(t=>e[t]);return 0===t.length?a:p.a.filterArrayByString(a,t)}(a,g))},[a,g]),b?0===b.length?r.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},r.a.createElement(c.a,{color:"textSecondary",variant:"h5"},"Il n'y a pas de message!")):r.a.createElement("div",{className:"w-full flex flex-col"},r.a.createElement(l.d,{animation:"transition.slideUpIn",delay:300},r.a.createElement(h.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:(t,a,n)=>({className:"h-64 cursor-pointer",onClick:(t,n)=>{a&&e.history.push("/messages/"+a.original.id)}}),getTheadProps:(e,t,a)=>({className:"h-64"}),data:b,columns:[{Header:"",filterable:!0,Cell:e=>r.a.createElement("div",{className:"flex items-center"},e.original.isRead?r.a.createElement("p",{className:"text-green"},"Lu"):r.a.createElement("p",{className:"text-orange"},"No Lu"))},{Header:"Nom Contact",accessor:"contact",filterable:!0,Cell:e=>e.original.contact?e.original.contact:""},{Header:"T\xe9l\xe9phone",accessor:"phone",filterable:!0,Cell:e=>e.original.phone?e.original.phone:""},{Header:"Email",accessor:"email",filterable:!0,Cell:e=>e.original.email?e.original.email:""},{Header:"Message",accessor:"message",filterable:!0,Cell:e=>S.a.truncate(e.original.message,{length:36,separator:" "})},{Header:"Date de cr\xe9ation",accessor:"created",filterable:!1,Cell:e=>f()(e.original.created).format("DD/MM/YYYY HH:mm")},{Header:"",Cell:e=>r.a.createElement("div",{className:"flex items-center"},1!==e.original.statut?r.a.createElement(i.a,{title:"Supprimer"},r.a.createElement(o.a,{className:"text-red text-20",onClick:a=>{a.stopPropagation(),t(d.i(e.original,u.id))}},r.a.createElement(m.a,null,"delete"))):r.a.createElement(i.a,{title:"Interdit!"},r.a.createElement(o.a,{className:"text-20 cursor-not-allowed disable",onClick:e=>{e.stopPropagation()}},r.a.createElement(m.a,null,"delete"))),r.a.createElement(i.a,{title:"D\xe9tails"},r.a.createElement(o.a,{className:"text-teal text-20"},r.a.createElement(m.a,null,"remove_red_eye"))))}],defaultPageSize:10,noDataText:"Aucun message trouv\xe9",loading:s,loadingText:"Chargement...",ofText:"sur"}))):null}),x=a(135),y=a(1139),A=a(1205);var v=function(e){const t=Object(E.b)(),a=Object(E.c)(e=>{let{fuse:t}=e;return t.settings.mainTheme}),n=Object(E.c)(e=>{let{messagesFrsApp:t}=e;return t.messages.searchText});return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(l.d,{animation:"transition.expandIn",delay:300},r.a.createElement(m.a,{className:"text-32 mr-0 sm:mr-12"},"email")),r.a.createElement(l.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(c.a,{className:"hidden sm:flex",variant:"h6"},"Liste des messages"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},r.a.createElement(A.a,{theme:a},r.a.createElement(l.d,{animation:"transition.slideDownIn",delay:300},r.a.createElement(x.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},r.a.createElement(m.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(y.a,{placeholder:"Rechercher dans les messages",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:n,inputProps:{"aria-label":"Rechercher"},onChange:e=>t(d.j(e))}))))))},N=a(1352),O=a(364);t.default=Object(s.a)("messagesFrsApp",N.a)(function(){const e=Object(E.b)(),t=Object(E.c)(e=>{let{auth:t}=e;return t.user});return Object(n.useEffect)(()=>{t&&e(d.h(t.id))},[e,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(O.Helmet,null,r.a.createElement("title",null,"Messages | Les Achats Industriels"),r.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),r.a.createElement("meta",{name:"googlebot",content:"noindex"})),r.a.createElement(l.o,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(v,null),content:r.a.createElement(b,null),innerScroll:!0}))})}}]);