(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1242:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};t.default=n},1249:function(e,t,a){"use strict";var n=a(33),r=a(50),i=a(200);a(1264);const o="[DEMANDES APP] REQUEST DEMANDES",s="[DEMANDES APP] REMOVE DEMANDES",c="[DEMANDES APP] SET PARAMETRES DATA",l="[DEMANDES APP] CLEAN_UP",d="[DEMANDES APP] GET DEMANDES",u="[DEMANDES APP] SET DEMANDES SEARCH TEXT";function m(){return e=>e({type:l})}function p(e){var t="";e.search.length>0&&e.search.map(e=>e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value));const a=r.a.get("/api/demande_devis?page=".concat(e.page,"&del=0&statut=false").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return e=>(e({type:o}),a.then(t=>e({type:d,payload:t.data})))}function E(e){var t="";e.search.length>0&&e.search.map(e=>e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value));const a=r.a.get("/api/demande_devis?page=".concat(e.page,"&del=0&statut=1").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return e=>(e({type:o}),a.then(t=>e({type:d,payload:t.data})))}function f(e){var t="";e.search.length>0&&e.search.map(e=>e.value&&("created"===e.id?t+="&"+e.id+"[after]="+e.value:t+="&"+e.id+"="+e.value));const a=r.a.get("/api/demande_devis?page=".concat(e.page,"&del=1").concat(t,"&order[").concat(e.filter.id,"]=").concat(e.filter.direction));return e=>(e({type:o}),a.then(t=>e({type:d,payload:t.data})))}function h(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={del:a};return(c,l)=>{return r.a.put("/api/demande_devis/".concat(e.id),o).then(e=>Promise.all([c({type:s}),c(i.b("demandes-devis")),c(!1===a?Object(n.B)({message:"Demande bien recup\xe9r\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}):Object(n.B)({message:"Demande bien supprim\xe9e!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"}))]).then(()=>c(!1===a?f(t):p(t))))}}function g(e){return{type:c,parametres:e}}var v=a(39);const A="[DEMANDE APP] REQUEST DEMANDE",P="[DEMANDE APP] GET DEMANDE",y="[DEMANDE APP] REQUEST SAVE",b="[DEMANDE APP] SAVE DEMANDE",D="[DEMANDE APP] SAVE ERROR";function x(e){const t=r.a.get("/api/demande_devis/".concat(e));return e=>(e({type:A}),t.then(t=>{e({type:P,payload:t.data})}).catch(t=>{e({type:D,payload:v.y.parseApiErrors(t)})}))}function N(e,t){const a=r.a.put("/api/demande_devis/".concat(t),e);return e=>(e({type:y}),a.then(t=>(e(Object(n.B)({message:"Demande Modifi\xe9e"})),e(i.b("demandes-devis")),e({type:b,payload:t.data}))).catch(t=>{e({type:D,payload:v.y.parseApiErrors(t)})}))}const O="[DIALOG] OPEN",T="[DIALOG] CLOSE";function I(){return{type:T}}function S(e){return{type:O,options:e}}a.d(t,"e",function(){return o}),a.d(t,"j",function(){return c}),a.d(t,"a",function(){return l}),a.d(t,"c",function(){return d}),a.d(t,"i",function(){return u}),a.d(t,"k",function(){return m}),a.d(t,"o",function(){return p}),a.d(t,"p",function(){return E}),a.d(t,"n",function(){return f}),a.d(t,"s",function(){return h}),a.d(t,"t",function(){return g}),a.d(t,"d",function(){return A}),a.d(t,"b",function(){return P}),a.d(t,"f",function(){return y}),a.d(t,"g",function(){return b}),a.d(t,"h",function(){return D}),a.d(t,"m",function(){return x}),a.d(t,"r",function(){return N}),a.d(t,"l",function(){return I}),a.d(t,"q",function(){return S})},1264:function(e,t,a){"use strict";var n=a(50);const r="[PORTAIL APP] REQUEST_DEMANDE_DEVIS",i="[PORTAIL APP] GET_DEMANDE_DEVIS",o="[PORTAIL APP] REQUEST_ACTUALITE",s="[PORTAIL APP] GET_ACTUALITE",c="[PORTAIL APP] REQUEST_FOCUS_PRODUITS",l="[PORTAIL APP] GET_FOCUS_PRODUITS",d="[PORTAIL APP] REQUEST_CATEGORIES",u="[PORTAIL APP] GET_CATEGORIES",m="[PORTAIL APP] CLEAN_UP_DEVIS",p="[PORTAIL APP] CLEAN_UP_PRODUCT",E="[PORTAIL APP] CLEAN_UP_NEW",f="[PORTAIL APP] CLEAN_UP_NEW";function h(){return e=>e({type:f})}function g(){return e=>e({type:m})}function v(){return e=>e({type:p})}function A(){return e=>e({type:E})}function P(){const e=n.a.get("/api/focus_categories_mobile");return t=>(t({type:d}),e.then(e=>t({type:u,payload:e.data})))}function y(){const e=n.a.get("/api/select_produits?produit[exists]=true");return t=>(t({type:c}),e.then(e=>t({type:l,payload:e.data["hydra:member"]})))}function b(){const e=n.a.get("/api/demande_achats?itemsPerPage=4&statut=1&isPublic=1&order[created]=desc&props[]=id&props[]=reference&props[]=titre&props[]=description&props[]=pays&props[]=ville&props[]=dateExpiration&props[]=created&props[]=slug");return t=>(t({type:r}),e.then(e=>t({type:i,payload:e.data["hydra:member"]})))}function D(){const e=n.a.get("/api/actualites?itemsPerPage=4&isActive=true&order[created]=desc");return t=>(t({type:o}),e.then(e=>t({type:s,payload:e.data["hydra:member"]})))}a.d(t,"k",function(){return r}),a.d(t,"g",function(){return i}),a.d(t,"i",function(){return o}),a.d(t,"e",function(){return s}),a.d(t,"l",function(){return c}),a.d(t,"h",function(){return l}),a.d(t,"j",function(){return d}),a.d(t,"f",function(){return u}),a.d(t,"b",function(){return m}),a.d(t,"d",function(){return p}),a.d(t,"c",function(){return E}),a.d(t,"a",function(){return f}),a.d(t,"m",function(){return h}),a.d(t,"n",function(){return g}),a.d(t,"p",function(){return v}),a.d(t,"o",function(){return A}),a.d(t,"q",function(){return P}),a.d(t,"r",function(){return y}),a.d(t,"t",function(){return b}),a.d(t,"s",function(){return D})},1289:function(e,t,a){"use strict";var n=a(43),r=a(1249),i=a(102);const o={data:[],pageCount:null,loading:!1,searchText:"",parametres:{page:1,search:[],filter:{id:"created",direction:"desc"}},demandesDialog:{props:{open:!1}}};var s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.a:return{...o};case r.e:return{...e,loading:!0};case r.c:return{...e,data:t.payload["hydra:member"],pageCount:i.a.hydraPageCount(t.payload),loading:!1};case r.i:return{...e,searchText:t.searchText};case r.j:return{...e,parametres:{page:t.parametres.page,search:t.parametres.search,filter:{id:t.parametres.filter.id,direction:t.parametres.filter.direction}}};default:return e}};const c={data:null,error:null,loading:!1,success:!1};var l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.d:case r.f:return{...e,loading:!0};case r.b:return{...e,data:t.payload,loading:!1};case r.g:return{...e,loading:!1,success:!0};case r.h:return{...e,error:t.payload,loading:!1,success:!1};default:return e}},d=a(33);const u={state:!1,options:{children:"Hi"}};var m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.f:return{...e,state:!0,options:{...e.options,...t.options}};case d.a:return{...e,state:!1};default:return e}};const p=Object(n.d)({demandesDevis:s,demandeDevis:l,dialog:m});t.a=p},1507:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(89),o=a(1204),s=a(1227),c=a(1233),l=a(1224),d=a(1236),u=a(1219),m=a(1232),p=a(1212),E=a(1231),f=a(163),h=a(1157),g=a(39),v=a(137),A=a(10),P=a(7),y=a(136),b=a(1249),D=a(1289),x=a(51),N=a.n(x),O=a(1242),T=a.n(O);const I=Object(h.a)(e=>({root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},buttonProgress:{color:T.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},demandeDevisImageFeaturedStar:{position:"absolute",top:0,right:0,color:f.a[400],opacity:0},demandeDevisImageUpload:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut},select:{zIndex:999},demandeDevisImageItem:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,"&:hover":{"& $demandeDevisImageFeaturedStar":{opacity:.8}},"&.featured":{pointerEvents:"none",boxShadow:e.shadows[3],"& $demandeDevisImageFeaturedStar":{opacity:1},"&:hover $demandeDevisImageFeaturedStar":{opacity:1}}}}));t.default=Object(y.a)("demandeDevisApp",D.a)(function(e){const t=Object(P.b)(),a=Object(P.c)(e=>{let{demandeDevisApp:t}=e;return t.demandeDevis}),[f,h]=Object(n.useState)(!1),y=Object(n.useRef)(null),{form:D,handleChange:x,setForm:O}=Object(v.b)(),T=I(e),[S,L]=Object(n.useState)(0);function R(){h(!1)}function _(){t(b.r(D,D.id))}return Object(n.useEffect)(()=>{a.error&&(a.error.reference||a.error.statut||a.error.motifRejet||a.error.description||a.error.descriptionEn||a.error.descriptionEs||a.error.dateExpiration||a.error.isPublic||a.error.isAnonyme||a.error.sousSecteurs||a.error.budget)&&(y.current.updateInputsWithError({...a.error}),R(),a.error=null)},[a.error]),Object(n.useEffect)(()=>{a.success&&(a.success=!1,a.data=null,a.error=null,e.history.push("/demandes_devis"))},[a.success]),Object(n.useEffect)(()=>{!function(){const a=e.match.params,{demandeId:n}=a;t(b.m(n))}()},[t,e.match.params]),Object(n.useEffect)(()=>{(a.data&&!D||a.data&&D&&a.data.id!==D.id)&&O({...a.data})},[D,a.data,O]),r.a.createElement(g.o,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:a.loading?"":D&&r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex flex-col items-start max-w-full"},r.a.createElement(g.d,{animation:"transition.slideRightIn",delay:300},r.a.createElement(i.a,{className:"normal-case flex items-center sm:mb-12",role:"button",onClick:()=>e.history.goBack(),color:"inherit"},r.a.createElement(o.a,{className:"mr-4 text-20"},"arrow_back"),"Retour")),r.a.createElement("div",{className:"flex items-center max-w-full"},r.a.createElement("div",{className:"flex flex-col min-w-0"},r.a.createElement(g.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(i.a,{className:"text-16 sm:text-20 truncate"},D.produit?"R\xe9f\xe9rence de produit :"+D.produit.reference:"")),r.a.createElement(g.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(i.a,{variant:"caption"},"D\xe9tails de la demande"))))),r.a.createElement(g.d,{animation:"transition.slideRightIn",delay:300},r.a.createElement(s.a,{className:"whitespace-no-wrap",variant:"contained",type:"submit",disabled:!f||a.loading,onClick:()=>_()},"Sauvegarder",a.loading&&r.a.createElement(c.a,{size:24,className:T.buttonProgress})))),contentToolbar:a.loading?r.a.createElement("div",{className:T.root},r.a.createElement(l.a,{color:"secondary"})):r.a.createElement(d.a,{value:S,onChange:function(e,t){L(t)},indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},r.a.createElement(u.a,{className:"h-64 normal-case",label:"D\xe9tails de la demande de devis"})),content:a.loading?"":D&&r.a.createElement("div",{className:"p-10  sm:p-24 max-w-2xl"},0===S&&r.a.createElement(N.a,{onValidSubmit:_,onValid:function(){h(!0)},onInvalid:R,ref:y,className:"flex pt-10 flex-col "},r.a.createElement(m.a,{container:!0,spacing:3,className:"mb-5"},r.a.createElement(m.a,{item:!0,xs:12,sm:4},r.a.createElement(g.F,{label:"Fournisseur",id:"fournisseur",name:"fournisseur",value:D.fournisseur?D.fournisseur.societe:"",variant:"outlined",InputProps:{readOnly:!0},fullWidth:!0})),r.a.createElement(m.a,{item:!0,xs:12,sm:4},r.a.createElement(g.F,{label:"R\xe9f. Produit",id:"reference",name:"reference",value:D.produit?D.produit.reference:"",variant:"outlined",InputProps:{readOnly:!0},fullWidth:!0})),r.a.createElement(m.a,{item:!0,xs:12,sm:4},r.a.createElement(g.F,{label:"Quantit\xe9",id:"quantity",name:"quantity",value:D.quantity?D.quantity:"",variant:"outlined",InputProps:{readOnly:!0},fullWidth:!0}))),r.a.createElement(p.a,null),r.a.createElement(m.a,{container:!0,spacing:3,className:"mt-5 mb-5"},r.a.createElement(m.a,{item:!0,xs:12,sm:4},r.a.createElement(g.F,{label:"Raison sociale",autoFocus:!0,id:"societe",name:"societe",value:D.societe,onChange:x,variant:"outlined",validations:{matchRegexp:/^[a-z]|([a-z][0-9])|([0-9][a-z])|([a-z][0-9][a-z])+$/i,minLength:2,maxLength:40},validationErrors:{minLength:"Raison sociale doit d\xe9passer 2 caract\xe8res alphanum\xe9riques",maxLength:"Raison sociale ne peut d\xe9passer 40 caract\xe8res alphanum\xe9riques",matchRegexp:"Raison sociale doit contenir des caract\xe8res alphanum\xe9riques"},required:!0,fullWidth:!0})),r.a.createElement(m.a,{item:!0,xs:12,sm:4},r.a.createElement(g.F,{type:"text",name:"contact",value:D.contact,onChange:x,label:"NOM & Pr\xe9nom",validations:{minLength:4},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 4"},InputProps:{endAdornment:r.a.createElement(E.a,{position:"end"},r.a.createElement(o.a,{className:"text-20",color:"action"},"person"))},variant:"outlined",required:!0,fullWidth:!0})),r.a.createElement(m.a,{item:!0,xs:12,sm:4},r.a.createElement(g.F,{type:"text",name:"email",label:"Email",validations:"isEmail",value:D.email,onChange:x,validationErrors:{isEmail:"Veuillez saisir un e-mail valide"},InputProps:{endAdornment:r.a.createElement(E.a,{position:"end"},r.a.createElement(o.a,{className:"text-20",color:"action"},"email"))},variant:"outlined",required:!0,fullWidth:!0})),r.a.createElement(m.a,{item:!0,xs:12,sm:4},r.a.createElement(g.F,{className:"mb-16",value:D.phone,onChange:x,type:"text",name:"phone",label:"T\xe9l\xe9phone",validations:{minLength:10,maxLength:13},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 10",maxLength:"La longueur maximale de caract\xe8re est 13"},InputProps:{endAdornment:r.a.createElement(E.a,{position:"end"},r.a.createElement(o.a,{className:"text-20",color:"action"},"local_phone"))},variant:"outlined",required:!0,fullWidth:!0})),r.a.createElement(m.a,{item:!0,xs:12,sm:8},r.a.createElement(g.F,{type:"text",name:"adresse",value:D.adresse,onChange:x,autoComplete:"adresse",label:"Adresse",validations:{minLength:10},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 10"},InputProps:{endAdornment:r.a.createElement(E.a,{position:"end"},r.a.createElement(o.a,{className:"text-20",color:"action"},"location_on"))},variant:"outlined",required:!0,fullWidth:!0}))),r.a.createElement(g.F,{className:"mb-16  w-full",type:"text",name:"message",value:D.message,onChange:x,label:"Message",validations:{minLength:10},validationErrors:{minLength:"La longueur minimale de caract\xe8re est 10"},variant:"outlined",multiline:!0,rows:"4",required:!0}),r.a.createElement(m.a,{container:!0,spacing:3},r.a.createElement(m.a,{item:!0,xs:12,sm:6},r.a.createElement(g.a,{className:"mb-10",name:"statut",onChange:e=>(function(e,t){O(A.a.set({...D},t,e.target.checked))})(e,"statut"),label:"Valider et alerter le fournisseur",value:D.statut}))))),innerScroll:!0})})}}]);